/*! For license information please see main.1996df98.js.LICENSE.txt */
(()=>{"use strict";var e={621:(e,t,n)=>{n.r(t),n.d(t,{Headers:()=>a,Request:()=>o,Response:()=>l,default:()=>s,fetch:()=>i});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const i=r.fetch,s=r.fetch.bind(r),a=r.Headers,o=r.Request,l=r.Response},345:(e,t,n)=>{var r=n(950),i=n(340);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),k=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case k:return"Portal";case x:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function K(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){Y(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ee=null,Se=null;function xe(e){if(e=bi(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),ke(e.stateNode,e.type,t))}}function Te(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Ie(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Pe=!1;function Ae(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ce(e,t,n)}finally{Pe=!1,(null!==Ee||null!==Se)&&(Ne(),Ie())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var je={};Object.defineProperty(je,"passive",{get:function(){Re=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ue){Re=!1}function De(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Ue=!1,Fe=null,Be={onError:function(e){Le=!0,Me=e}};function Ve(e,t,n,r,i,s,a,o,l){Le=!1,Me=null,De.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ke(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(ze(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qe(i),e;if(a===r)return qe(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Je=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Ye=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ht(o):0!==(s&=a)&&(r=ht(s))}else 0!==(a=n&~i)?r=ht(a):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,kt,Et,St,xt,Tt=!1,It=[],Ct=null,Nt=null,Pt=null,At=new Map,Ot=new Map,Rt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ke(n)))return e.blockedOn=t,void xt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Bt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==Pt&&Ut(Pt)&&(Pt=null),At.forEach(Ft),Ot.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return Vt(t,e)}if(0<It.length){Vt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==Nt&&Vt(Nt,e),null!==Pt&&Vt(Pt,e),At.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var Kt=w.ReactCurrentBatchConfig,qt=!0;function Wt(e,t,n,r){var i=bt,s=Kt.transition;Kt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Kt.transition=s}}function Ht(e,t,n,r){var i=bt,s=Kt.transition;Kt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Kt.transition=s}}function Gt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,Jt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Lt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Lt(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,Lt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,Lt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&_t(s),null===(s=Qt(e,t,n,r))&&qr(e,t,r,Jt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Jt=null;function Qt(e,t,n,r){if(Jt=null,null!==(e=vi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ke(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=M({},cn,{view:0,detail:0}),dn=sn(hn),fn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},hn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(M({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function xn(){return Sn}var Tn=M({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=sn(Tn),Cn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Pn=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(An),Rn=[9,13,27,32],jn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Dn,Mn=u&&(!jn||Dn&&8<Dn&&11>=Dn),Un=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Jn(e){Ur(e,0)}function Qn(e){if(G(wi(e)))return e}function Xn(e,t){if("change"===e)return t}var Yn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Yn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Wn(t,Gn,e,_e(e)),Ae(Jn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function sr(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==J(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},Sr={};function xr(e){if(Er[e])return Er[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Tr=xr("animationend"),Ir=xr("animationiteration"),Cr=xr("animationstart"),Nr=xr("transitionend"),Pr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Pr.set(e,t),l(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var jr=Ar[Rr];Or(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Or(Tr,"onAnimationEnd"),Or(Ir,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Kr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Kr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function Kr(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=vi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Ae((function(){var r=s,i=_e(n),a=[];e:{var o=Pr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Tr:case Ir:case Cr:l=yn;break;case Nr:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Oe(p,d))&&u.push(Wr(p,m,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:wi(l),f=null==c?o:wi(c),(o=new u(m,p+"leave",l,n,i)).target=h,o.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Jr(a,o,l,u,!1),null!==c&&null!==h&&Jr(a,h,c,u,!0)}if("select"===(l=(o=r?wi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(qn(o))if(Yn)g=ar;else{g=ir;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?wi(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(a,n,i)}var v;if(jn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(v=en()):($t="value"in(Yt=i)?Yt.value:Yt.textContent,zn=!0)),0<(y=Hr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!jn&&Bn(e,t)?(e=en(),Zt=$t=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Ur(a,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Oe(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Jr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Oe(n,s))&&a.unshift(Wr(n,l,o)):i||null!=(l=Oe(n,s))&&a.push(Wr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var ki=[],Ei=-1;function Si(e){return{current:e}}function xi(e){0>Ei||(e.current=ki[Ei],ki[Ei]=null,Ei--)}function Ti(e,t){Ei++,ki[Ei]=e.current,e.current=t}var Ii={},Ci=Si(Ii),Ni=Si(!1),Pi=Ii;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){xi(Ni),xi(Ci)}function ji(e,t,n){if(Ci.current!==Ii)throw Error(s(168));Ti(Ci,t),Ti(Ni,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,K(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Pi=Ci.current,Ti(Ci,e),Ti(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Di(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,xi(Ni),xi(Ci),Ti(Ci,e)):xi(Ni),Ti(Ni,n)}var Ui=null,Fi=!1,Bi=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Bi&&null!==Ui){Bi=!0;var e=0,t=bt;try{var n=Ui;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,zi),i}finally{bt=t,Bi=!1}}return null}var Ki=[],qi=0,Wi=null,Hi=0,Gi=[],Ji=0,Qi=null,Xi=1,Yi="";function $i(e,t){Ki[qi++]=Hi,Ki[qi++]=Wi,Wi=e,Hi=t}function Zi(e,t,n){Gi[Ji++]=Xi,Gi[Ji++]=Yi,Gi[Ji++]=Qi,Qi=e;var r=Xi;e=Yi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Yi=s+e}else Xi=1<<s|n<<i|r,Yi=e}function es(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=Ki[--qi],Ki[qi]=null,Hi=Ki[--qi],Ki[qi]=null;for(;e===Qi;)Qi=Gi[--Ji],Gi[Ji]=null,Yi=Gi[--Ji],Gi[Ji]=null,Xi=Gi[--Ji],Gi[Ji]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Xi,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Si(null),vs=null,bs=null,ws=null;function _s(){ws=bs=vs=null}function ks(e){var t=ys.current;xi(ys),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ss(e,t){vs=e,ws=bs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function xs(e){var t=e._currentValue;if(ws!==e)if(e={context:e,memoizedValue:t,next:null},null===bs){if(null===vs)throw Error(s(308));bs=e,vs.dependencies={lanes:0,firstContext:e}}else bs=bs.next=e;return t}var Ts=null;function Is(e){null===Ts?Ts=[e]:Ts.push(e)}function Cs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Is(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ps=!1;function As(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function js(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Is(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ds(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ls(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ms(e,t,n,r){var i=e.updateQueue;Ps=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(a=0,u=c=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:Ps=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=a,e.lanes=a,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Fs=(new r.Component).refs;function Bs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vs={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Rs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=js(e,s,i))&&(rc(t,e,i,r),Ds(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Rs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=js(e,s,i))&&(rc(t,e,i,r),Ds(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Rs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=js(e,i,r))&&(rc(t,e,r,n),Ds(t,e,r))}};function zs(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function Ks(e,t,n){var r=!1,i=Ii,s=t.contextType;return"object"===typeof s&&null!==s?s=xs(s):(i=Oi(t)?Pi:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ii),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function qs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vs.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fs,As(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=xs(s):(s=Oi(t)?Pi:Ci.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Bs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Vs.enqueueReplaceState(i,i.state,null),Ms(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Hs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Fs&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Js(e){return(0,e._init)(e._payload)}function Qs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=jc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&Js(s)===t.type)?((r=i(t,n.props)).ref=Hs(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Hs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Hs(e,null,t),n.return=e,n;case k:return(t=Fc(t,e.mode,n)).return=e,t;case O:return d(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Gs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case k:return n.key===i?u(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:h(e,t,n,r,null);Gs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return h(t,e=e.get(n)||null,r,i,null);Gs(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,o[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=a(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===o.length)return n(i,h),is&&$i(i,m),c;if(null===h){for(;m<o.length;m++)null!==(h=d(i,o[m],l))&&(s=a(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&$i(i,m),c}for(h=r(i,h);m<o.length;m++)null!==(g=p(h,i,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&$i(i,m),c}function g(i,o,l,c){var u=D(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),o=a(b,o,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),is&&$i(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(o=a(v,o,g),null===h?u=v:h.sibling=v,h=v);return is&&$i(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&$i(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Js(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=Hs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===E?((s=Lc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Dc(a.type,a.key,a.props,null,r.mode,l)).ref=Hs(r,s,a),l.return=r,r=l)}return o(r);case k:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(a,r.mode,l)).return=r,r=s}return o(r);case O:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(D(a))return g(r,s,a,l);Gs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Uc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var Xs=Qs(!0),Ys=Qs(!1),$s={},Zs=Si($s),ea=Si($s),ta=Si($s);function na(e){if(e===$s)throw Error(s(174));return e}function ra(e,t){switch(Ti(ta,t),Ti(ea,e),Ti(Zs,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Zs),Ti(Zs,t)}function ia(){xi(Zs),xi(ea),xi(ta)}function sa(e){na(ta.current);var t=na(Zs.current),n=le(t,e.type);t!==n&&(Ti(ea,e),Ti(Zs,n))}function aa(e){ea.current===e&&(xi(Zs),xi(ea))}var oa=Si(0);function la(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function ua(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var ha=w.ReactCurrentDispatcher,da=w.ReactCurrentBatchConfig,fa=0,pa=null,ma=null,ga=null,ya=!1,va=!1,ba=0,wa=0;function _a(){throw Error(s(321))}function ka(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function Ea(e,t,n,r,i,a){if(fa=a,pa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=null===e||null===e.memoizedState?ao:oo,e=n(r,i),va){a=0;do{if(va=!1,ba=0,25<=a)throw Error(s(301));a+=1,ga=ma=null,t.updateQueue=null,ha.current=lo,e=n(r,i)}while(va)}if(ha.current=so,t=null!==ma&&null!==ma.next,fa=0,ga=ma=pa=null,ya=!1,t)throw Error(s(300));return e}function Sa(){var e=0!==ba;return ba=0,e}function xa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?pa.memoizedState=ga=e:ga=ga.next=e,ga}function Ta(){if(null===ma){var e=pa.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ga?pa.memoizedState:ga.next;if(null!==t)ga=t,ma=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ga?pa.memoizedState=ga=e:ga=ga.next=e}return ga}function Ia(e,t){return"function"===typeof t?t(e):t}function Ca(e){var t=Ta(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ma,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((fa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=r):c=c.next=d,pa.lanes|=h,Ml|=h}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,pa.lanes|=a,Ml|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Na(e){var t=Ta(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(wo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Pa(){}function Aa(e,t){var n=pa,r=Ta(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,wo=!0),r=r.queue,Ka(ja.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ga&&1&ga.memoizedState.tag){if(n.flags|=2048,Ua(9,Ra.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&fa)||Oa(n,t,i)}return i}function Oa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=pa.updateQueue)?(t={lastEffect:null,stores:null},pa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ra(e,t,n,r){t.value=n,t.getSnapshot=r,Da(t)&&La(e)}function ja(e,t,n){return n((function(){Da(t)&&La(e)}))}function Da(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function La(e){var t=Ns(e,1);null!==t&&rc(t,e,1,-1)}function Ma(e){var t=xa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,pa,e),[t.memoizedState,e]}function Ua(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=pa.updateQueue)?(t={lastEffect:null,stores:null},pa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fa(){return Ta().memoizedState}function Ba(e,t,n,r){var i=xa();pa.flags|=e,i.memoizedState=Ua(1|t,n,void 0,void 0===r?null:r)}function Va(e,t,n,r){var i=Ta();r=void 0===r?null:r;var s=void 0;if(null!==ma){var a=ma.memoizedState;if(s=a.destroy,null!==r&&ka(r,a.deps))return void(i.memoizedState=Ua(t,n,s,r))}pa.flags|=e,i.memoizedState=Ua(1|t,n,s,r)}function za(e,t){return Ba(8390656,8,e,t)}function Ka(e,t){return Va(2048,8,e,t)}function qa(e,t){return Va(4,2,e,t)}function Wa(e,t){return Va(4,4,e,t)}function Ha(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ga(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Va(4,4,Ha.bind(null,t,e),n)}function Ja(){}function Qa(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ka(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xa(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ka(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ya(e,t,n){return 0===(21&fa)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),pa.lanes|=n,Ml|=n,e.baseState=!0),t)}function $a(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=da.transition;da.transition={};try{e(!1),t()}finally{bt=n,da.transition=r}}function Za(){return Ta().memoizedState}function eo(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},no(e))ro(t,n);else if(null!==(n=Cs(e,t,n,r))){rc(n,e,r,tc()),io(n,t,r)}}function to(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(e))ro(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Is(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Cs(e,t,i,r))&&(rc(n,e,r,i=tc()),io(n,t,r))}}function no(e){var t=e.alternate;return e===pa||null!==t&&t===pa}function ro(e,t){va=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function io(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var so={readContext:xs,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useInsertionEffect:_a,useLayoutEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useMutableSource:_a,useSyncExternalStore:_a,useId:_a,unstable_isNewReconciler:!1},ao={readContext:xs,useCallback:function(e,t){return xa().memoizedState=[e,void 0===t?null:t],e},useContext:xs,useEffect:za,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ba(4194308,4,Ha.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ba(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ba(4,2,e,t)},useMemo:function(e,t){var n=xa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eo.bind(null,pa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xa().memoizedState=e},useState:Ma,useDebugValue:Ja,useDeferredValue:function(e){return xa().memoizedState=e},useTransition:function(){var e=Ma(!1),t=e[0];return e=$a.bind(null,e[1]),xa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=pa,i=xa();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!==(30&fa)||Oa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,za(ja.bind(null,r,a,e),[e]),r.flags|=2048,Ua(9,Ra.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=xa(),t=Pl.identifierPrefix;if(is){var n=Yi;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=ba++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:xs,useCallback:Qa,useContext:xs,useEffect:Ka,useImperativeHandle:Ga,useInsertionEffect:qa,useLayoutEffect:Wa,useMemo:Xa,useReducer:Ca,useRef:Fa,useState:function(){return Ca(Ia)},useDebugValue:Ja,useDeferredValue:function(e){return Ya(Ta(),ma.memoizedState,e)},useTransition:function(){return[Ca(Ia)[0],Ta().memoizedState]},useMutableSource:Pa,useSyncExternalStore:Aa,useId:Za,unstable_isNewReconciler:!1},lo={readContext:xs,useCallback:Qa,useContext:xs,useEffect:Ka,useImperativeHandle:Ga,useInsertionEffect:qa,useLayoutEffect:Wa,useMemo:Xa,useReducer:Na,useRef:Fa,useState:function(){return Na(Ia)},useDebugValue:Ja,useDeferredValue:function(e){var t=Ta();return null===ma?t.memoizedState=e:Ya(t,ma.memoizedState,e)},useTransition:function(){return[Na(Ia)[0],Ta().memoizedState]},useMutableSource:Pa,useSyncExternalStore:Aa,useId:Za,unstable_isNewReconciler:!1};function co(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Rs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=r),ho(0,t)},n}function mo(e,t,n){(n=Rs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Rs(-1,1)).tag=2,js(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bo=w.ReactCurrentOwner,wo=!1;function _o(e,t,n,r){t.child=null===e?Ys(t,null,n,r):Xs(t,e.child,n,r)}function ko(e,t,n,r,i){n=n.render;var s=t.ref;return Ss(t,i),r=Ea(e,t,n,r,s,i),n=Sa(),null===e||wo?(is&&n&&es(t),t.flags|=1,_o(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wo(e,t,i))}function Eo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,So(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Wo(e,t,i)}return t.flags|=1,(e=jc(s,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wo(e,t,i);0!==(131072&e.flags)&&(wo=!0)}}return Io(e,t,n,r,i)}function xo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(jl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(jl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(jl,Rl),Rl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(jl,Rl),Rl|=r;return _o(e,t,i,n),t.child}function To(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Io(e,t,n,r,i){var s=Oi(n)?Pi:Ci.current;return s=Ai(t,s),Ss(t,i),n=Ea(e,t,n,r,s,i),r=Sa(),null===e||wo?(is&&r&&es(t),t.flags|=1,_o(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wo(e,t,i))}function Co(e,t,n,r,i){if(Oi(n)){var s=!0;Li(t)}else s=!1;if(Ss(t,i),null===t.stateNode)qo(e,t),Ks(t,n,r),Ws(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=xs(c):c=Ai(t,c=Oi(n)?Pi:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&qs(t,a,r,c),Ps=!1;var d=t.memoizedState;a.state=d,Ms(t,r,a,i),l=t.memoizedState,o!==r||d!==l||Ni.current||Ps?("function"===typeof u&&(Bs(t,n,u,r),l=t.memoizedState),(o=Ps||zs(t,n,o,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Os(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:gs(t.type,o),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=xs(l):l=Ai(t,l=Oi(n)?Pi:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&qs(t,a,r,l),Ps=!1,d=t.memoizedState,a.state=d,Ms(t,r,a,i);var p=t.memoizedState;o!==h||d!==p||Ni.current||Ps?("function"===typeof f&&(Bs(t,n,f,r),p=t.memoizedState),(c=Ps||zs(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return No(e,t,n,r,s,i)}function No(e,t,n,r,i,s){To(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Mi(t,n,!1),Wo(e,t,s);r=t.stateNode,bo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Xs(t,e.child,null,s),t.child=Xs(t,null,o,s)):_o(e,t,o,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),ra(e,t.containerInfo)}function Ao(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_o(e,t,n,r),t.child}var Oo,Ro,jo,Do,Lo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uo(e,t,n){var r,i=t.pendingProps,a=oa.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ti(oa,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Mc(l,i,0,null),e=Lc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(n),t.memoizedState=Lo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Bo(e,t,o,r=uo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(a=Lc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Xs(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Lo,a);if(0===(1&t.mode))return Bo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Bo(e,t,o,r=uo(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=Pl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ns(e,i),rc(r,e,i,-1))}return gc(),Bo(e,t,o,r=uo(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Ji++]=Xi,Gi[Ji++]=Yi,Gi[Ji++]=Qi,Xi=e.id,Yi=e.overflow,Qi=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=jc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=jc(r,o):(o=Lc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Mo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,i}return e=(o=e.child).sibling,i=jc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bo(e,t,n,r){return null!==r&&ps(r),Xs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Es(e.return,t,n)}function zo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ko(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_o(e,t,r.children,n),0!==(2&(r=oa.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(oa,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===la(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===la(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zo(t,!0,n,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=jc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Jo(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Oi(t.type)&&Ri(),Go(t),null;case 3:return r=t.stateNode,ia(),xi(Ni),xi(Ci),ua(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Ro(e,t),Go(t),null;case 5:aa(t);var i=na(ta.current);if(n=t.type,null!==e&&null!=t.stateNode)jo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Go(t),null}if(e=na(Zs.current),hs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":ie(r,a),Fr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":H(r),Z(r,a,!0);break;case"textarea":H(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Oo(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":X(e,r),i=Q(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=na(ta.current),na(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Go(t),null;case 13:if(xi(oa),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,a=!1;else if(a=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),a=!1}else null!==ss&&(oc(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&oa.current)?0===Dl&&(Dl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return ia(),Ro(e,t),null===e&&zr(t.stateNode.containerInfo),Go(t),null;case 10:return ks(t.type._context),Go(t),null;case 19:if(xi(oa),null===(a=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ho(a,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=la(e))){for(t.flags|=128,Ho(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(oa,1&oa.current|2),t.child}e=e.sibling}null!==a.tail&&Ye()>Kl&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=la(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Go(t),null}else 2*Ye()-a.renderingStartTime>Kl&&1073741824!==n&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ye(),t.sibling=null,n=oa.current,Ti(oa,r?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qo(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ia(),xi(Ni),xi(Ci),ua(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return aa(t),null;case 13:if(xi(oa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(oa),null;case 4:return ia(),null;case 10:return ks(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Oo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},jo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,na(Zs.current);var s,a=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xo=!1,Yo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){xc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Yo||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tl(n,t,a),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Yo&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){xc(n,t,o)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,fl(e,t,n),Yo=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(a,o,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){xc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){xc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){xc(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){xc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Y(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,u)}switch(l){case"input":$(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){xc(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){xc(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){xc(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Ye())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(u=Yo)||h,gl(t,e),Yo=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Zo=e,h=e.child;null!==h;){for(d=Zo=h;null!==Zo;){switch(p=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){xc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){kl(d);continue}}null!==p?(p.return=f,Zo=p):kl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){xc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){xc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(s(161))}}catch(o){xc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Zo=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var i=Zo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Xo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Xo;var c=Yo;if(Xo=a,(Yo=l)&&!c)for(Zo=i;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?El(i):null!==l?(l.return=a,Zo=l):El(i);for(;null!==s;)Zo=s,wl(s,t,n),s=s.sibling;Zo=i,Xo=o,Yo=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Zo=s):_l(e)}}function _l(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Us(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Yo||512&t.flags&&sl(t)}catch(f){xc(t,t.return,f)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function kl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function El(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){xc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){xc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){xc(t,s,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){xc(t,a,l)}}}catch(l){xc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Sl,xl=Math.ceil,Tl=w.ReactCurrentDispatcher,Il=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,Nl=0,Pl=null,Al=null,Ol=0,Rl=0,jl=Si(0),Dl=0,Ll=null,Ml=0,Ul=0,Fl=0,Bl=null,Vl=null,zl=0,Kl=1/0,ql=null,Wl=!1,Hl=null,Gl=null,Jl=!1,Ql=null,Xl=0,Yl=0,$l=null,Zl=-1,ec=0;function tc(){return 0!==(6&Nl)?Ye():-1!==Zl?Zl:Zl=Ye()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Ol?Ol&-Ol:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<Yl)throw Yl=0,$l=null,Error(s(185));yt(e,n,r),0!==(2&Nl)&&e===Pl||(e===Pl&&(0===(2&Nl)&&(Ul|=n),4===Dl&&lc(e,Ol)),ic(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(Kl=Ye()+500,Fi&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=dt(e,e===Pl?Ol:0);if(0===r)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){Fi=!0,Vi(e)}(cc.bind(null,e)):Vi(cc.bind(null,e)),ai((function(){0===(6&Nl)&&zi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=dt(e,e===Pl?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Nl;Nl|=2;var a=mc();for(Pl===e&&Ol===t||(ql=null,Kl=Ye()+500,fc(e,t));;)try{bc();break}catch(l){pc(e,l)}_s(),Tl.current=a,Nl=i,null!==Al?t=0:(Pl=null,Ol=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ll,fc(e,0),lc(e,r),ic(e,Ye()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ac(e,a))),1===t))throw n=Ll,fc(e,0),lc(e,r),ic(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:kc(e,Vl,ql);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=zl+500-Ye())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(kc.bind(null,e,Vl,ql),t);break}kc(e,Vl,ql);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=ri(kc.bind(null,e,Vl,ql),r);break}kc(e,Vl,ql);break;default:throw Error(s(329))}}}return ic(e,Ye()),e.callbackNode===n?sc.bind(null,e):null}function ac(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Vl,Vl=n,null!==t&&oc(t)),e}function oc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function lc(e,t){for(t&=~Fl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nl))throw Error(s(327));Ec();var t=dt(e,0);if(0===(1&t))return ic(e,Ye()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ll,fc(e,0),lc(e,t),ic(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,Vl,ql),ic(e,Ye()),null}function uc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(Kl=Ye()+500,Fi&&zi())}}function hc(e){null!==Ql&&0===Ql.tag&&0===(6&Nl)&&Ec();var t=Nl;Nl|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(Nl=t))&&zi()}}function dc(){Rl=jl.current,xi(jl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:ia(),xi(Ni),xi(Ci),ua();break;case 5:aa(r);break;case 4:ia();break;case 13:case 19:xi(oa);break;case 10:ks(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Al=e=jc(e.current,null),Ol=Rl=t,Dl=0,Ll=null,Fl=Ul=Ml=0,Vl=Bl=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ts=null}return e}function pc(e,t){for(;;){var n=Al;try{if(_s(),ha.current=so,ya){for(var r=pa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ya=!1}if(fa=0,ga=ma=pa=null,va=!1,ba=0,Il.current=null,null===n||null===n.return){Dl=1,Ll=t,Al=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=yo(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&go(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){go(a,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=yo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vo(y,o,l,0,t),ps(co(c,l));break e}}a=c=co(c,l),4!==Dl&&(Dl=2),null===Bl?Bl=[a]:Bl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ls(a,po(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Ls(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}_c(n)}catch(w){t=w,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function mc(){var e=Tl.current;return Tl.current=so,null===e?so:e}function gc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Pl||0===(268435455&Ml)&&0===(268435455&Ul)||lc(Pl,Ol)}function yc(e,t){var n=Nl;Nl|=2;var r=mc();for(Pl===e&&Ol===t||(ql=null,fc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(_s(),Nl=n,Tl.current=r,null!==Al)throw Error(s(261));return Pl=null,Ol=0,Dl}function vc(){for(;null!==Al;)wc(Al)}function bc(){for(;null!==Al&&!Qe();)wc(Al)}function wc(e){var t=Sl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?_c(e):Al=t,Il.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Jo(n,t,Rl)))return void(Al=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Dl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Dl&&(Dl=5)}function kc(e,t,n){var r=bt,i=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Ql);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Pl&&(Al=Pl=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Pc(tt,(function(){return Ec(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=bt;bt=1;var l=Nl;Nl|=4,Il.current=null,function(e,t){if(ei=qt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(_){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=o+i),d!==a||0!==r&&3!==d.nodeType||(c=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++h===r&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(_){xc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}m=nl,nl=!1}(e,n),yl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Xe(),Nl=l,bt=o,Cl.transition=a}else e.current=n;if(Jl&&(Jl=!1,Ql=e,Xl=i),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&Xl)&&0!==e.tag&&Ec(),a=e.pendingLanes,0!==(1&a)?e===$l?Yl++:(Yl=0,$l=e):Yl=0,zi()}(e,t,n,r)}finally{Cl.transition=i,bt=r}return null}function Ec(){if(null!==Ql){var e=wt(Xl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Xl=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var h=Zo;switch(h.tag){case 0:case 11:case 15:rl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Zo=d;else for(;null!==Zo;){var f=(h=Zo).sibling,p=h.return;if(al(h),h===u){Zo=null;break}if(null!==f){f.return=p,Zo=f;break}Zo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zo=v;break e}Zo=a.return}}var b=e.current;for(Zo=b;null!==Zo;){var w=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Zo=w;else e:for(o=b;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(k){xc(l,l.return,k)}if(l===o){Zo=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Zo=_;break e}Zo=l.return}}if(Nl=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function Sc(e,t,n){e=js(e,t=po(0,t=co(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function xc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=js(t,e=mo(t,e=co(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Ol&n)===n&&(4===Dl||3===Dl&&(130023424&Ol)===Ol&&500>Ye()-zl?fc(e,0):Fl|=n),ic(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ns(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ic(e,n)}function Pc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Rc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case E:return Lc(n.children,i,a,t);case S:o=8,i|=8;break;case x:return(e=Oc(12,n,t,2|i)).elementType=x,e.lanes=a,e;case N:return(e=Oc(13,n,t,i)).elementType=N,e.lanes=a,e;case P:return(e=Oc(19,n,t,i)).elementType=P,e.lanes=a,e;case R:return Mc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:o=10;break e;case I:o=9;break e;case C:o=11;break e;case A:o=14;break e;case O:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Oc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,a,o,l){return e=new Bc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Oc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},As(s),e}function zc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Di(e,n,t)}return t}function Kc(e,t,n,r,i,s,a,o,l){return(e=Vc(n,r,!0,e,0,s,0,o,l)).context=zc(null),n=e.current,(s=Rs(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,js(n,s,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function qc(e,t,n,r){var i=t.current,s=tc(),a=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Rs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=js(i,t,a))&&(rc(e,i,a,s),Ds(e,i,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),fs();break;case 5:sa(t);break;case 1:Oi(t.type)&&Li(t);break;case 4:ra(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(oa,1&oa.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uo(e,t,n):(Ti(oa,1&oa.current),null!==(e=Wo(e,t,n))?e.sibling:null);Ti(oa,1&oa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ko(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(oa,oa.current),r)break;return null;case 22:case 23:return t.lanes=0,xo(e,t,n)}return Wo(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Ss(t,n),i=Ea(null,t,r,e,i,n);var a=Sa();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,As(t),i.updater=Vs,t.stateNode=i,i._reactInternals=t,Ws(t,r,e,n),t=No(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),_o(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Io(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=ko(null,t,r,e,n);break e;case 14:t=Eo(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Io(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Po(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Os(e,t),Ms(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ao(e,t,r,n,i=co(Error(s(423)),t));break e}if(r!==i){t=Ao(e,t,r,n,i=co(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Ys(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wo(e,t,n);break e}_o(e,t,r,n)}t=t.child}return t;case 5:return sa(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),To(e,t),_o(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Uo(e,t,n);case 4:return ra(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xs(t,null,r,n):_o(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ko(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _o(e,t,t.pendingProps,n),t.child;case 8:case 12:return _o(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ti(ys,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ni.current){t=Wo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Rs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Es(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Es(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}_o(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ss(t,n),r=r(i=xs(i)),t.flags|=1,_o(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Eo(e,t,r,i=gs(r.type,i),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),qo(e,t),t.tag=1,Oi(r)?(e=!0,Li(t)):e=!1,Ss(t,n),Ks(t,r,i),Ws(t,r,i,n),No(null,t,r,!0,e,n);case 19:return Ko(e,t,n);case 22:return xo(e,t,n)}throw Error(s(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Wc(a);o.call(e)}}qc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wc(a);s.call(e)}}var a=Kc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[pi]=a.current,zr(8===e.nodeType?e.parentNode:e),hc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),hc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(a)}Xc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Xc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){qc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Ye()),0===(6&Nl)&&(Kl=Ye()+500,zi()))}break;case 13:hc((function(){var t=Ns(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},kt=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=Ns(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},St=function(){return bt},xt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));G(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,Ne=hc;var tu={usingClientEntryPoint:!1,Events:[bi,wi,_i,Te,Ie,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",i=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Kc(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},352:(e,t,n)=>{var r=n(119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},119:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(345)},654:(e,t,n)=>{var r=n(950),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},49:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,k=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+C(l,0):s,_(a)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),N(a,t,i,"",(function(e){return e}))):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+C(o=e[c],c);l+=N(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=N(o=o.value,t,i,u=s+C(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},j={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:E};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},950:(e,t,n)=>{e.exports=n(49)},414:(e,t,n)=>{e.exports=n(654)},761:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,R(k);else{var t=r(u);null!==t&&j(_,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&j(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,x=null,T=-1,I=5,C=-1;function N(){return!(t.unstable_now()-C<I)}function P(){if(null!==x){var e=t.unstable_now();C=e;var n=!0;try{n=x(!0,e)}finally{n?E():(S=!1,x=null)}}else S=!1}if("function"===typeof b)E=function(){b(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=P,E=function(){O.postMessage(null)}}else E=function(){y(P,0)};function R(e){x=e,S||(S=!0,E())}function j(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,j(_,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,R(k))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},340:(e,t,n)=>{e.exports=n(761)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{206:"c8db8691",437:"fe8b5c4d"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="snookerlive:";n.l=(r,i,s,a)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[i];var d=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/live1/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,a=r[0],o=r[1],l=r[2],c=0;if(a.some((t=>0!==e[t]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunksnookerlive=self.webpackChunksnookerlive||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{var e=n(950),t=n(352);const r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,i=Object.keys,s=Array.isArray;function a(e,t){return"object"!=typeof t||i(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||r.Promise||(r.Promise=Promise);const o=Object.getPrototypeOf,l={}.hasOwnProperty;function c(e,t){return l.call(e,t)}function u(e,t){"function"==typeof t&&(t=t(o(e))),("undefined"==typeof Reflect?i:Reflect.ownKeys)(t).forEach((n=>{d(e,n,t[n])}))}const h=Object.defineProperty;function d(e,t,n,r){h(e,t,a(n&&c(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),d(e.prototype,"constructor",e),{extend:u.bind(null,e.prototype)}}}}const p=Object.getOwnPropertyDescriptor;function m(e,t){let n;return p(e,t)||(n=o(e))&&m(n,t)}const g=[].slice;function y(e,t,n){return g.call(e,t,n)}function v(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function w(e){r.setImmediate?setImmediate(e):setTimeout(e,0)}function _(e,t){return e.reduce(((e,n,r)=>{var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function k(e,t){if("string"==typeof t&&c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var s=k(e,t[r]);n.push(s)}return n}var a=t.indexOf(".");if(-1!==a){var o=e[t.substr(0,a)];return void 0===o?void 0:k(o,t.substr(a+1))}}function E(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)E(e,t[r],n[r])}else{var a=t.indexOf(".");if(-1!==a){var o=t.substr(0,a),l=t.substr(a+1);if(""===l)void 0===n?s(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var u=e[o];u&&c(e,o)||(u=e[o]={}),E(u,l,n)}}else void 0===n?s(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function S(e){var t={};for(var n in e)c(e,n)&&(t[n]=e[n]);return t}const x=[].concat;function T(e){return x.apply([],e)}const I="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(T([8,16,32,64].map((e=>["Int","Uint","Float"].map((t=>t+e+"Array")))))).filter((e=>r[e])),C=I.map((e=>r[e]));_(I,(e=>[e,!0]));let N=null;function P(e){N="undefined"!=typeof WeakMap&&new WeakMap;const t=A(e);return N=null,t}function A(e){if(!e||"object"!=typeof e)return e;let t=N&&N.get(e);if(t)return t;if(s(e)){t=[],N&&N.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(A(e[n]))}else if(C.indexOf(e.constructor)>=0)t=e;else{const n=o(e);for(var i in t=n===Object.prototype?{}:Object.create(n),N&&N.set(e,t),e)c(e,i)&&(t[i]=A(e[i]))}return t}const{toString:O}={};function R(e){return O.call(e).slice(8,-1)}const j="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",D="symbol"==typeof j?function(e){var t;return null!=e&&(t=e[j])&&t.apply(e)}:function(){return null},L={};function M(e){var t,n,r,i;if(1===arguments.length){if(s(e))return e.slice();if(this===L&&"string"==typeof e)return[e];if(i=D(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const U="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var F="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function B(e,t){F=e,V=t}var V=()=>!0;const z=!new Error("").stack;function K(){if(z)try{throw K.arguments,new Error}catch(r){return r}return new Error}function q(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(V).map((e=>"\n"+e)).join("")):""}var W=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],H=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(W),G={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function J(e,t){this._e=K(),this.name=e,this.message=t}function Q(e,t){return e+". Errors: "+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join("\n")}function X(e,t,n,r){this._e=K(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Q(e,t)}function Y(e,t){this._e=K(),this.name="BulkError",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=Q(e,t)}f(J).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+q(this._e,2))}},toString:function(){return this.name+": "+this.message}}),f(X).from(J),f(Y).from(J);var $=H.reduce(((e,t)=>(e[t]=t+"Error",e)),{});const Z=J;var ee=H.reduce(((e,t)=>{var n=t+"Error";function r(e,r){this._e=K(),this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=G[t]||n,this.inner=null)}return f(r).from(Z),e[t]=r,e}),{});ee.Syntax=SyntaxError,ee.Type=TypeError,ee.Range=RangeError;var te=W.reduce(((e,t)=>(e[t+"Error"]=ee[t],e)),{}),ne=H.reduce(((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=ee[t]),e)),{});function re(){}function ie(e){return e}function se(e,t){return null==e||e===ie?t:function(n){return t(e(n))}}function ae(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function oe(e,t){return e===re?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ae(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ae(i,this.onerror):i),void 0!==s?s:n}}function le(e,t){return e===re?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ae(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ae(r,this.onerror):r)}}function ce(e,t){return e===re?t:function(n){var r=e.apply(this,arguments);a(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ae(i,this.onsuccess):i),s&&(this.onerror=this.onerror?ae(s,this.onerror):s),void 0===r?void 0===o?void 0:o:a(r,o)}}function ue(e,t){return e===re?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function he(e,t){return e===re?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then((function(){return t.apply(r,s)}))}return t.apply(this,arguments)}}ne.ModifyError=X,ne.DexieError=J,ne.BulkError=Y;var de={};const fe=100,[pe,me,ge]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,o(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,o(t),e]})(),ye=me&&me.then,ve=pe&&pe.constructor,be=!!ge;var we=!1,_e=ge?()=>{ge.then(qe)}:r.setImmediate?setImmediate.bind(null,qe):r.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver((()=>{qe(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(qe,0)},ke=function(e,t){Ae.push([e,t]),Se&&(_e(),Se=!1)},Ee=!0,Se=!0,xe=[],Te=[],Ie=null,Ce=ie,Ne={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:mt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{mt(e[0],e[1])}catch(e){}}))}},Pe=Ne,Ae=[],Oe=0,Re=[];function je(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=re,this._lib=!1;var t=this._PSD=Pe;if(F&&(this._stackHolder=K(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==de)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ue(this,this._value))}this._state=null,this._value=null,++t.ref,Me(this,e)}const De={get:function(){var e=Pe,t=et;function n(n,r){var i=!e.global&&(e!==Pe||t!==et);const s=i&&!it();var a=new je(((t,a)=>{Be(this,new Le(dt(n,e,i,s),dt(r,e,i,s),t,a,e))}));return F&&Ke(a,this),a}return n.prototype=de,n},set:function(e){d(this,"then",e&&e.prototype===de?De:{get:function(){return e},set:De.set})}};function Le(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Me(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&We();t&&"function"==typeof t.then?Me(e,((e,n)=>{t instanceof je?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Fe(e)),n&&He()}}),Ue.bind(null,e))}catch(t){Ue(e,t)}}function Ue(e,t){if(Te.push(t),null===e._state){var n=e._lib&&We();t=Ce(t),e._state=!1,e._value=t,F&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,void 0)}catch(e){}}((()=>{var n=m(t,"stack");t._promise=e,d(t,"stack",{get:()=>we?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){xe.some((t=>t._value===e._value))||xe.push(e)}(e),Fe(e),n&&He()}}function Fe(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Be(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===Oe&&(++Oe,ke((()=>{0==--Oe&&Ge()}),[]))}function Be(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Oe,ke(Ve,[n,e,t])}else e._listeners.push(t)}function Ve(e,t,n){try{Ie=t;var r,i=t._value;t._state?r=e(i):(Te.length&&(Te=[]),r=e(i),-1===Te.indexOf(i)&&function(e){for(var t=xe.length;t;)if(xe[--t]._value===e._value)return void xe.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Ie=null,0==--Oe&&Ge(),--n.psd.ref||n.psd.finalize()}}function ze(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,s,a=e._value;null!=a?(i=a.name||"Error",s=a.message||a,r=q(a,0)):(i=a,s=""),t.push(i+(s?": "+s:"")+r)}return F&&((r=q(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&ze(e._prev,t,n)),t}function Ke(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function qe(){We()&&He()}function We(){var e=Ee;return Ee=!1,Se=!1,e}function He(){var e,t,n;do{for(;Ae.length>0;)for(e=Ae,Ae=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Ae.length>0);Ee=!0,Se=!0}function Ge(){var e=xe;xe=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Re.slice(0),n=t.length;n;)t[--n]()}function Je(e){return new je(de,!1,e)}function Qe(e,t){var n=Pe;return function(){var r=We(),i=Pe;try{return lt(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{lt(i,!1),r&&He()}}}u(je.prototype,{then:De,_then:function(e,t){Be(this,new Le(null,null,e,t,Pe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(e=>e instanceof t?n(e):Je(e))):this.then(null,(e=>e&&e.name===t?n(e):Je(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),Je(t))))},stack:{get:function(){if(this._stack)return this._stack;try{we=!0;var e=ze(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{we=!1}}},timeout:function(e,t){return e<1/0?new je(((n,r)=>{var i=setTimeout((()=>r(new ee.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&d(je.prototype,Symbol.toStringTag,"Dexie.Promise"),Ne.env=ct(),u(je,{all:function(){var e=M.apply(null,arguments).map(st);return new je((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((i,s)=>je.resolve(i).then((n=>{e[s]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof je)return e;if(e&&"function"==typeof e.then)return new je(((t,n)=>{e.then(t,n)}));var t=new je(de,!0,e);return Ke(t,Ie),t},reject:Je,race:function(){var e=M.apply(null,arguments).map(st);return new je(((t,n)=>{e.map((e=>je.resolve(e).then(t,n)))}))},PSD:{get:()=>Pe,set:e=>Pe=e},totalEchoes:{get:()=>et},newPSD:nt,usePSD:ut,scheduler:{get:()=>ke,set:e=>{ke=e}},rejectionMapper:{get:()=>Ce,set:e=>{Ce=e}},follow:(e,t)=>new je(((n,r)=>nt(((t,n)=>{var r=Pe;r.unhandleds=[],r.onunhandled=n,r.finalize=ae((function(){!function(e){Re.push((function t(){e(),Re.splice(Re.indexOf(t),1)})),++Oe,ke((()=>{0==--Oe&&Ge()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),r.finalize),e()}),t,n,r)))}),ve&&(ve.allSettled&&d(je,"allSettled",(function(){const e=M.apply(null,arguments).map(st);return new je((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,i)=>je.resolve(e).then((e=>r[i]={status:"fulfilled",value:e}),(e=>r[i]={status:"rejected",reason:e})).then((()=>--n||t(r)))))}))})),ve.any&&"undefined"!=typeof AggregateError&&d(je,"any",(function(){const e=M.apply(null,arguments).map(st);return new je(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach(((e,s)=>je.resolve(e).then((e=>t(e)),(e=>{i[s]=e,--r||n(new AggregateError(i))}))))}))})));const Xe={awaits:0,echoes:0,id:0};var Ye=0,$e=[],Ze=0,et=0,tt=0;function nt(e,t,n,r){var i=Pe,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++tt;var o=Ne.env;s.env=be?{Promise:je,PromiseProp:{value:je,configurable:!0,writable:!0},all:je.all,race:je.race,allSettled:je.allSettled,any:je.any,resolve:je.resolve,reject:je.reject,nthen:ft(o.nthen,s),gthen:ft(o.gthen,s)}:{},t&&a(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=ut(s,e,n,r);return 0===s.ref&&s.finalize(),l}function rt(){return Xe.id||(Xe.id=++Ye),++Xe.awaits,Xe.echoes+=fe,Xe.id}function it(){return!!Xe.awaits&&(0==--Xe.awaits&&(Xe.id=0),Xe.echoes=Xe.awaits*fe,!0)}function st(e){return Xe.echoes&&e&&e.constructor===ve?(rt(),e.then((e=>(it(),e)),(e=>(it(),gt(e))))):e}function at(e){++et,Xe.echoes&&0!=--Xe.echoes||(Xe.echoes=Xe.id=0),$e.push(Pe),lt(e,!0)}function ot(){var e=$e[$e.length-1];$e.pop(),lt(e,!1)}function lt(e,t){var n=Pe;if((t?!Xe.echoes||Ze++&&e===Pe:!Ze||--Ze&&e===Pe)||ht(t?at.bind(null,e):ot),e!==Pe&&(Pe=e,n===Ne&&(Ne.env=ct()),be)){var i=Ne.env.Promise,s=e.env;me.then=s.nthen,i.prototype.then=s.gthen,(n.global||e.global)&&(Object.defineProperty(r,"Promise",s.PromiseProp),i.all=s.all,i.race=s.race,i.resolve=s.resolve,i.reject=s.reject,s.allSettled&&(i.allSettled=s.allSettled),s.any&&(i.any=s.any))}}function ct(){var e=r.Promise;return be?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:me.then,gthen:e.prototype.then}:{}}function ut(e,t,n,r,i){var s=Pe;try{return lt(e,!0),t(n,r,i)}finally{lt(s,!1)}}function ht(e){ye.call(pe,e)}function dt(e,t,n,r){return"function"!=typeof e?e:function(){var i=Pe;n&&rt(),lt(t,!0);try{return e.apply(this,arguments)}finally{lt(i,!1),r&&ht(it)}}}function ft(e,t){return function(n,r){return e.call(this,dt(n,t),dt(r,t))}}-1===(""+ye).indexOf("[native code]")&&(rt=it=re);const pt="unhandledrejection";function mt(e,t){var n;try{n=t.onuncatched(e)}catch(r){}if(!1!==n)try{var i,s={promise:t,reason:e};if(r.document&&document.createEvent?((i=document.createEvent("Event")).initEvent(pt,!0,!0),a(i,s)):r.CustomEvent&&a(i=new CustomEvent(pt,{detail:s}),s),i&&r.dispatchEvent&&(dispatchEvent(i),!r.PromiseRejectionEvent&&r.onunhandledrejection))try{r.onunhandledrejection(i)}catch(r){}F&&i&&!i.defaultPrevented&&console.warn("Unhandled rejection: ".concat(e.stack||e))}catch(r){}}var gt=je.reject;function yt(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Pe.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===$.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>yt(e,t,n,r)))):gt(i)}return i._promise(t,((e,t)=>nt((()=>(Pe.trans=i,r(e,t,i)))))).then((e=>i._completion.then((()=>e))))}if(e._state.openComplete)return gt(new ee.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return gt(new ee.DatabaseClosed);e.open().catch(re)}return e._state.dbReadyPromise.then((()=>yt(e,t,n,r)))}const vt="3.2.5",bt=String.fromCharCode(65535),wt=-1/0,_t="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",kt="String expected.",Et=[],St="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),xt=St,Tt=St,It=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),Ct="__dbnames",Nt="readonly",Pt="readwrite";function At(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const Ot={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Rt(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=P(t))[e],t)}class jt{_trans(e,t,n){const r=this._tx||Pe.trans,i=this.name;function s(e,n,r){if(!r.schema[i])throw new ee.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}const a=We();try{return r&&r.db===this.db?r===Pe.trans?r._promise(e,s,n):nt((()=>r._promise(e,s,n)),{trans:r,transless:Pe.transless||Pe}):yt(this.db,e,[this.name],s)}finally{a&&He()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(s(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));const t=i(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter((e=>{if(e.compound&&t.every((t=>e.keyPath.indexOf(t)>=0))){for(let n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1})).sort(((e,t)=>e.keyPath.length-t.keyPath.length))[0];if(n&&this.db._maxKey!==bt){const r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map((t=>e[t])))}!n&&F&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit of a compound index [").concat(t.join("+"),"]"));const{idxByName:r}=this.schema,a=this.db._deps.indexedDB;function o(e,t){try{return 0===a.cmp(e,t)}catch(e){return!1}}const[l,c]=t.reduce(((t,n)=>{let[i,a]=t;const l=r[n],c=e[n];return[i||l,i||!l?At(a,l&&l.multi?e=>{const t=k(e,n);return s(t)&&t.some((e=>o(c,e)))}:e=>o(c,k(e,n))):a]}),[null,null]);return l?this.where(l.name).equals(e[l.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,s(e)?"[".concat(e.join("+"),"]"):e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var r in t)if(c(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass((function(e){a(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let i=e;return r&&n&&(i=Rt(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[i]}))).then((e=>e.numFailures?je.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{E(e,r,t)}catch(e){}return t}))}update(e,t){if("object"!=typeof e||s(e))return this.where(":id").equals(e).modify(t);{const n=k(e,this.schema.primKey.keyPath);if(void 0===n)return gt(new ee.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?i(t).forEach((n=>{E(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let i=e;return r&&n&&(i=Rt(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"put",values:[i],keys:null!=t?[t]:null}))).then((e=>e.numFailures?je.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{E(e,r,t)}catch(e){}return t}))}delete(e){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:[e]}))).then((e=>e.numFailures?je.reject(e.failures[0]):void 0))}clear(){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"deleteRange",range:Ot}))).then((e=>e.numFailures?je.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans("readonly",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,i=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:s}=this.schema.primKey;if(s&&r)throw new ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const a=e.length;let o=s&&n?e.map(Rt(s)):e;return this.core.mutate({trans:t,type:"add",keys:r,values:o,wantResults:i}).then((e=>{let{numFailures:t,results:n,lastResult:r,failures:s}=e;if(0===t)return i?n:r;throw new Y("".concat(this.name,".bulkAdd(): ").concat(t," of ").concat(a," operations failed"),s)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,i=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:s}=this.schema.primKey;if(s&&r)throw new ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const a=e.length;let o=s&&n?e.map(Rt(s)):e;return this.core.mutate({trans:t,type:"put",keys:r,values:o,wantResults:i}).then((e=>{let{numFailures:t,results:n,lastResult:r,failures:s}=e;if(0===t)return i?n:r;throw new Y("".concat(this.name,".bulkPut(): ").concat(t," of ").concat(a," operations failed"),s)}))}))}bulkDelete(e){const t=e.length;return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:e}))).then((e=>{let{numFailures:n,lastResult:r,failures:i}=e;if(0===n)return r;throw new Y("".concat(this.name,".bulkDelete(): ").concat(n," of ").concat(t," operations failed"),i)}))}}function Dt(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,s=new Array(i-1);--i;)s[i-1]=arguments[i];return t[n].subscribe.apply(null,s),e}if("string"==typeof n)return t[n]};n.addEventType=o;for(var r=1,a=arguments.length;r<a;++r)o(arguments[r]);return n;function o(e,r,a){if("object"!=typeof e){var l;r||(r=ue),a||(a=re);var c={subscribers:[],fire:a,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=r(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter((function(t){return t!==e})),c.fire=c.subscribers.reduce(r,a)}};return t[e]=n[e]=c,c}i(l=e).forEach((function(e){var t=l[e];if(s(t))o(e,l[e][0],l[e][1]);else{if("asap"!==t)throw new ee.InvalidArgument("Invalid event config");var n=o(e,ie,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){w((function(){e.apply(null,t)}))}))}))}}))}}function Lt(e,t){return f(t).from({prototype:e}),t}function Mt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ut(e,t){e.filter=At(e.filter,t)}function Ft(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>At(r(),t()):t,e.justLimit=n&&!r}function Bt(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new ee.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Vt(e,t,n){const r=Bt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function zt(e,t,n,r){const i=e.replayFilter?At(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},a=(e,n,r)=>{if(!i||i(n,r,(e=>n.stop(e)),(e=>n.fail(e)))){var a=n.primaryKey,o=""+a;"[object ArrayBuffer]"===o&&(o=""+new Uint8Array(a)),c(s,o)||(s[o]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),Kt(Vt(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return Kt(Vt(e,r,n),At(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Kt(e,t,n,r){var i=Qe(r?(e,t,i)=>n(r(e),t,i):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=re}),(t=>{e.fail(t),n=re}))||i(e.value,e,(e=>n=e)),n()}))}))}function qt(e,t){try{const n=Wt(e),r=Wt(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const n=e.length,r=t.length,i=n<r?n:r;for(let s=0;s<i;++s)if(e[s]!==t[s])return e[s]<t[s]?-1:1;return n===r?0:n<r?-1:1}(Ht(e),Ht(t));case"Array":return function(e,t){const n=e.length,r=t.length,i=n<r?n:r;for(let s=0;s<i;++s){const n=qt(e[s],t[s]);if(0!==n)return n}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function Wt(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const n=R(e);return"ArrayBuffer"===n?"binary":n}function Ht(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Gt{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,gt.bind(null,n.error)):n.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,gt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=At(t.algorithm,e)}_iterate(e,t){return zt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&a(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>zt(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(Mt(t,!0))return n.count({trans:e,query:{index:Bt(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return zt(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(".").reverse(),r=n[0],i=n.length-1;function s(e,t){return t?s(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function o(e,t){var n=s(e,i),r=s(t,i);return n<r?-a:n>r?a:0}return this.toArray((function(e){return e.sort(o)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if("next"===t.dir&&Mt(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=Bt(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((e=>{let{result:t}=e;return n?t.map(n):t}))}{const n=[];return zt(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Mt(t)?Ft(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):Ft(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ft(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}until(e,t){return Ut(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return Ut(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=At(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&Mt(t,!0)&&t.limit>0)return this._read((e=>{var n=Bt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((e=>{let{result:t}=e;return t})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ut(this._ctx,(function(e){var t=e.primaryKey.toString(),r=c(n,t);return n[t]=!0,!r})),this}modify(e){var t=this._ctx;return this._write((n=>{var r;if("function"==typeof e)r=e;else{var s=i(e),a=s.length;r=function(t){for(var n=!1,r=0;r<a;++r){var i=s[r],o=e[i];k(t,i)!==o&&(E(t,i,o),n=!0)}return n}}const o=t.table.core,{outbound:l,extractKey:c}=o.schema.primaryKey,u=this.db._options.modifyChunkSize||200,h=[];let d=0;const f=[],p=(e,t)=>{const{failures:n,numFailures:r}=t;d+=e-r;for(let s of i(n))h.push(n[s])};return this.clone().primaryKeys().then((i=>{const s=a=>{const h=Math.min(u,i.length-a);return o.getMany({trans:n,keys:i.slice(a,a+h),cache:"immutable"}).then((d=>{const f=[],m=[],g=l?[]:null,y=[];for(let e=0;e<h;++e){const t=d[e],n={value:P(t),primKey:i[a+e]};!1!==r.call(n,n.value,n)&&(null==n.value?y.push(i[a+e]):l||0===qt(c(t),c(n.value))?(m.push(n.value),l&&g.push(i[a+e])):(y.push(i[a+e]),f.push(n.value)))}const v=Mt(t)&&t.limit===1/0&&("function"!=typeof e||e===Jt)&&{index:t.index,range:t.range};return Promise.resolve(f.length>0&&o.mutate({trans:n,type:"add",values:f}).then((e=>{for(let t in e.failures)y.splice(parseInt(t),1);p(f.length,e)}))).then((()=>(m.length>0||v&&"object"==typeof e)&&o.mutate({trans:n,type:"put",keys:g,values:m,criteria:v,changeSpec:"function"!=typeof e&&e}).then((e=>p(m.length,e))))).then((()=>(y.length>0||v&&e===Jt)&&o.mutate({trans:n,type:"delete",keys:y,criteria:v}).then((e=>p(y.length,e))))).then((()=>i.length>a+h&&s(a+u)))}))};return s(0).then((()=>{if(h.length>0)throw new X("Error modifying one or more objects",h,d,f);return i.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Mt(e)&&(e.isPrimKey&&!Tt||3===t.type)?this._write((n=>{const{primaryKey:r}=e.table.core.schema,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((t=>e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((e=>{let{failures:n,lastResult:r,results:i,numFailures:s}=e;if(s)throw new X("Could not delete some values",Object.keys(n).map((e=>n[e])),t-s);return t-s}))))})):this.modify(Jt)}}const Jt=(e,t)=>t.value=null;function Qt(e,t){return e<t?-1:e===t?0:1}function Xt(e,t){return e>t?-1:e===t?0:1}function Yt(e,t,n){var r=e instanceof rn?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function $t(e){return new e.Collection(e,(()=>nn(""))).limit(0)}function Zt(e,t,n,r,i,s){for(var a=Math.min(e.length,r.length),o=-1,l=0;l<a;++l){var c=t[l];if(c!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):o>=0?e.substr(0,o)+t[o]+n.substr(o+1):null;i(e[l],c)<0&&(o=l)}return a<r.length&&"next"===s?e+n.substr(e.length):a<e.length&&"prev"===s?e.substr(0,n.length):o<0?null:e.substr(0,o)+r[o]+n.substr(o+1)}function en(e,t,n,r){var i,s,a,o,l,c,u,h=n.length;if(!n.every((e=>"string"==typeof e)))return Yt(e,kt);function d(e){i=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),s=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),a="next"===e?Qt:Xt;var t=n.map((function(e){return{lower:s(e),upper:i(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));o=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),c=e,u="next"===e?"":r}d("next");var f=new e.Collection(e,(()=>tn(o[0],l[h-1]+r)));f._ondirectionchange=function(e){d(e)};var p=0;return f._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var d=s(i);if(t(d,l,p))return!0;for(var f=null,m=p;m<h;++m){var g=Zt(i,d,o[m],l[m],a,c);null===g&&null===f?p=m+1:(null===f||a(f,g)>0)&&(f=g)}return n(null!==f?function(){e.continue(f+u)}:r),!1})),f}function tn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function nn(e){return{type:1,lower:e,upper:e}}class rn{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?$t(this):new this.Collection(this,(()=>tn(e,t,!n,!r)))}catch(e){return Yt(this,_t)}}equals(e){return null==e?Yt(this,_t):new this.Collection(this,(()=>nn(e)))}above(e){return null==e?Yt(this,_t):new this.Collection(this,(()=>tn(e,void 0,!0)))}aboveOrEqual(e){return null==e?Yt(this,_t):new this.Collection(this,(()=>tn(e,void 0,!1)))}below(e){return null==e?Yt(this,_t):new this.Collection(this,(()=>tn(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?Yt(this,_t):new this.Collection(this,(()=>tn(void 0,e)))}startsWith(e){return"string"!=typeof e?Yt(this,kt):this.between(e,e+bt,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):en(this,((e,t)=>0===e.indexOf(t[0])),[e],bt)}equalsIgnoreCase(e){return en(this,((e,t)=>e===t[0]),[e],"")}anyOfIgnoreCase(){var e=M.apply(L,arguments);return 0===e.length?$t(this):en(this,((e,t)=>-1!==t.indexOf(e)),e,"")}startsWithAnyOfIgnoreCase(){var e=M.apply(L,arguments);return 0===e.length?$t(this):en(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,bt)}anyOf(){const e=M.apply(L,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return Yt(this,_t)}if(0===e.length)return $t(this);const n=new this.Collection(this,(()=>tn(e[0],e[e.length-1])));n._ondirectionchange=n=>{t="next"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,i,s)=>{const a=n.key;for(;t(a,e[r])>0;)if(++r,r===e.length)return i(s),!1;return 0===t(a,e[r])||(i((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[wt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=M.apply(L,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Yt(this,_t)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[wt,t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,i=this._descending,s=this._min,a=this._max;if(0===e.length)return $t(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return Yt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ee.InvalidArgument);const o=!t||!1!==t.includeLowers,l=t&&!0===t.includeUppers;let c,u=r;function h(e,t){return u(e[0],t[0])}try{c=e.reduce((function(e,t){let r=0,i=e.length;for(;r<i;++r){const i=e[r];if(n(t[0],i[1])<0&&n(t[1],i[0])>0){i[0]=s(i[0],t[0]),i[1]=a(i[1],t[1]);break}}return r===i&&e.push(t),e}),[]),c.sort(h)}catch(e){return Yt(this,_t)}let d=0;const f=l?e=>r(e,c[d][1])>0:e=>r(e,c[d][1])>=0,p=o?e=>i(e,c[d][0])>0:e=>i(e,c[d][0])>=0;let m=f;const g=new this.Collection(this,(()=>tn(c[0][0],c[c.length-1][1],!o,!l)));return g._ondirectionchange=e=>{"next"===e?(m=f,u=r):(m=p,u=i),c.sort(h)},g._addAlgorithm(((e,t,n)=>{for(var i=e.key;m(i);)if(++d,d===c.length)return t(n),!1;return!!function(e){return!f(e)&&!p(e)}(i)||(0===this._cmp(i,c[d][1])||0===this._cmp(i,c[d][0])||t((()=>{u===r?e.continue(c[d][0]):e.continue(c[d][1])})),!1)})),g}startsWithAnyOf(){const e=M.apply(L,arguments);return e.every((e=>"string"==typeof e))?0===e.length?$t(this):this.inAnyRange(e.map((e=>[e,e+bt]))):Yt(this,"startsWithAnyOf() only works with strings")}}function sn(e){return Qe((function(t){return an(t),e(t.target.error),!1}))}function an(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const on="storagemutated",ln="x-storagemutated-1",cn=Dt(null,on);class un{_lock(){return b(!Pe.global),++this._reculock,1!==this._reculock||Pe.global||(Pe.lockOwnerFor=this),this}_unlock(){if(b(!Pe.global),0==--this._reculock)for(Pe.global||(Pe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ut(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&Pe.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new ee.DatabaseClosed(n);case"MissingAPIError":throw new ee.MissingAPI(n.message,n);default:throw new ee.OpenFailed(n)}if(!this.active)throw new ee.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Qe((t=>{an(t),this._reject(e.error)})),e.onabort=Qe((t=>{an(t),this.active&&this._reject(new ee.Abort(e.error)),this.active=!1,this.on("abort").fire(t)})),e.oncomplete=Qe((()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&cn.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if("readwrite"===e&&"readwrite"!==this.mode)return gt(new ee.ReadOnly("Transaction is readonly"));if(!this.active)return gt(new ee.TransactionInactive);if(this._locked())return new je(((r,i)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,i)},Pe])}));if(n)return nt((()=>{var e=new je(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new je(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=je.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new je(((e,r)=>{n.then((n=>t._waitingQueue.push(Qe(e.bind(null,n)))),(e=>t._waitingQueue.push(Qe(r.bind(null,e))))).finally((()=>{t._waitingFor===i&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ee.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(c(t,e))return t[e];const n=this.schema[e];if(!n)throw new ee.NotFound("Table "+e+" not part of transaction");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function hn(e,t,n,r,i,s,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+dn(t)}}function dn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function fn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:_(n,(e=>[e.name,e]))}}let pn=e=>{try{return e.only([[]]),pn=()=>[[]],[[]]}catch(e){return pn=()=>bt,bt}};function mn(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>k(t,e)}(e):t=>k(t,e)}function gn(e){return[].slice.call(e)}let yn=0;function vn(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function bn(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:n,upper:r,lowerOpen:i,upperOpen:s}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!s):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!s)}const{schema:i,hasGetAll:a}=function(e,t){const n=gn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:n}=e,r=s(t),i=null==t,a={},o={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:mn(t)},indexes:gn(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:n,multiEntry:r,keyPath:i}=e,o={name:t,compound:s(i),keyPath:i,unique:n,multiEntry:r,extractKey:mn(i)};return a[vn(i)]=o,o})),getIndexByKeyPath:e=>a[vn(e)]};return a[":id"]=o.primaryKey,null!=t&&(a[vn(t)]=o.primaryKey),o}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=i.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function(e){let{trans:n,type:i,keys:s,values:a,range:o}=e;return new Promise(((e,l)=>{e=Qe(e);const c=n.objectStore(t),u=null==c.keyPath,h="put"===i||"add"===i;if(!h&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);const{length:d}=s||a||{length:1};if(s&&a&&s.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===d)return e({numFailures:0,failures:{},results:[],lastResult:void 0});let f;const p=[],m=[];let g=0;const y=e=>{++g,an(e)};if("deleteRange"===i){if(4===o.type)return e({numFailures:g,failures:m,results:[],lastResult:void 0});3===o.type?p.push(f=c.clear()):p.push(f=c.delete(r(o)))}else{const[e,t]=h?u?[a,s]:[a,null]:[s,null];if(h)for(let n=0;n<d;++n)p.push(f=t&&void 0!==t[n]?c[i](e[n],t[n]):c[i](e[n])),f.onerror=y;else for(let n=0;n<d;++n)p.push(f=c[i](e[n])),f.onerror=y}const v=t=>{const n=t.target.result;p.forEach(((e,t)=>null!=e.error&&(m[t]=e.error))),e({numFailures:g,failures:m,results:"delete"===i?s:p.map((e=>e.result)),lastResult:n})};f.onerror=e=>{y(e),v(e)},f.onsuccess=v}))},getMany:e=>{let{trans:n,keys:r}=e;return new Promise(((e,i)=>{e=Qe(e);const s=n.objectStore(t),a=r.length,o=new Array(a);let l,c=0,u=0;const h=t=>{const n=t.target;o[n._pos]=n.result,++u===c&&e(o)},d=sn(i);for(let t=0;t<a;++t)null!=r[t]&&(l=s.get(r[t]),l._pos=t,l.onsuccess=h,l.onerror=d,++c);0===c&&e(o)}))},get:e=>{let{trans:n,key:r}=e;return new Promise(((e,i)=>{e=Qe(e);const s=n.objectStore(t).get(r);s.onsuccess=t=>e(t.target.result),s.onerror=sn(i)}))},query:function(e){return n=>new Promise(((i,s)=>{i=Qe(i);const{trans:a,values:o,limit:l,query:c}=n,u=l===1/0?void 0:l,{index:h,range:d}=c,f=a.objectStore(t),p=h.isPrimaryKey?f:f.index(h.name),m=r(d);if(0===l)return i({result:[]});if(e){const e=o?p.getAll(m,u):p.getAllKeys(m,u);e.onsuccess=e=>i({result:e.target.result}),e.onerror=sn(s)}else{let e=0;const t=o||!("openKeyCursor"in p)?p.openCursor(m):p.openKeyCursor(m),n=[];t.onsuccess=r=>{const s=t.result;return s?(n.push(o?s.value:s.primaryKey),++e===l?i({result:n}):void s.continue()):i({result:n})},t.onerror=sn(s)}}))}(a),openCursor:function(e){let{trans:n,values:i,query:s,reverse:a,unique:o}=e;return new Promise(((e,l)=>{e=Qe(e);const{index:c,range:u}=s,h=n.objectStore(t),d=c.isPrimaryKey?h:h.index(c.name),f=a?o?"prevunique":"prev":o?"nextunique":"next",p=i||!("openKeyCursor"in d)?d.openCursor(r(u),f):d.openKeyCursor(r(u),f);p.onerror=sn(l),p.onsuccess=Qe((t=>{const r=p.result;if(!r)return void e(null);r.___id=++yn,r.done=!1;const i=r.continue.bind(r);let s=r.continuePrimaryKey;s&&(s=s.bind(r));const a=r.advance.bind(r),o=()=>{throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=()=>{throw new Error("Cursor not started")},r.fail=Qe(l),r.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},r.start=e=>{const t=new Promise(((e,t)=>{e=Qe(e),p.onerror=sn(t),r.fail=t,r.stop=t=>{r.stop=r.continue=r.continuePrimaryKey=r.advance=o,e(t)}})),n=()=>{if(p.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=()=>{throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=Qe((e=>{p.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=s,r.advance=a,n(),t},e(r)}),l)}))},count(e){let{query:n,trans:i}=e;const{index:s,range:a}=n;return new Promise(((e,n)=>{const o=i.objectStore(t),l=s.isPrimaryKey?o:o.index(s.name),c=r(a),u=c?l.count(c):l.count();u.onsuccess=Qe((t=>e(t.target.result))),u.onerror=sn(n)}))}}}(e))),l={};return o.forEach((e=>l[e.name]=e)),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!l[e])throw new Error("Table '".concat(e,"' not found"));return l[e]},MIN_KEY:-1/0,MAX_KEY:pn(t),schema:i}}function wn(e,t){let{_novip:n}=e;const r=t.db,i=function(e,t,n,r){let{IDBKeyRange:i,indexedDB:s}=n;const a=function(e,t){return t.reduce(((e,t)=>{let{create:n}=t;return{...e,...n(e)}}),e)}(bn(t,i,r),e.dbcore);return{dbcore:a}}(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach((e=>{const t=e.name;n.core.schema.tables.some((e=>e.name===t))&&(e.core=n.core.table(t),n[t]instanceof n.Table&&(n[t].core=e.core))}))}function _n(e,t,n,r){let{_novip:i}=e;n.forEach((e=>{const n=r[e];t.forEach((t=>{const r=m(t,e);(!r||"value"in r&&void 0===r.value)&&(t===i.Transaction.prototype||t instanceof i.Transaction?d(t,e,{get(){return this.table(e)},set(t){h(this,e,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):t[e]=new i.Table(e,n))}))}))}function kn(e,t){let{_novip:n}=e;t.forEach((e=>{for(let t in e)e[t]instanceof n.Table&&delete e[t]}))}function En(e,t){return e._cfg.version-t._cfg.version}function Sn(e,t,n,r){const s=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,s);a.create(n),a._completion.catch(r);const o=a._reject.bind(a),l=Pe.transless||Pe;nt((()=>{Pe.trans=a,Pe.transless=l,0===t?(i(s).forEach((e=>{Tn(n,e,s[e].primKey,s[e].indexes)})),wn(e,n),je.follow((()=>e.on.populate.fire(a))).catch(o)):function(e,t,n,r){let{_novip:s}=e;const a=[],o=s._versions;let l=s._dbSchema=Cn(s,s.idbdb,r),c=!1;const u=o.filter((e=>e._cfg.version>=t));return u.forEach((e=>{a.push((()=>{const a=l,o=e._cfg.dbschema;Nn(s,a,r),Nn(s,o,r),l=s._dbSchema=o;const u=xn(a,o);u.add.forEach((e=>{Tn(r,e[0],e[1].primKey,e[1].indexes)})),u.change.forEach((e=>{if(e.recreate)throw new ee.Upgrade("Not yet support for changing primary key");{const t=r.objectStore(e.name);e.add.forEach((e=>In(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),In(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const h=e._cfg.contentUpgrade;if(h&&e._cfg.version>t){wn(s,r),n._memoizedTables={},c=!0;let e=S(o);u.del.forEach((t=>{e[t]=a[t]})),kn(s,[s.Transaction.prototype]),_n(s,[s.Transaction.prototype],i(e),e),n.schema=e;const t=U(h);let l;t&&rt();const d=je.follow((()=>{if(l=h(n),l&&t){var e=it.bind(null,null);l.then(e,e)}}));return l&&"function"==typeof l.then?je.resolve(l):d.then((()=>l))}})),a.push((t=>{c&&xt||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(e._cfg.dbschema,t),kn(s,[s.Transaction.prototype]),_n(s,[s.Transaction.prototype],s._storeNames,s._dbSchema),n.schema=s._dbSchema}))})),function e(){return a.length?je.resolve(a.shift()(n.idbtrans)).then(e):je.resolve()}().then((()=>{var e,t;t=r,i(e=l).forEach((n=>{t.db.objectStoreNames.contains(n)||Tn(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,a,n).catch(o)}))}function xn(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],s=t[r];if(i){const e={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!St)e.recreate=!0,n.change.push(e);else{const t=i.idxByName,r=s.idxByName;let a;for(a in t)r[a]||e.del.push(a);for(a in r){const n=t[a],i=r[a];n?n.src!==i.src&&e.change.push(i):e.add.push(i)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,s])}return n}function Tn(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((e=>In(i,e))),i}function In(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Cn(e,t,n){const r={};return y(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let i=t.keyPath;const s=hn(dn(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),a=[];for(let n=0;n<t.indexNames.length;++n){const e=t.index(t.indexNames[n]);i=e.keyPath;var o=hn(e.name,i,!!e.unique,!!e.multiEntry,!1,i&&"string"!=typeof i,!1);a.push(o)}r[e]=fn(e,s,a)})),r}function Nn(e,t,n){let{_novip:i}=e;const s=n.db.objectStoreNames;for(let r=0;r<s.length;++r){const e=s[r],a=n.objectStore(e);i._hasGetAll="getAll"in a;for(let n=0;n<a.indexNames.length;++n){const r=a.indexNames[n],i=a.index(r).keyPath,s="string"==typeof i?i:"["+y(i).join("+")+"]";if(t[e]){const n=t[e].idxByName[s];n&&(n.name=r,delete t[e].idxByName[s],t[e].idxByName[r]=n)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}class Pn{_parseStoresSpec(e,t){i(e).forEach((n=>{if(null!==e[n]){var r=e[n].split(",").map(((e,t)=>{const n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return hn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),s(r),0===t)})),i=r.shift();if(i.multi)throw new ee.Schema("Primary key cannot be multi-valued");r.forEach((e=>{if(e.auto)throw new ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ee.Schema("Index must have a name and cannot be an empty string")})),t[n]=fn(n,i,r)}}))}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,e):e;const n=t._versions,r={};let s={};return n.forEach((e=>{a(r,e._cfg.storesSource),s=e._cfg.dbschema={},e._parseStoresSpec(r,s)})),t._dbSchema=s,kn(t,[t._allTables,t,t.Transaction.prototype]),_n(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],i(s),s),t._storeNames=i(s),this}upgrade(e){return this._cfg.contentUpgrade=he(this._cfg.contentUpgrade||re,e),this}}function An(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new $n(Ct,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function On(e){return e&&"function"==typeof e.databases}function Rn(e){return nt((function(){return Pe.letThrough=!0,e()}))}function jn(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function Dn(e){var t=t=>e.next(t),n=i(t),r=i((t=>e.throw(t)));function i(e){return t=>{var i=e(t),a=i.value;return i.done?a:a&&"function"==typeof a.then?a.then(n,r):s(a)?Promise.all(a).then(n,r):n(a)}}return i(t)()}function Ln(e,t,n){var r=arguments.length;if(r<2)throw new ee.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,T(i),n]}function Mn(e,t,n,r,i){return je.resolve().then((()=>{const s=Pe.transless||Pe,a=e._createTransaction(t,n,e._dbSchema,r),o={trans:a,transless:s};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===$.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>Mn(e,t,n,null,i)))):gt(r)}const l=U(i);let c;l&&rt();const u=je.follow((()=>{if(c=i.call(a,a),c)if(l){var e=it.bind(null,null);c.then(e,e)}else"function"==typeof c.next&&"function"==typeof c.throw&&(c=Dn(c))}),o);return(c&&"function"==typeof c.then?je.resolve(c).then((e=>a.active?e:gt(new ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):u.then((()=>c))).then((e=>(r&&a._resolve(),a._completion.then((()=>e))))).catch((e=>(a._reject(e),gt(e))))}))}function Un(e,t,n){const r=s(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}const Fn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},s=[];function a(e,t,n){const r=vn(e),o=i[r]=i[r]||[],l=null==e?0:"string"==typeof e?1:e.length,c=t>0,u={...n,isVirtual:c,keyTail:t,keyLength:l,extractKey:mn(e),unique:!c&&n.unique};return o.push(u),u.isPrimaryKey||s.push(u),l>1&&a(2===l?e[0]:e.slice(0,l-1),t+1,n),o.sort(((e,t)=>e.keyTail-t.keyTail)),u}const o=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[o];for(const e of r.indexes)a(e.keyPath,0,e);function l(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(r=t.query.range,i=n.keyTail,{type:1===r.type?2:r.type,lower:Un(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Un(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}:t;var r,i}const c={...n,schema:{...r,primaryKey:o,indexes:s,getIndexByKeyPath:function(e){const t=i[vn(e)];return t&&t[0]}},count:e=>n.count(l(e)),query:e=>n.query(l(e)),openCursor(t){const{keyTail:r,isVirtual:i,keyLength:s}=t.query.index;return i?n.openCursor(l(t)).then((n=>n&&function(n){const i=Object.create(n,{continue:{value:function(i){null!=i?n.continue(Un(i,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,s).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,i){n.continuePrimaryKey(Un(t,e.MAX_KEY,r),i)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===s?e[0]:e.slice(0,s)}},value:{get:()=>n.value}});return i}(n))):n.openCursor(t)}};return c}}}};function Bn(e,t,n,r){return n=n||{},r=r||"",i(e).forEach((i=>{if(c(t,i)){var s=e[i],a=t[i];if("object"==typeof s&&"object"==typeof a&&s&&a){const e=R(s);e!==R(a)?n[r+i]=t[i]:"Object"===e?Bn(s,a,n,r+i+"."):s!==a&&(n[r+i]=t[i])}else s!==a&&(n[r+i]=t[i])}else n[r+i]=void 0})),i(t).forEach((i=>{c(e,i)||(n[r+i]=t[i])})),n}const Vn={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema,i={...n,mutate(e){const i=Pe.trans,{deleting:s,creating:a,updating:o}=i.table(t).hook;switch(e.type){case"add":if(a.fire===re)break;return i._promise("readwrite",(()=>l(e)),!0);case"put":if(a.fire===re&&o.fire===re)break;return i._promise("readwrite",(()=>l(e)),!0);case"delete":if(s.fire===re)break;return i._promise("readwrite",(()=>l(e)),!0);case"deleteRange":if(s.fire===re)break;return i._promise("readwrite",(()=>function(e){return u(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function l(e){const t=Pe.trans,i=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:i}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,i).then((l=>{const u=i.map(((n,i)=>{const u=l[i],h={onerror:null,onsuccess:null};if("delete"===e.type)s.fire.call(h,n,u,t);else if("add"===e.type||void 0===u){const s=a.fire.call(h,n,e.values[i],t);null==n&&null!=s&&(n=s,e.keys[i]=n,r.outbound||E(e.values[i],r.keyPath,n))}else{const r=Bn(u,e.values[i]),s=o.fire.call(h,r,n,u,t);if(s){const t=e.values[i];Object.keys(s).forEach((e=>{c(t,e)?t[e]=s[e]:E(t,e,s[e])}))}}return h}));return n.mutate(e).then((t=>{let{failures:n,results:r,numFailures:s,lastResult:a}=t;for(let o=0;o<i.length;++o){const t=r?r[o]:i[o],s=u[o];null==t?s.onerror&&s.onerror(n[o]):s.onsuccess&&s.onsuccess("put"===e.type&&l[o]?e.values[o]:t)}return{failures:n,results:r,numFailures:s,lastResult:a}})).catch((e=>(u.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function u(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((n=>{let{result:r}=n;return l({type:"delete",keys:r,trans:e}).then((n=>n.numFailures>0?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:u(e,{...t,lower:r[r.length-1],lowerOpen:!0},i)))}))}}};return i}})};function zn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let i=0,s=0;i<t.keys.length&&s<e.length;++i)0===qt(t.keys[i],e[s])&&(r.push(n?P(t.values[i]):t.values[i]),++s);return r.length===e.length?r:null}catch(e){return null}}const Kn={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=zn(e.keys,e.trans._cache,"clone"===e.cache);return t?je.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?P(t):t},t)))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function qn(e){return!("from"in e)}const Wn=function(e,t){if(!this){const t=new Wn;return e&&"d"in e&&a(t,e),t}a(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Hn(e,t,n){const r=qt(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(qn(e))return a(e,{from:t,to:n,d:1});const i=e.l,s=e.r;if(qt(n,e.from)<0)return i?Hn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Qn(e);if(qt(t,e.to)>0)return s?Hn(s,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Qn(e);qt(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),qt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;i&&!e.l&&Gn(e,i),s&&o&&Gn(e,s)}function Gn(e,t){qn(t)||function e(t,n){let{from:r,to:i,l:s,r:a}=n;Hn(t,r,i),s&&e(t,s),a&&e(t,a)}(e,t)}function Jn(e){let t=qn(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&qt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||qt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Qn(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const t="r"===i?"l":"r",n={...e},r=e[i];e.from=r.from,e.to=r.to,e[i]=r[i],n[i]=r[t],e[t]=n,n.d=Xn(n)}e.d=Xn(e)}function Xn(e){let{r:t,l:n}=e;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}u(Wn.prototype,{add(e){return Gn(this,e),this},addKey(e){return Hn(this,e,e),this},addKeys(e){return e.forEach((e=>Hn(this,e,e))),this},[j](){return Jn(this)}});const Yn={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Wn(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const a=e.table(r),{schema:o}=a,{primaryKey:l}=o,{extractKey:c,outbound:u}=l,h={...a,mutate:e=>{const i=e.trans,l=i.mutatedParts||(i.mutatedParts={}),c=e=>{const n="idb://".concat(t,"/").concat(r,"/").concat(e);return l[n]||(l[n]=new Wn)},u=c(""),h=c(":dels"),{type:d}=e;let[f,p]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const m=e.trans._cache;return a.mutate(e).then((e=>{if(s(f)){"delete"!==d&&(f=e.results),u.addKeys(f);const t=zn(f,m);t||"add"===d||h.addKeys(f),(t||p)&&function(e,t,n,r){t.indexes.forEach((function(t){const i=e(t.name||"");function a(e){return null!=e?t.extractKey(e):null}const o=e=>t.multiEntry&&s(e)?e.forEach((e=>i.addKey(e))):i.addKey(e);(n||r).forEach(((e,t)=>{const i=n&&a(n[t]),s=r&&a(r[t]);0!==qt(i,s)&&(null!=i&&o(i),null!=s&&o(s))}))}))}(c,o,t,p)}else if(f){const e={from:f.lower,to:f.upper};h.add(e),u.add(e)}else u.add(n),h.add(n),o.indexes.forEach((e=>c(e.name).add(n)));return e}))}},d=t=>{let{query:{index:n,range:r}}=t;var i,s;return[n,new Wn(null!==(i=r.lower)&&void 0!==i?i:e.MIN_KEY,null!==(s=r.upper)&&void 0!==s?s:e.MAX_KEY)]},f={get:e=>[l,new Wn(e.key)],getMany:e=>[l,(new Wn).addKeys(e.keys)],count:d,query:d,openCursor:d};return i(f).forEach((e=>{h[e]=function(i){const{subscr:s}=Pe;if(s){const o=e=>{const n="idb://".concat(t,"/").concat(r,"/").concat(e);return s[n]||(s[n]=new Wn)},l=o(""),h=o(":dels"),[d,p]=f[e](i);if(o(d.name||"").add(p),!d.isPrimaryKey){if("count"!==e){const t="query"===e&&u&&i.values&&a.query({...i,values:!1});return a[e].apply(this,arguments).then((n=>{if("query"===e){if(u&&i.values)return t.then((e=>{let{result:t}=e;return l.addKeys(t),n}));const e=i.values?n.result.map(c):n.result;i.values?l.addKeys(e):h.addKeys(e)}else if("openCursor"===e){const e=n,t=i.values;return e&&Object.create(e,{key:{get:()=>(h.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return h.addKey(t),t}},value:{get:()=>(t&&l.addKey(e.primaryKey),e.value)}})}return n}))}h.add(n)}}return a[e].apply(this,arguments)}})),h}}}};class $n{constructor(e,t){this._middlewares={},this.verno=0;const n=$n.dependencies;this._options=t={addons:$n.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:re,dbReadyPromise:null,cancelOpen:re,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;i.dbReadyPromise=new je((e=>{i.dbReadyResolve=e})),i.openCanceller=new je(((e,t)=>{i.cancelOpen=t})),this._state=i,this.name=e,this.on=Dt(this,"populate","blocked","versionchange","close",{ready:[he,re]}),this.on.ready.subscribe=v(this.on.ready.subscribe,(e=>(t,n)=>{$n.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||je.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(s=this,Lt(Gt.prototype,(function(e,t){this.db=s;let n=Ot,r=null;if(t)try{n=t()}catch(e){r=e}const i=e._ctx,a=i.table,o=a.hook.reading.fire;this._ctx={table:a,index:i.index,isPrimKey:!i.index||a.schema.primKey.keyPath&&i.index===a.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o!==ie?o:null}}))),this.Table=function(e){return Lt(jt.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Dt(null,{creating:[oe,re],reading:[se,ie],updating:[ce,re],deleting:[le,re]})}))}(this),this.Transaction=function(e){return Lt(un.prototype,(function(t,n,r,i,s){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Dt(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new je(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),gt(e)}))}))}(this),this.Version=function(e){return Lt(Pn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Lt(rn.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};const i=e._deps.indexedDB;if(!i)throw new ee.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=(e,t)=>i.cmp(t,e),this._max=(e,t)=>i.cmp(e,t)>0?e:t,this._min=(e,t)=>i.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(e=>{e.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(this.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(this.name,"'. Closing db now to resume the delete request.")),this.close()})),this.on("blocked",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(this.name,"') was blocked")):console.warn("Upgrade '".concat(this.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))})),this._maxKey=pn(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on("blocked").fire(e),Et.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on("versionchange").fire(e)))},this.use(Fn),this.use(Vn),this.use(Yn),this.use(Kn),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new ee.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(En),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Pe.letThrough||this._vip)?e():new je(((e,t)=>{if(this._state.openComplete)return t(new ee.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new ee.DatabaseClosed);this.open().catch(re)}this._state.dbReadyPromise.then(e,t)})).then(e)}use(e){let{stack:t,create:n,level:r,name:i}=e;i&&this.unuse({stack:t,name:i});const s=this._middlewares[t]||(this._middlewares[t]=[]);return s.push({stack:t,create:n,level:null==r?10:r,name:i}),s.sort(((e,t)=>e.level-t.level)),this}unuse(e){let{stack:t,name:n,create:r}=e;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((e=>r?e.create!==r:!!n&&e.name!==n))),this}open(){return function(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((()=>t.dbOpenError?gt(t.dbOpenError):e));F&&(t.openCanceller._stackHolder=K()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function s(){if(t.openCanceller!==r)throw new ee.DatabaseClosed("db.open() was cancelled")}let a=t.dbReadyResolve,o=null,l=!1;const c=()=>new je(((r,a)=>{if(s(),!n)throw new ee.MissingAPI;const c=e.name,u=t.autoSchema?n.open(c):n.open(c,Math.round(10*e.verno));if(!u)throw new ee.MissingAPI;u.onerror=sn(a),u.onblocked=Qe(e._fireOnBlocked),u.onupgradeneeded=Qe((r=>{if(o=u.transaction,t.autoSchema&&!e._options.allowEmptyDB){u.onerror=an,o.abort(),u.result.close();const e=n.deleteDatabase(c);e.onsuccess=e.onerror=Qe((()=>{a(new ee.NoSuchDatabase("Database ".concat(c," doesnt exist")))}))}else{o.onerror=sn(a);var i=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;l=i<1,e._novip.idbdb=u.result,Sn(e,i/10,o,a)}}),a),u.onsuccess=Qe((()=>{o=null;const n=e._novip.idbdb=u.result,s=y(n.objectStoreNames);if(s.length>0)try{const r=n.transaction(1===(a=s).length?a[0]:a,"readonly");t.autoSchema?function(e,t,n){let{_novip:r}=e;r.verno=t.version/10;const s=r._dbSchema=Cn(0,t,n);r._storeNames=y(t.objectStoreNames,0),_n(r,[r._allTables],i(s),s)}(e,n,r):(Nn(e,e._dbSchema,r),function(e,t){const n=xn(Cn(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,r)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),wn(e,r)}catch(e){}var a;Et.push(e),n.onversionchange=Qe((n=>{t.vcFired=!0,e.on("versionchange").fire(n)})),n.onclose=Qe((t=>{e.on("close").fire(t)})),l&&function(e,t){let{indexedDB:n,IDBKeyRange:r}=e;!On(n)&&t!==Ct&&An(n,r).put({name:t}).catch(re)}(e._deps,c),r()}),a)})).catch((e=>e&&"UnknownError"===e.name&&t.PR1398_maxLoop>0?(t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),c()):je.reject(e)));return je.race([r,("undefined"==typeof navigator?je.resolve():jn()).then(c)]).then((()=>(s(),t.onReadyBeingFired=[],je.resolve(Rn((()=>e.on.ready.fire(e.vip)))).then((function n(){if(t.onReadyBeingFired.length>0){let r=t.onReadyBeingFired.reduce(he,re);return t.onReadyBeingFired=[],je.resolve(Rn((()=>r(e.vip)))).then(n)}}))))).finally((()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((()=>e)).catch((n=>{t.dbOpenError=n;try{o&&o.abort()}catch(e){}return r===t.openCanceller&&e._close(),gt(n)})).finally((()=>{t.openComplete=!0,a()}))}(this)}_close(){const e=this._state,t=Et.indexOf(this);if(t>=0&&Et.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new je((t=>{e.dbReadyResolve=t})),e.openCanceller=new je(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ee.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new je(((n,r)=>{const i=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=Qe((()=>{!function(e,t){let{indexedDB:n,IDBKeyRange:r}=e;!On(n)&&t!==Ct&&An(n,r).delete(t).catch(re)}(this._deps,this.name),n()})),e.onerror=sn(r),e.onblocked=this._fireOnBlocked};if(e)throw new ee.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(i):i()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return i(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=Ln.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=Pe.trans;r&&r.db===this&&-1===e.indexOf("!")||(r=null);const i=-1!==e.indexOf("?");let s,a;e=e.replace("!","").replace("?","");try{if(a=t.map((e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===Nt)s=Nt;else{if("rw"!=e&&e!=Pt)throw new ee.InvalidArgument("Invalid transaction mode: "+e);s=Pt}if(r){if(r.mode===Nt&&s===Pt){if(!i)throw new ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&a.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!i)throw new ee.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):gt(e)}const o=Mn.bind(null,this,s,a,r,n);return r?r._promise(s,o,"lock"):Pe.trans?ut(Pe.transless,(()=>this._whenReady(o))):this._whenReady(o)}table(e){if(!c(this._allTables,e))throw new ee.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]}}const Zn="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class er{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}[Zn](){return this}}function tr(e,t){return i(t).forEach((n=>{Gn(e[n]||(e[n]=new Wn),t[n])})),e}let nr;try{nr={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch(r){nr={indexedDB:null,IDBKeyRange:null}}const rr=$n;function ir(e){let t=sr;try{sr=!0,cn.storagemutated.fire(e)}finally{sr=t}}u(rr,{...ne,delete:e=>new rr(e,{addons:[]}).delete(),exists:e=>new rr(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(e){try{return function(e){let{indexedDB:t,IDBKeyRange:n}=e;return On(t)?Promise.resolve(t.databases()).then((e=>e.map((e=>e.name)).filter((e=>e!==Ct)))):An(t,n).toCollection().primaryKeys()}(rr.dependencies).then(e)}catch(e){return gt(new ee.MissingAPI)}},defineClass:()=>function(e){a(this,e)},ignoreTransaction:e=>Pe.trans?ut(Pe.transless,e):e(),vip:Rn,async:function(e){return function(){try{var t=Dn(e.apply(this,arguments));return t&&"function"==typeof t.then?t:je.resolve(t)}catch(e){return gt(e)}}},spawn:function(e,t,n){try{var r=Dn(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:je.resolve(r)}catch(e){return gt(e)}},currentTransaction:{get:()=>Pe.trans||null},waitFor:function(e,t){const n=je.resolve("function"==typeof e?rr.ignoreTransaction(e):e).timeout(t||6e4);return Pe.trans?Pe.trans.waitFor(n):n},Promise:je,debug:{get:()=>F,set:e=>{B(e,"dexie"===e?()=>!0:It)}},derive:f,extend:a,props:u,override:v,Events:Dt,on:cn,liveQuery:function(e){let t,n=!1;const r=new er((r=>{const s=U(e);let a=!1,o={},l={};const c={get closed(){return a},unsubscribe:()=>{a=!0,cn.storagemutated.unsubscribe(f)}};r.start&&r.start(c);let u=!1,h=!1;function d(){return i(l).some((e=>o[e]&&function(e,t){const n=Jn(t);let r=n.next();if(r.done)return!1;let i=r.value;const s=Jn(e);let a=s.next(i.from),o=a.value;for(;!r.done&&!a.done;){if(qt(o.from,i.to)<=0&&qt(o.to,i.from)>=0)return!0;qt(i.from,o.from)<0?i=(r=n.next(o.from)).value:o=(a=s.next(i.from)).value}return!1}(o[e],l[e])))}const f=e=>{tr(o,e),d()&&p()},p=()=>{if(u||a)return;o={};const i={},m=function(t){s&&rt();const n=()=>nt(e,{subscr:t,trans:null}),r=Pe.trans?ut(Pe.transless,n):n();return s&&r.then(it,it),r}(i);h||(cn(on,f),h=!0),u=!0,Promise.resolve(m).then((e=>{n=!0,t=e,u=!1,a||(d()?p():(o={},l=i,r.next&&r.next(e)))}),(e=>{u=!1,n=!1,r.error&&r.error(e),c.unsubscribe()}))};return p(),c}));return r.hasValue=()=>n,r.getValue=()=>t,r},extendObservabilitySet:tr,getByKeyPath:k,setByKeyPath:E,delByKeyPath:function(e,t){"string"==typeof t?E(e,t,void 0):"length"in t&&[].map.call(t,(function(t){E(e,t,void 0)}))},shallowClone:S,deepClone:P,getObjectDiff:Bn,cmp:qt,asap:w,minKey:wt,addons:[],connections:Et,errnames:$,dependencies:nr,semVer:vt,version:vt.split(".").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),rr.maxKey=pn(rr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(cn(on,(e=>{if(!sr){let t;St?(t=document.createEvent("CustomEvent"),t.initCustomEvent(ln,!0,!0,e)):t=new CustomEvent(ln,{detail:e}),sr=!0,dispatchEvent(t),sr=!1}})),addEventListener(ln,(e=>{let{detail:t}=e;sr||ir(t)})));let sr=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel(ln);"function"==typeof e.unref&&e.unref(),cn(on,(t=>{sr||e.postMessage(t)})),e.onmessage=e=>{e.data&&ir(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){cn(on,(e=>{try{sr||("undefined"!=typeof localStorage&&localStorage.setItem(ln,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:ln,changedParts:e}))))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(e=>{if(e.key===ln){const t=JSON.parse(e.newValue);t&&ir(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",(function(e){let{data:t}=e;t&&t.type===ln&&ir(t.changedParts)}))}je.rejectionMapper=function(e,t){if(!e||e instanceof J||e instanceof TypeError||e instanceof SyntaxError||!e.name||!te[e.name])return e;var n=new te[e.name](t||e.message,e);return"stack"in e&&d(n,"stack",{get:function(){return this.inner.stack}}),n},B(F,It);const ar=new $n("PlayersDatabase");ar.version(6).stores({players:"++id, fullName, handicap, availability, wins, losses, totalwins",attendance:"++id, playerId"});const or=ar;var lr=n(414);const cr=()=>{const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)(!0);return(0,e.useEffect)((()=>{!async function(){try{const e=await or.players.toArray();n(e),i(!1)}catch(e){console.error("Error fetching players:",e.message),i(!1)}}()}),[]),(0,lr.jsxs)("div",{className:"available-container",children:[(0,lr.jsx)("h2",{children:"Available Players"}),r?(0,lr.jsx)("p",{className:"loading-message",children:"Loading players..."}):(0,lr.jsxs)("table",{className:"player-table",children:[(0,lr.jsx)("thead",{children:(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("th",{children:"#"}),(0,lr.jsx)("th",{children:"Name"}),(0,lr.jsx)("th",{children:"Handicap"}),(0,lr.jsx)("th",{children:"Availability"})]})}),(0,lr.jsx)("tbody",{children:t.filter((e=>e.availability)).map(((e,t)=>(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:t+1}),(0,lr.jsx)("td",{children:e.fullName}),(0,lr.jsx)("td",{children:e.handicap}),(0,lr.jsx)("td",{children:e.availability?"Available":"Not Available"})]},e.id)))})]})]})};class ur extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class hr extends ur{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class dr extends ur{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class fr extends ur{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var pr;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(pr||(pr={}));var mr=function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{c(i.next(e))}catch(r){a(r)}}function l(e){try{c(i.throw(e))}catch(r){a(r)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((i=i.apply(e,t||[])).next())}))};class gr{constructor(e){let{headers:t={},customFetch:r,region:i=pr.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=i,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,621)).then((e=>{let{default:n}=e;return n(...t)}))}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return mr(this,void 0,void 0,(function*(){try{const{headers:r,method:i,body:s}=t;let a,o={},{region:l}=t;l||(l=this.region),l&&"any"!==l&&(o["x-region"]=l),s&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&s instanceof Blob||s instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",a=s):"string"===typeof s?(o["Content-Type"]="text/plain",a=s):"undefined"!==typeof FormData&&s instanceof FormData?a=s:(o["Content-Type"]="application/json",a=JSON.stringify(s)));const c=yield this.fetch("".concat(this.url,"/").concat(e),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:a}).catch((e=>{throw new hr(e)})),u=c.headers.get("x-relay-error");if(u&&"true"===u)throw new dr(c);if(!c.ok)throw new fr(c);let h,d=(null!==(n=c.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return h="application/json"===d?yield c.json():"application/octet-stream"===d?yield c.blob():"text/event-stream"===d?c:"multipart/form-data"===d?yield c.formData():yield c.text(),{data:h,error:null}}catch(r){return{data:null,error:r}}}))}}var yr=n(621);class vr extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class br{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=yr.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,n,r;let i=null,s=null,a=null,o=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(s="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&c&&c.length>1&&(a=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(i={code:"PGRST116",details:"Results contain ".concat(s.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,a=null,o=406,l="Not Acceptable"):s=1===s.length?s[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(s=[],i=null,o=200,l="OK")}catch(c){404===e.status&&""===t?(o=204,l="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(r=null===i||void 0===i?void 0:i.details)||void 0===r?void 0:r.includes("0 rows"))&&(i=null,o=200,l="OK"),i&&this.shouldThrowOnError)throw new vr(i)}return{error:i,data:s,count:a,status:o,statusText:l}}));return this.shouldThrowOnError||(n=n.catch((e=>{var t,n,r;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:"")},data:null,count:null,status:0,statusText:""}}))),n.then(e,t)}}class wr extends br{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=i?"".concat(i,".order"):"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,"".concat(a?"".concat(a,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(r,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i="undefined"===typeof r?"offset":"".concat(r,".offset"),s="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(i,"".concat(e)),this.url.searchParams.set(s,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept="application/vnd.pgrst.plan+".concat(s,'; for="').concat(l,'"; options=').concat(o,";"),this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class _r extends wr{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map((e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e))).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const s=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(i,"fts").concat(s,".").concat(t)),this}match(e){return Object.entries(e).forEach((e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))})),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?"".concat(n,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}class kr{constructor(e,t){let{headers:n={},schema:r,fetch:i}=t;this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let i=!1;const s=(null!==e&&void 0!==e?e:"*").split("").map((e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e))).join("");return this.url.searchParams.set("select",s),n&&(this.headers.Prefer="count=".concat(n)),new _r({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push("count=".concat(t)),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>'"'.concat(e,'"')));this.url.searchParams.set("columns",e.join(","))}}return new _r({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=["resolution=".concat(n?"ignore":"merge","-duplicates")];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push("count=".concat(r)),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>'"'.concat(e,'"')));this.url.searchParams.set("columns",e.join(","))}}return new _r({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push("count=".concat(t)),this.headers.Prefer=n.join(","),new _r({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push("count=".concat(e)),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new _r({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Er={"X-Client-Info":"postgrest-js/".concat("1.15.2")};class Sr{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},Er),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new kr(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Sr(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:i=!1,count:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=new URL("".concat(this.url,"/rpc/").concat(e));let o;r||i?(t=r?"HEAD":"GET",Object.entries(n).filter((e=>{let[t,n]=e;return void 0!==n})).map((e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]})).forEach((e=>{let[t,n]=e;a.searchParams.append(t,n)}))):(t="POST",o=n);const l=Object.assign({},this.headers);return s&&(l.Prefer="count=".concat(s)),new _r({method:t,url:a,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}const xr={"X-Client-Info":"realtime-js/".concat("2.9.4")};var Tr,Ir,Cr,Nr,Pr,Ar,Or;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Tr||(Tr={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Ir||(Ir={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Cr||(Cr={})),function(e){e.websocket="websocket"}(Nr||(Nr={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Pr||(Pr={}));class Rr{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}class jr{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let s=this.HEADER_LENGTH+2;const a=n.decode(e.slice(s,s+r));s+=r;const o=n.decode(e.slice(s,s+i));s+=i;return{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(s,e.byteLength)))}}}class Dr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter((e=>e.status===t)).forEach((e=>e.callback(n)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(Ar||(Ar={}));class Lr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},(e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Lr.syncState(this.state,e,t,n),this.pendingDiffs.forEach((e=>{this.state=Lr.syncDiff(this.state,e,t,n)})),this.pendingDiffs=[],r()})),this.channel._on(n.diff,{},(e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Lr.syncDiff(this.state,e,t,n),r())})),this.onJoin(((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})})),this.onLeave(((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,n,r){const i=this.cloneDeep(e),s=this.transformState(t),a={},o={};return this.map(i,((e,t)=>{s[e]||(o[e]=t)})),this.map(s,((e,t)=>{const n=i[e];if(n){const r=t.map((e=>e.presence_ref)),i=n.map((e=>e.presence_ref)),s=t.filter((e=>i.indexOf(e.presence_ref)<0)),l=n.filter((e=>r.indexOf(e.presence_ref)<0));s.length>0&&(a[e]=s),l.length>0&&(o[e]=l)}else a[e]=t})),this.syncDiff(i,{joins:a,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,((t,r)=>{var i;const s=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),s.length>0){const n=e[t].map((e=>e.presence_ref)),r=s.filter((e=>n.indexOf(e.presence_ref)<0));e[t].unshift(...r)}n(t,s,r)})),this.map(s,((t,n)=>{let i=e[t];if(!i)return;const s=n.map((e=>e.presence_ref));i=i.filter((e=>s.indexOf(e.presence_ref)<0)),e[t]=i,r(t,i,n),0===i.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((n=>t(n,e[n])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):r,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Or||(Or={}));const Mr=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce(((n,i)=>(n[i]=Ur(i,e,t,r),n)),{})},Ur=(e,t,n,r)=>{const i=t.find((t=>t.name===e)),s=null===i||void 0===i?void 0:i.type,a=n[e];return s&&!r.includes(s)?Fr(s,a):Br(a)},Fr=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return qr(t,n)}switch(e){case Or.bool:return Vr(t);case Or.float4:case Or.float8:case Or.int2:case Or.int4:case Or.int8:case Or.numeric:case Or.oid:return zr(t);case Or.json:case Or.jsonb:return Kr(t);case Or.timestamp:return Wr(t);case Or.abstime:case Or.date:case Or.daterange:case Or.int4range:case Or.int8range:case Or.money:case Or.reltime:case Or.text:case Or.time:case Or.timestamptz:case Or.timetz:case Or.tsrange:case Or.tstzrange:default:return Br(t)}},Br=e=>e,Vr=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},zr=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Kr=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},qr=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(E){r=i?i.split(","):[]}return r.map((e=>Fr(t,e)))}return e},Wr=e=>"string"===typeof e?e.replace(" ","T"):e;var Hr,Gr,Jr;!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(Hr||(Hr={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"}(Gr||(Gr={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Jr||(Jr={}));class Qr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Ir.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Dr(this,Cr.join,this.params,this.timeout),this.rejoinTimer=new Rr((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=Ir.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=Ir.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())})),this._on(Cr.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new Lr(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:s}}=this.params;this._onError((t=>e&&e("CHANNEL_ERROR",t))),this._onClose((()=>e&&e("CLOSED")));const a={},o={broadcast:i,presence:s,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map((e=>e.filter)))&&void 0!==r?r:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:o},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(t=>{let{postgres_changes:n}=t;var r;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==n){const t=this.bindings.postgres_changes,i=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,s=[];for(let r=0;r<i;r++){const i=t[r],{filter:{event:a,schema:o,table:l,filter:c}}=i,u=n&&n[r];if(!u||u.event!==a||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},i),{id:u.id}))}return this.bindings.postgres_changes=s,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")})).receive("error",(t=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{e&&e("TIMED_OUT")}))}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise((n=>{var r,i,s;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(i=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===i?void 0:i.broadcast)||void 0===s?void 0:s.ack)||n("ok"),a.receive("ok",(()=>n("ok"))),a.receive("error",(()=>n("error"))),a.receive("timeout",(()=>n("timed out")))}));{const{event:s,payload:a}=e,o={method:"POST",headers:{apikey:null!==(n=this.socket.apiKey)&&void 0!==n?n:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout)).ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=Ir.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(Cr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((n=>{const r=new Dr(this,Cr.leave,{},e);r.receive("ok",(()=>{t(),n("ok")})).receive("timeout",(()=>{t(),n("timed out")})).receive("error",(()=>{n("error")})),r.send(),this._canPush()||r.trigger("ok",{})}))}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout((()=>r.abort()),n),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),s}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new Dr(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const s=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=Cr;if(n&&[a,o,l,c].indexOf(s)>=0&&n!==this._joinRef())return;let u=this._onMessage(s,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter((e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===s})).map((e=>e.callback(u,n))):null===(i=this.bindings[s])||void 0===i||i.filter((e=>{var n,r,i,a,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return s&&(null===(r=t.ids)||void 0===r?void 0:r.includes(s))&&("*"===a||(null===a||void 0===a?void 0:a.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null===e||void 0===e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s})).map((e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:i,errors:s}=e,a={schema:t,table:n,commit_timestamp:r,eventType:i,new:{},old:{},errors:s};u=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(u,n)}))}_isClosed(){return this.state===Ir.closed}_isJoined(){return this.state===Ir.joined}_isJoining(){return this.state===Ir.joining}_isLeaving(){return this.state===Ir.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&Qr.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Cr.close,{},e)}_onError(e){this._on(Cr.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ir.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Mr(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Mr(e.columns,e.old_record)),t}}const Xr=()=>{},Yr="undefined"!==typeof WebSocket;class $r{constructor(e,t){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=xr,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Xr,this.conn=null,this.sendBuffer=[],this.serializer=new jr,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,621)).then((e=>{let{default:n}=e;return n(...t)}))}:fetch),function(){return t(...arguments)}},this.endPoint="".concat(e,"/").concat(Nr.websocket),(null===t||void 0===t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null===t||void 0===t?void 0:t.timeout)&&(this.timeout=t.timeout),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),(null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey;i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=(null===t||void 0===t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===t||void 0===t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null===t||void 0===t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Rr((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!this.conn)if(this.transport)this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});else{if(Yr)return this.conn=new WebSocket(this._endPointURL()),void this.setupConnection();this.conn=new Zr(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),n.e(437).then(n.t.bind(n,437,23)).then((e=>{let{default:t}=e;this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()}))}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Tr.connecting:return Pr.Connecting;case Tr.open:return Pr.Open;case Tr.closing:return Pr.Closing;default:return Pr.Closed}}isConnected(){return this.connectionState()===Pr.Open}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n=new Qr("realtime:".concat(e),t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:r,ref:i}=e,s=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push","".concat(t," ").concat(n," (").concat(i,")"),r),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(e){this.accessToken=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(Cr.access_token,{access_token:e})}))}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:r,ref:i}=e;(i&&i===this.pendingHeartbeatRef||n===(null===r||void 0===r?void 0:r.type))&&(this.pendingHeartbeatRef=null),this.log("receive","".concat(r.status||""," ").concat(t," ").concat(n," ").concat(i&&"("+i+")"||""),r),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(n,r,i))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}_onConnOpen(){this.log("transport","connected to ".concat(this._endPointURL())),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(Cr.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(n).concat(r)}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Zr{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Tr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class ei extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ti(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class ni extends ei{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ri extends ei{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ii=function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{c(i.next(e))}catch(r){a(r)}}function l(e){try{c(i.throw(e))}catch(r){a(r)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((i=i.apply(e,t||[])).next())}))};const si=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,621)).then((e=>{let{default:n}=e;return n(...t)}))}:fetch),function(){return t(...arguments)}};var ai=function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{c(i.next(e))}catch(r){a(r)}}function l(e){try{c(i.throw(e))}catch(r){a(r)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((i=i.apply(e,t||[])).next())}))};const oi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),li=(e,t)=>ai(void 0,void 0,void 0,(function*(){const r=yield ii(void 0,void 0,void 0,(function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,621))).Response:Response}));e instanceof r?e.json().then((n=>{t(new ni(oi(n),e.status||500))})).catch((e=>{t(new ri(oi(e),e))})):t(new ri(oi(e),e))})),ci=(e,t,n,r)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};function ui(e,t,n,r,i,s){return ai(this,void 0,void 0,(function*(){return new Promise(((a,o)=>{e(n,ci(t,r,i,s)).then((e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()})).then((e=>a(e))).catch((e=>li(e,o)))}))}))}function hi(e,t,n,r){return ai(this,void 0,void 0,(function*(){return ui(e,"GET",t,n,r)}))}function di(e,t,n,r,i){return ai(this,void 0,void 0,(function*(){return ui(e,"POST",t,r,i,n)}))}function fi(e,t,n,r,i){return ai(this,void 0,void 0,(function*(){return ui(e,"DELETE",t,r,i,n)}))}var pi=function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{c(i.next(e))}catch(r){a(r)}}function l(e){try{c(i.throw(e))}catch(r){a(r)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((i=i.apply(e,t||[])).next())}))};const mi={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=si(r)}uploadOrUpdate(e,t,n,r){return pi(this,void 0,void 0,(function*(){try{let i;const s=Object.assign(Object.assign({},gi),r),a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),i.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(i=n,i.append("cacheControl",s.cacheControl)):(i=n,a["cache-control"]="max-age=".concat(s.cacheControl),a["content-type"]=s.contentType);const o=this._removeEmptyFolders(t),l=this._getFinalPath(o),c=yield this.fetch("".concat(this.url,"/object/").concat(l),Object.assign({method:e,body:i,headers:a},(null===s||void 0===s?void 0:s.duplex)?{duplex:s.duplex}:{})),u=yield c.json();if(c.ok)return{data:{path:o,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(i){if(ti(i))return{data:null,error:i};throw i}}))}upload(e,t,n){return pi(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,n)}))}uploadToSignedUrl(e,t,n,r){return pi(this,void 0,void 0,(function*(){const i=this._removeEmptyFolders(e),s=this._getFinalPath(i),a=new URL(this.url+"/object/upload/sign/".concat(s));a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:gi.upsert},r),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,s["cache-control"]="max-age=".concat(t.cacheControl),s["content-type"]=t.contentType);const o=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:s}),l=yield o.json();if(o.ok)return{data:{path:i,fullPath:l.Key},error:null};return{data:null,error:l}}catch(o){if(ti(o))return{data:null,error:o};throw o}}))}createSignedUploadUrl(e){return pi(this,void 0,void 0,(function*(){try{let t=this._getFinalPath(e);const n=yield di(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(t),{},{headers:this.headers}),r=new URL(this.url+n.url),i=r.searchParams.get("token");if(!i)throw new ei("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:i},error:null}}catch(t){if(ti(t))return{data:null,error:t};throw t}}))}update(e,t,n){return pi(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,n)}))}move(e,t){return pi(this,void 0,void 0,(function*(){try{return{data:yield di(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(n){if(ti(n))return{data:null,error:n};throw n}}))}copy(e,t){return pi(this,void 0,void 0,(function*(){try{return{data:{path:(yield di(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(n){if(ti(n))return{data:null,error:n};throw n}}))}createSignedUrl(e,t,n){return pi(this,void 0,void 0,(function*(){try{let r=this._getFinalPath(e),i=yield di(this.fetch,"".concat(this.url,"/object/sign/").concat(r),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const s=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return i={signedUrl:encodeURI("".concat(this.url).concat(i.signedURL).concat(s))},{data:i,error:null}}catch(r){if(ti(r))return{data:null,error:r};throw r}}))}createSignedUrls(e,t,n){return pi(this,void 0,void 0,(function*(){try{const r=yield di(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),i=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:r.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(i)):null}))),error:null}}catch(r){if(ti(r))return{data:null,error:r};throw r}}))}download(e,t){return pi(this,void 0,void 0,(function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),i=r?"?".concat(r):"";try{const t=this._getFinalPath(e),r=yield hi(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(t).concat(i),{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(s){if(ti(s))return{data:null,error:s};throw s}}))}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==i&&r.push(i);const s="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==a&&r.push(a);let o=r.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(s,"/public/").concat(n).concat(o))}}}remove(e){return pi(this,void 0,void 0,(function*(){try{return{data:yield fi(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ti(t))return{data:null,error:t};throw t}}))}list(e,t,n){return pi(this,void 0,void 0,(function*(){try{const r=Object.assign(Object.assign(Object.assign({},mi),t),{prefix:e||""});return{data:yield di(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),r,{headers:this.headers},n),error:null}}catch(r){if(ti(r))return{data:null,error:r};throw r}}))}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e)}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const vi={"X-Client-Info":"storage-js/".concat("2.5.5")};var bi=function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{c(i.next(e))}catch(r){a(r)}}function l(e){try{c(i.throw(e))}catch(r){a(r)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((i=i.apply(e,t||[])).next())}))};class wi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.url=e,this.headers=Object.assign(Object.assign({},vi),t),this.fetch=si(n)}listBuckets(){return bi(this,void 0,void 0,(function*(){try{return{data:yield hi(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(ti(e))return{data:null,error:e};throw e}}))}getBucket(e){return bi(this,void 0,void 0,(function*(){try{return{data:yield hi(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(ti(t))return{data:null,error:t};throw t}}))}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return bi(this,void 0,void 0,(function*(){try{return{data:yield di(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ti(n))return{data:null,error:n};throw n}}))}updateBucket(e,t){return bi(this,void 0,void 0,(function*(){try{const n=yield function(e,t,n,r,i){return ai(this,void 0,void 0,(function*(){return ui(e,"PUT",t,r,i,n)}))}(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(ti(n))return{data:null,error:n};throw n}}))}emptyBucket(e){return bi(this,void 0,void 0,(function*(){try{return{data:yield di(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(ti(t))return{data:null,error:t};throw t}}))}deleteBucket(e){return bi(this,void 0,void 0,(function*(){try{return{data:yield fi(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(ti(t))return{data:null,error:t};throw t}}))}}class _i extends wi{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}from(e){return new yi(this.url,this.headers,e,this.fetch)}}let ki="";ki="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Ei={headers:{"X-Client-Info":"supabase-js-".concat(ki,"/").concat("2.42.5")}},Si={schema:"public"},xi={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ti={};var Ii=function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{c(i.next(e))}catch(r){a(r)}}function l(e){try{c(i.throw(e))}catch(r){a(r)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((i=i.apply(e,t||[])).next())}))};const Ci=e=>{let t;return t=e||("undefined"===typeof fetch?yr.default:fetch),function(){return t(...arguments)}},Ni=(e,t,n)=>{const r=Ci(n),i="undefined"===typeof Headers?yr.Headers:Headers;return(n,s)=>Ii(void 0,void 0,void 0,(function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let l=new i(null===s||void 0===s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),r(n,Object.assign(Object.assign({},s),{headers:l}))}))};const Pi="2.63.1",Ai={"X-Client-Info":"gotrue-js/".concat(Pi)},Oi="X-Supabase-Api-Version",Ri={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};const ji=()=>"undefined"!==typeof document,Di={tested:!1,writable:!1},Li=()=>{if(!ji())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(r){return!1}if(Di.tested)return Di.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Di.tested=!0,Di.writable=!0}catch(r){Di.tested=!0,Di.writable=!1}return Di.writable};function Mi(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach(((e,n)=>{t[n]=e}))}catch(r){}return n.searchParams.forEach(((e,n)=>{t[n]=e})),t}const Ui=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,621)).then((e=>{let{default:n}=e;return n(...t)}))}:fetch),function(){return t(...arguments)}},Fi=e=>"object"===typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"===typeof e.json,Bi=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Vi=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},zi=async(e,t)=>{await e.removeItem(t)};class Ki{constructor(){this.promise=new Ki.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function qi(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,r,i,s,a,o,l,c="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)s=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),o=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),n=s<<2|a>>4,r=(15&a)<<4|o>>2,i=(3&o)<<6|l,c+=String.fromCharCode(n),64!=o&&0!=r&&(c+=String.fromCharCode(r)),64!=l&&0!=i&&(c+=String.fromCharCode(i));return c}(n))}function Wi(e){return("0"+e.toString(16)).substr(-2)}async function Hi(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map((e=>String.fromCharCode(e))).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Wi).join("")}();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Bi(e,"".concat(t,"-code-verifier"),i);const s=await Hi(r);return[s,r===s?"plain":"s256"]}Ki.promiseConstructor=Promise;const Ji=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;class Qi extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Xi(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Yi extends Qi{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class $i extends Qi{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Zi extends Qi{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class es extends Zi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class ts extends Zi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ns extends Zi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class rs extends Zi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class is extends Zi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ss extends Zi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function as(e){return Xi(e)&&"AuthRetryableFetchError"===e.name}class os extends Zi{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}var ls=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const cs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),us=[502,503,504];async function hs(e){var t;if(!Fi(e))throw new ss(cs(e),0);if(us.includes(e.status))throw new ss(cs(e),e.status);let n,i;try{n=await e.json()}catch(r){throw new $i(cs(r),r)}const s=function(e){const t=e.headers.get(Oi);if(!t)return null;if(!t.match(Ji))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(r){return null}}(e);if(s&&s.getTime()>=Ri["2024-01-01"].timestamp&&"object"===typeof n&&n&&"string"===typeof n.code?i=n.code:"object"===typeof n&&n&&"string"===typeof n.error_code&&(i=n.error_code),i){if("weak_password"===i)throw new os(cs(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[])}else if("object"===typeof n&&n&&"object"===typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce(((e,t)=>e&&"string"===typeof t),!0))throw new os(cs(n),e.status,n.weak_password.reasons);throw new Yi(cs(n),e.status||500,i)}const ds=(e,t,n,r)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function fs(e,t,n,i){var s;const a=Object.assign({},null===i||void 0===i?void 0:i.headers);a[Oi]||(a[Oi]=Ri["2024-01-01"].name),(null===i||void 0===i?void 0:i.jwt)&&(a.Authorization="Bearer ".concat(i.jwt));const o=null!==(s=null===i||void 0===i?void 0:i.query)&&void 0!==s?s:{};(null===i||void 0===i?void 0:i.redirectTo)&&(o.redirect_to=i.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await async function(e,t,n,i,s,a){const o=ds(t,i,s,a);let l;try{l=await e(n,Object.assign(Object.assign({},o),{cache:"no-store"}))}catch(r){throw console.error(r),new ss(cs(r),0)}l.ok||await hs(l);if(null===i||void 0===i?void 0:i.noResolveJson)return l;try{return await l.json()}catch(r){await hs(r)}}(e,t,n+l,{headers:a,noResolveJson:null===i||void 0===i?void 0:i.noResolveJson},{},null===i||void 0===i?void 0:i.body);return(null===i||void 0===i?void 0:i.xform)?null===i||void 0===i?void 0:i.xform(c):{data:Object.assign({},c),error:null}}function ps(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ms(e){const t=ps(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce(((e,t)=>e&&"string"===typeof t),!0)&&(t.data.weak_password=e.weak_password),t}function gs(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ys(e){return{data:e,error:null}}function vs(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=ls(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},user:Object.assign({},a)},error:null}}function bs(e){return e}var ws=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class _s{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=Ui(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";try{return await fs(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Xi(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await fs(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:gs})}catch(n){if(Xi(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=ws(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await fs(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:vs,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Xi(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await fs(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:gs})}catch(t){if(Xi(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,s,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await fs(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(i=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:bs});if(c.error)throw c.error;const u=await c.json(),h=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,d=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return d.length>0&&(d.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t})),l.total=parseInt(h)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Xi(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await fs(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:gs})}catch(t){if(Xi(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await fs(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:gs})}catch(n){if(Xi(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return await fs(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:gs})}catch(n){if(Xi(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await fs(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Xi(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await fs(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(Xi(t))return{data:null,error:t};throw t}}}const ks={getItem:e=>Li()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Li()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Li()&&globalThis.localStorage.removeItem(e)}};function Es(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Ss=!!(globalThis&&Li()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class xs extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ts extends xs{}async function Is(e,t,n){Ss&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout((()=>{i.abort(),Ss&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)}),t),await globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},(async i=>{if(!i){if(0===t)throw Ss&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ts('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Ss)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Ss&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Ss&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(r){"undefined"!==typeof self&&(self.globalThis=self)}}();const Cs={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ai,flowType:"implicit",debug:!1},Ns=3e4;async function Ps(e,t,n){return await n()}class As{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=As.nextInstanceID,As.nextInstanceID+=1,this.instanceID>0&&ji()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Cs),e);if(this.logDebugMessages=!!i.debug,"function"===typeof i.debug&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new _s({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Ui(i.fetch),this.lock=i.lock||Ps,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,i.lock?this.lock=i.lock:ji()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Is:this.lock=Ps,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Li()?this.storage=ks:(this.memoryStorage={},this.storage=Es(this.memoryStorage)):(this.memoryStorage={},this.storage=Es(this.memoryStorage)),ji()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(Pi,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){try{const e=!!ji()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),"Identity is already linked"===(null===n||void 0===n?void 0:n.message)||"Identity is already linked to another user"===(null===n||void 0===n?void 0:n.message)||await this._removeSession(),{error:n};const{session:r,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),await this._saveSession(r),setTimeout((async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Xi(e)?{error:e}:{error:new $i("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{await this._removeSession();const i=await fs(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:ps}),{data:s,error:a}=i;if(a||!s)return{data:{user:null,session:null},error:a};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(Xi(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if(await this._removeSession(),"email"in e){const{email:n,password:r,options:s}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await Gi(this.storage,this.storageKey)),i=await fs(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:o},xform:ps})}else{if(!("phone"in e))throw new ns("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:a}=e;i=await fs(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:s,data:null!==(n=null===a||void 0===a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(r=null===a||void 0===a?void 0:a.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:ps})}}const{data:s,error:a}=i;if(a||!s)return{data:{user:null,session:null},error:a};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(Xi(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if(await this._removeSession(),"email"in e){const{email:n,password:r,options:i}=e;t=await fs(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:ms})}else{if(!("phone"in e))throw new ns("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:i}=e;t=await fs(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:ms})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new ts}}catch(t){if(Xi(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await Vi(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,r]=(null!==t&&void 0!==t?t:"").split("/"),{data:i,error:s}=await fs(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ps});return await zi(this.storage,"".concat(this.storageKey,"-code-verifier")),s?{data:{user:null,session:null,redirectType:null},error:s}:i&&i.session&&i.user?(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:null!==r&&void 0!==r?r:null}),error:s}):{data:{user:null,session:null,redirectType:null},error:new ts}}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:n,token:r,access_token:i,nonce:s}=e,a=await fs(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:ps}),{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new ts}}catch(t){if(Xi(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,s;try{if(await this._removeSession(),"email"in e){const{email:r,options:i}=e;let s=null,a=null;"pkce"===this.flowType&&([s,a]=await Gi(this.storage,this.storageKey));const{error:o}=await fs(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(n=null===i||void 0===i?void 0:i.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:a},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await fs(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(i=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(s=null===n||void 0===n?void 0:n.channel)&&void 0!==s?s:"sms"}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:o}}throw new ns("You must provide either an email or phone number.")}catch(a){if(Xi(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let r,i;"email_change"!==e.type&&"phone_change"!==e.type&&await this._removeSession(),"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:s,error:a}=await fs(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:ps});if(a)throw a;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,l=s.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Xi(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{await this._removeSession();let i=null,s=null;return"pkce"===this.flowType&&([i,s]=await Gi(this.storage,this.storageKey)),await fs(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:s}),headers:this.headers,xform:ys})}catch(i){if(Xi(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new es;const{error:r}=await fs(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}}))}catch(e){if(Xi(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{"email_change"!=e.type&&"phone_change"!=e.type&&await this._removeSession();const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:r,options:i}=e,{error:s}=await fs(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:n,type:r,options:i}=e,{data:s,error:a}=await fs(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:a}}throw new ns("You must provide either an email or phone number and a type")}catch(t){if(Xi(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(r){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(r){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Vi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.storage.isServer){e=new Proxy(e,{get:(e,t,n)=>("user"===t&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(e,t,n))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,(async()=>await this._getUser()))}async _getUser(e){try{return e?await fs(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:gs}):await this._useSession((async e=>{var t,n,r;const{data:i,error:s}=e;if(s)throw s;return(null===(t=i.session)||void 0===t?void 0:t.access_token)?await fs(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:gs}):{data:{user:null},error:new es}}))}catch(t){if(Xi(t))return{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession((async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new es;const s=r.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await Gi(this.storage,this.storageKey));const{data:l,error:c}=await fs(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:s.access_token,xform:gs});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}}))}catch(n){if(Xi(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return qi(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new es;const t=Date.now()/1e3;let n=t,r=!0,i=null;const s=qi(e.access_token);if(s.exp&&(n=s.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:r,error:s}=await this._getUser(e.access_token);if(s)throw s;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Xi(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var n;if(!e){const{data:r,error:i}=t;if(i)throw i;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new es;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(Xi(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!ji())throw new rs("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new rs("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!e)throw new is("Not a valid PKCE flow url.");const t=Mi(window.location.href);if(e){if(!t.code)throw new is("No code detected.");const{data:e,error:n}=await this._exchangeCodeForSession(t.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:e.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new rs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:s,expires_in:a,expires_at:o,token_type:l}=t;if(!i||!a||!s||!l)throw new rs("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let h=c+u;o&&(h=parseInt(o));const d=h-c;1e3*d<=Ns&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(d,"s, should have been closer to ").concat(u,"s"));const f=h-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",f,h,c);const{data:p,error:m}=await this._getUser(i);if(m)throw m;const g={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:u,expires_at:h,refresh_token:s,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(t){if(Xi(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=Mi(window.location.href);return!(!ji()||!e.access_token&&!e.error_description)}async _isPKCEFlow(){const e=Mi(window.location.href),t=await Vi(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession((async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const s=null===(n=r.session)||void 0===n?void 0:n.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return Xi(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await zi(this.storage,"".concat(this.storageKey,"-code-verifier")),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession((async t=>{var n,r;try{const{data:{session:r},error:i}=t;if(i)throw i;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(i){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}}))}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await Gi(this.storage,this.storageKey,!0));try{return await fs(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Xi(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Xi(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession((async t=>{var n,r,i,s,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await fs(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})}));if(r)throw r;return ji()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(Xi(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession((async t=>{var n,r;const{data:i,error:s}=t;if(s)throw s;return await fs(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})}))}catch(t){if(Xi(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const n=Date.now();return await function(e,t){const n=new Promise(((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const r=await e(s);if(!t(s,null,r))return void n(r)}catch(r){if(!t(s,r))return void i(r)}})()}));return n}((async n=>(n>0&&await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await fs(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:ps}))),((e,t)=>{const r=200*Math.pow(2,e);return t&&as(t)&&Date.now()+r-n<Ns}))}catch(n){if(this._debug(t,"error",n),Xi(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),ji()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Vi(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const r=Math.round(Date.now()/1e3),i=(null!==(e=n.expires_at)&&void 0!==e?e:1/0)<r+10;if(this._debug(t,"session has".concat(i?"":" not"," expired with margin of ").concat(10,"s")),i){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),as(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(t,"error",n),void console.error(n)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new es;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new Ki;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new es;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(i){if(this._debug(r,"error",i),Xi(i)){const e={session:null,error:i};return as(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i="#_notifyAllSubscribers(".concat(e,")");this._debug(i,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],s=Array.from(this.stateChangeEmitters.values()).map((async n=>{try{await n.callback(e,t)}catch(r){i.push(r)}}));if(await Promise.all(s),i.length>0){for(let e=0;e<i.length;e+=1)console.error(i[e]);throw i[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await Bi(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await zi(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ji()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),Ns);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/Ns);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(Ns,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(n.refresh_token)}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(!(r.isAcquireTimeout||r instanceof xs))throw r;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ji()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&r.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await Gi(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession((async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await fs(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(t){if(Xi(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession((async t=>{var n,r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:a,error:o}=await fs(this.fetch,"POST","".concat(this.url,"/factors"),{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:((null===(r=null===a||void 0===a?void 0:a.totp)||void 0===r?void 0:r.qr_code)&&(a.totp.qr_code="data:image/svg+xml;utf-8,".concat(a.totp.qr_code)),{data:a,error:null})}))}catch(t){if(Xi(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:s,error:a}=await fs(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:a})}))}catch(t){if(Xi(t))return{data:null,error:t};throw t}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await fs(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(t){if(Xi(t))return{data:null,error:t};throw t}}))}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter((e=>"totp"===e.factor_type&&"verified"===e.status));return{data:{all:n,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(r.access_token);let a=null;s.aal&&(a=s.aal);let o=a;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:s.amr||[]},error:null}}))))}}As.nextInstanceID=0;const Os=As;class Rs extends Os{constructor(e){super(e)}}var js=function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{c(i.next(e))}catch(r){a(r)}}function l(e){try{c(i.throw(e))}catch(r){a(r)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((i=i.apply(e,t||[])).next())}))};class Ds{constructor(e,t,n){var r,i,s,a,o,l,c,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=e.replace(/\/$/,"");this.realtimeUrl="".concat(h,"/realtime/v1").replace(/^http/i,"ws"),this.authUrl="".concat(h,"/auth/v1"),this.storageUrl="".concat(h,"/storage/v1"),this.functionsUrl="".concat(h,"/functions/v1");const d="sb-".concat(new URL(this.authUrl).hostname.split(".")[0],"-auth-token"),f=function(e,t){const{db:n,auth:r,realtime:i,global:s}=e,{db:a,auth:o,realtime:l,global:c}=t;return{db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s)}}(null!==n&&void 0!==n?n:{},{db:Si,realtime:Ti,auth:Object.assign(Object.assign({},xi),{storageKey:d}),global:Ei});this.storageKey=null!==(i=null===(r=f.auth)||void 0===r?void 0:r.storageKey)&&void 0!==i?i:"",this.headers=null!==(a=null===(s=f.global)||void 0===s?void 0:s.headers)&&void 0!==a?a:{},this.auth=this._initSupabaseAuthClient(null!==(o=f.auth)&&void 0!==o?o:{},this.headers,null===(l=f.global)||void 0===l?void 0:l.fetch),this.fetch=Ni(t,this._getAccessToken.bind(this),null===(c=f.global)||void 0===c?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},f.realtime)),this.rest=new Sr("".concat(h,"/rest/v1"),{headers:this.headers,schema:null===(u=f.db)||void 0===u?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new gr(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new _i(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return js(this,void 0,void 0,(function*(){const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:i,detectSessionInUrl:s,storage:a,storageKey:o,flowType:l,debug:c}=e;const u={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Rs({url:this.authUrl,headers:Object.assign(Object.assign({},u),t),storageKey:o,autoRefreshToken:r,persistSession:i,detectSessionInUrl:s,storage:a,flowType:l,debug:c,fetch:n})}_initRealtimeClient(e){return new $r(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)}))}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!==n&&void 0!==n?n:null),this.changedAccessToken=n)}}const Ls=((e,t,n)=>new Ds(e,t,n))("https://bouzvfhfpolcyofoztvt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJvdXp2ZmhmcG9sY3lvZm96dHZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTM3NjUwNDMsImV4cCI6MjAyOTM0MTA0M30.FH6VUzKULFV-_E2ZjAK0FWoQRSIP8nH2yKV7wTedtw4"),Ms=Ls,Us=()=>{const[t,n]=(0,e.useState)(""),[r,i]=(0,e.useState)(""),[s,a]=(0,e.useState)(null),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(""),h=e=>t=>{e(t.target.value),a(null),u("")};return(0,lr.jsxs)("div",{className:"add-player-container",children:[(0,lr.jsxs)("div",{className:"input-fields",children:[(0,lr.jsxs)("label",{htmlFor:"fullName",children:["Full Name:",(0,lr.jsx)("input",{type:"text",id:"fullName",value:t,onChange:h(n)})]}),(0,lr.jsx)("br",{}),(0,lr.jsxs)("label",{htmlFor:"handicap",children:["Handicap:",(0,lr.jsx)("input",{type:"number",id:"handicap",value:r,onChange:h(i)})]})]}),s&&(0,lr.jsx)("div",{className:"error-message","aria-live":"assertive",children:s}),c&&(0,lr.jsx)("div",{className:"success-message","aria-live":"polite",children:c}),(0,lr.jsx)("div",{className:"submit-button",children:(0,lr.jsx)("button",{onClick:async()=>{l(!0);try{const e=t.trim().replace(/\b\w/g,(e=>e.toUpperCase()));if(!e)throw new Error("Please enter a valid full name.");const s=parseFloat(r);if(isNaN(s))throw new Error("Please enter a valid numeric handicap value.");if(await or.players.where("fullName").equalsIgnoreCase(e).count()>0)throw new Error("Player already exists in the list.");await or.players.add({fullName:e,handicap:s});const{error:a}=await Ms.from("players").insert([{name:e,handicap:s}]);if(a)throw new Error(a.message);u("Player added successfully"),n(""),i("")}catch(s){a(s.message)}finally{l(!1)}},disabled:o,children:"Submit"})}),o&&(0,lr.jsx)("div",{className:"loading-indicator","aria-live":"polite",children:"Adding player..."})]})},Fs=()=>{const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)(null),[s,a]=(0,e.useState)(null);(0,e.useEffect)((()=>{!async function(){try{const e=await or.players.toArray();e.sort(((e,t)=>e.fullName.localeCompare(t.fullName))),n(e)}catch(s){console.error("Error fetching players:",s.message)}}()}),[]);const o=()=>{i(null),a(null)};return(0,lr.jsxs)("div",{className:"list-player-container",children:[(0,lr.jsx)("h2",{children:"Player List"}),s&&(0,lr.jsx)("div",{className:"error-message",children:s}),(0,lr.jsxs)("table",{className:"player-table",children:[(0,lr.jsx)("thead",{children:(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("th",{children:"Name"}),(0,lr.jsx)("th",{children:"Handicap"}),(0,lr.jsx)("th",{children:"Actions"})]})}),(0,lr.jsx)("tbody",{children:t.map((e=>(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:r===e.id?(0,lr.jsx)("input",{type:"text",value:e.fullName,onChange:t=>n((n=>n.map((n=>n.id===e.id?{...n,fullName:t.target.value}:n))))}):e.fullName}),(0,lr.jsx)("td",{children:r===e.id?(0,lr.jsx)("input",{type:"number",value:e.handicap,onChange:t=>n((n=>n.map((n=>n.id===e.id?{...n,handicap:t.target.value}:n))))}):e.handicap}),(0,lr.jsx)("td",{children:r===e.id?(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)("button",{onClick:()=>(async e=>{try{if(!e.fullName.trim()||isNaN(e.handicap))throw new Error("Please enter a valid full name and handicap.");await or.players.update(e.id,e),n((t=>t.map((t=>t.id===e.id?e:t)))),i(null),a(null)}catch(s){console.error("Error editing player:",s.message),a(s.message)}})(e),children:"Save"}),(0,lr.jsx)("button",{onClick:o,children:"Cancel"})]}):(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)("button",{onClick:()=>{return t=e.id,void i(t);var t},children:"Edit"}),(0,lr.jsx)("button",{onClick:()=>(async e=>{try{await or.players.delete(e),n((t=>t.filter((t=>t.id!==e)))),console.log("Player deleted successfully"),a(null)}catch(s){console.error("Error deleting player:",s.message),a(s.message)}})(e.id),children:"Delete"})]})})]},e.id)))})]}),(0,lr.jsx)("button",{onClick:async()=>{try{console.log("Starting sync process...");const e=await or.players.toArray();console.log("Players fetched from IndexedDB:",e);const{data:t,error:n}=await Ms.from("players").select("*");if(n)return void console.error("Error fetching existing players from Supabase:",n.message);console.log("Players fetched from Supabase:",t);const r=t.map((e=>e.name)),i=e.filter((e=>!r.includes(e.fullName))).map((e=>({index_id:e.id,name:e.fullName,handicap:e.handicap,created_at:(new Date).toISOString()})));if(console.log("Players to sync with Supabase:",i),i.length>0){const{data:n,error:r}=await Ms.from("players").upsert(i,{onConflict:["name"]});if(r)return void console.error("Error syncing players to Supabase:",r.message);console.log("Players synced to Supabase:",n);for(const i of t)if(!e.some((e=>e.fullName===i.name)))try{await or.players.add({fullName:i.name,handicap:i.handicap}),console.log("Player ".concat(i.name," added to IndexedDB."))}catch(s){console.error("Error adding player to IndexedDB:",s.message)}}else console.log("All players are already synced to Supabase.")}catch(s){console.error("Error syncing players:",s.message)}},children:"Sync Online"})]})},Bs=()=>{const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)([]),[s,a]=(0,e.useState)(""),[o,l]=(0,e.useState)(!0),[c,u]=(0,e.useState)(!1);(0,e.useEffect)((()=>{!async function(){try{const e=(await or.players.toArray()).sort(((e,t)=>e.fullName.localeCompare(t.fullName)));n(e),l(!1)}catch(e){console.error("Error fetching players:",e.message),l(!1)}}()}),[]),(0,e.useEffect)((()=>{const e=setTimeout((()=>{a("")}),3e3);return()=>{clearTimeout(e)}}),[s]);return c?(0,lr.jsx)(cr,{}):(0,lr.jsxs)("div",{className:"available-container",children:[(0,lr.jsx)("h2",{className:"onsite-title",children:"Onsite Attendance"}),o?(0,lr.jsx)("p",{children:"Loading players..."}):(0,lr.jsx)("div",{className:"table-wrapper",children:(0,lr.jsxs)("table",{className:"player-table",children:[(0,lr.jsx)("thead",{children:(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("th",{children:"#"}),(0,lr.jsx)("th",{children:"Name"}),(0,lr.jsx)("th",{children:"Handicap"}),(0,lr.jsx)("th",{children:"Availability"}),(0,lr.jsx)("th",{children:(0,lr.jsxs)("label",{className:"select-all-label",children:["Select",(0,lr.jsx)("input",{className:"onsite-checkbox",type:"checkbox",checked:r.length===t.length,onChange:e=>{const r=e.target.checked;n((e=>e.map((e=>{const t=r;return or.players.where("id").equals(e.id).modify({availability:t}),{...e,availability:t}})))),i(r?t:[])}})]})})]})}),(0,lr.jsx)("tbody",{children:t.map(((e,t)=>(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:t+1}),(0,lr.jsxs)("td",{children:[e.fullName," ",e.availability&&(0,lr.jsx)("span",{role:"img","aria-label":"available",children:"\ud83d\udfe2"})]}),(0,lr.jsx)("td",{children:e.handicap}),(0,lr.jsx)("td",{className:"availability-cell ".concat(e.availability?"available":"not-available"),children:e.availability?"Available":"Not Available"}),(0,lr.jsx)("td",{children:(0,lr.jsx)("input",{type:"checkbox",checked:e.availability,onChange:()=>(e=>{n((t=>{const n=t.map((t=>t.id===e.id?{...t,availability:!t.availability}:t));return or.players.where("id").equals(e.id).modify({availability:!e.availability}),n})),i((t=>e.availability?t.filter((t=>t.id!==e.id)):[...t,e]))})(e)})})]},e.id)))})]})}),(0,lr.jsxs)("div",{className:"button-group",children:[(0,lr.jsx)("button",{className:"btn submit-btn",onClick:async()=>{try{await or.attendance.bulkAdd(r.map((e=>({playerId:e.id,handicap:e.handicap})))),a("Attendance data saved successfully"),u(!0)}catch(e){a("Error saving attendance data: ".concat(e.message))}},children:"Submit Attendance"}),(0,lr.jsx)("button",{className:"btn reset-btn",onClick:async()=>{if(window.confirm("Are you sure you want to reset? This action cannot be undone."))try{await Promise.all(r.map((e=>or.players.where("id").equals(e.id).modify({availability:!1})))),a("Players marked as unavailable successfully"),i([])}catch(e){a("Error marking players as unavailable: ".concat(e.message))}},children:"Reset"})]}),s&&(0,lr.jsx)("p",{className:"success-message",children:s})]})},Vs=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},zs={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Vs(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new Ks;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ks extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qs=function(e){return function(e){const t=Vs(e);return zs.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ws=function(e){try{return zs.decodeString(e,!0)}catch(r){console.error("base64Decode failed: ",r)}return null};const Hs=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Gs=()=>{try{return Hs()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/live1",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_LOG_PIN:"pebkod-9sucqU-pukhyq",REACT_APP_SUPABASE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJvdXp2ZmhmcG9sY3lvZm96dHZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTM3NjUwNDMsImV4cCI6MjAyOTM0MTA0M30.FH6VUzKULFV-_E2ZjAK0FWoQRSIP8nH2yKV7wTedtw4",REACT_APP_SUPABASE_URL:"https://bouzvfhfpolcyofoztvt.supabase.co",REACT_APP_CONSOLE_KEY:"AIzaSyBqa16GX8lW9Ec72Foo4G5c-sGBioUAJ6A",REACT_APP_CONSOLE_ID:"1:175109089338:web:afe25696397aca59baed03"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(r){return}const t=e&&Ws(e[1]);return t&&JSON.parse(t)})()}catch(r){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(r))}},Js=e=>{var t,n;return null===(n=null===(t=Gs())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Qs=()=>{var e;return null===(e=Gs())||void 0===e?void 0:e.config},Xs=e=>{var t;return null===(t=Gs())||void 0===t?void 0:t["_".concat(e)]};class Ys{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function $s(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Zs(){return!function(){var e;const t=null===(e=Gs())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ea(){try{return"object"===typeof indexedDB}catch(r){return!1}}class ta extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ta.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,na.prototype.create)}}class na{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ra,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ta(n,s,t)}}const ra=/\{\$([^}]+)}/g;function ia(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(sa(n)&&sa(s)){if(!ia(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function sa(e){return null!==e&&"object"===typeof e}function aa(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function oa(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function la(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ca{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=ua),void 0===i.error&&(i.error=ua),void 0===i.complete&&(i.complete=ua);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(r){}})),this.observers.push(i),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function ua(){}function ha(e){return e&&e._delegate?e._delegate:e}class da{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const fa="[DEFAULT]";class pa{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ys;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(r){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:fa})}catch(r){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(r){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fa;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fa;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fa;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===fa?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fa;return this.component?this.component.multipleInstances?e:fa:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ma{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pa(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ga=[];var ya;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ya||(ya={}));const va={debug:ya.DEBUG,verbose:ya.VERBOSE,info:ya.INFO,warn:ya.WARN,error:ya.ERROR,silent:ya.SILENT},ba=ya.INFO,wa={[ya.DEBUG]:"log",[ya.VERBOSE]:"log",[ya.INFO]:"info",[ya.WARN]:"warn",[ya.ERROR]:"error"},_a=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=wa[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ka{constructor(e){this.name=e,this._logLevel=ba,this._logHandler=_a,this._userLogHandler=null,ga.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ya))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?va[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ya.DEBUG,...t),this._logHandler(this,ya.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ya.VERBOSE,...t),this._logHandler(this,ya.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ya.INFO,...t),this._logHandler(this,ya.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ya.WARN,...t),this._logHandler(this,ya.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ya.ERROR,...t),this._logHandler(this,ya.ERROR,...t)}}const Ea=(e,t)=>t.some((t=>e instanceof t));let Sa,xa;const Ta=new WeakMap,Ia=new WeakMap,Ca=new WeakMap,Na=new WeakMap,Pa=new WeakMap;let Aa={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ia.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ca.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ja(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Oa(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xa||(xa=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Da(this),n),ja(Ta.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ja(e.apply(Da(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Da(this),t,...r);return Ca.set(s,t.sort?t.sort():[t]),ja(s)}}function Ra(e){return"function"===typeof e?Oa(e):(e instanceof IDBTransaction&&function(e){if(Ia.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Ia.set(e,t)}(e),Ea(e,Sa||(Sa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Aa):e)}function ja(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ja(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Ta.set(t,e)})).catch((()=>{})),Pa.set(t,e),t}(e);if(Na.has(e))return Na.get(e);const t=Ra(e);return t!==e&&(Na.set(e,t),Pa.set(t,e)),t}const Da=e=>Pa.get(e);const La=["get","getKey","getAll","getAllKeys","count"],Ma=["put","add","delete","clear"],Ua=new Map;function Fa(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ua.get(t))return Ua.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ma.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!La.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return Ua.set(t,s),s}Aa=(e=>({...e,get:(t,n,r)=>Fa(t,n)||e.get(t,n,r),has:(t,n)=>!!Fa(t,n)||e.has(t,n)}))(Aa);class Ba{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Va="@firebase/app",za="0.9.27",Ka=new ka("@firebase/app"),qa="[DEFAULT]",Wa={[Va]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ha=new Map,Ga=new Map;function Ja(e,t){try{e.container.addComponent(t)}catch(r){Ka.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),r)}}function Qa(e){const t=e.name;if(Ga.has(t))return Ka.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ga.set(t,e);for(const n of Ha.values())Ja(n,e);return!0}function Xa(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Ya=new na("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class $a{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new da("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ya.create("app-deleted",{appName:this._name})}}const Za="10.8.0";function eo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:qa,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ya.create("bad-app-name",{appName:String(i)});if(n||(n=Qs()),!n)throw Ya.create("no-options");const s=Ha.get(i);if(s){if(ia(n,s.options)&&ia(r,s.config))return s;throw Ya.create("duplicate-app",{appName:i})}const a=new ma(i);for(const l of Ga.values())a.addComponent(l);const o=new $a(n,r,a);return Ha.set(i,o),o}function to(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa;const t=Ha.get(e);if(!t&&e===qa&&Qs())return eo();if(!t)throw Ya.create("no-app",{appName:e});return t}function no(e,t,n){var r;let i=null!==(r=Wa[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ka.warn(e.join(" "))}Qa(new da("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const ro="firebase-heartbeat-database",io=1,so="firebase-heartbeat-store";let ao=null;function oo(){return ao||(ao=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ja(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(ja(a.result),e.oldVersion,e.newVersion,ja(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}(ro,io,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(so)}catch(r){console.warn(r)}}}).catch((e=>{throw Ya.create("idb-open",{originalErrorMessage:e.message})}))),ao}async function lo(e,t){try{const n=(await oo()).transaction(so,"readwrite"),r=n.objectStore(so);await r.put(t,co(e)),await n.done}catch(r){if(r instanceof ta)Ka.warn(r.message);else{const t=Ya.create("idb-set",{originalErrorMessage:null===r||void 0===r?void 0:r.message});Ka.warn(t.message)}}}function co(e){return"".concat(e.name,"!").concat(e.options.appId)}class uo{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fo(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ho();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ho(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),po(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),po(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=qs(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ho(){return(new Date).toISOString().substring(0,10)}class fo{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ea()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await oo()).transaction(so),n=await t.objectStore(so).get(co(e));return await t.done,n}catch(r){if(r instanceof ta)Ka.warn(r.message);else{const t=Ya.create("idb-get",{originalErrorMessage:null===r||void 0===r?void 0:r.message});Ka.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return lo(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return lo(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function po(e){return qs(JSON.stringify({version:2,heartbeats:e})).length}var mo;mo="",Qa(new da("platform-logger",(e=>new Ba(e)),"PRIVATE")),Qa(new da("heartbeat",(e=>new uo(e)),"PRIVATE")),no(Va,za,mo),no(Va,za,"esm2017"),no("fire-js","");var go,yo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},vo={},bo=bo||{},wo=yo||self;function _o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ko(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Eo="closure_uid_"+(1e9*Math.random()>>>0),So=0;function xo(e,t,n){return e.call.apply(e.bind,arguments)}function To(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Io(e,t,n){return(Io=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xo:To).apply(null,arguments)}function Co(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function No(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Po(){this.s=this.s,this.o=this.o}Po.prototype.s=!1,Po.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Eo)&&e[Eo]||(e[Eo]=++So)}(this)},Po.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ao=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Oo(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ro(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(_o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function jo(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}jo.prototype.h=function(){this.defaultPrevented=!0};var Do=function(){if(!wo.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};wo.addEventListener("test",e,t),wo.removeEventListener("test",e,t)}catch(f){}return e}();function Lo(e){return/^[\s\xa0]*$/.test(e)}function Mo(){var e=wo.navigator;return e&&(e=e.userAgent)?e:""}function Uo(e){return-1!=Mo().indexOf(e)}function Fo(e){return Fo[" "](e),e}Fo[" "]=function(){};var Bo,Vo,zo=Uo("Opera"),Ko=Uo("Trident")||Uo("MSIE"),qo=Uo("Edge"),Wo=qo||Ko,Ho=Uo("Gecko")&&!(-1!=Mo().toLowerCase().indexOf("webkit")&&!Uo("Edge"))&&!(Uo("Trident")||Uo("MSIE"))&&!Uo("Edge"),Go=-1!=Mo().toLowerCase().indexOf("webkit")&&!Uo("Edge");function Jo(){var e=wo.document;return e?e.documentMode:void 0}e:{var Qo="",Xo=function(){var e=Mo();return Ho?/rv:([^\);]+)(\)|;)/.exec(e):qo?/Edge\/([\d\.]+)/.exec(e):Ko?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Go?/WebKit\/(\S+)/.exec(e):zo?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Xo&&(Qo=Xo?Xo[1]:""),Ko){var Yo=Jo();if(null!=Yo&&Yo>parseFloat(Qo)){Bo=String(Yo);break e}}Bo=Qo}if(wo.document&&Ko){var $o=Jo();Vo=$o||(parseInt(Bo,10)||void 0)}else Vo=void 0;var Zo=Vo;function el(e,t){if(jo.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ho){e:{try{Fo(t.nodeName);var i=!0;break e}catch(g){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:tl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&el.$.h.call(this)}}No(el,jo);var tl={2:"touch",3:"pen",4:"mouse"};el.prototype.h=function(){el.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var nl="closure_listenable_"+(1e6*Math.random()|0),rl=0;function il(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++rl,this.fa=this.ia=!1}function sl(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function al(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function ol(e){const t={};for(const n in e)t[n]=e[n];return t}const ll="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cl(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<ll.length;t++)n=ll[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ul(e){this.src=e,this.g={},this.h=0}function hl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Ao(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(sl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function dl(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}ul.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=dl(e,t,r,i);return-1<a?(t=e[a],n||(t.ia=!1)):((t=new il(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var fl="closure_lm_"+(1e6*Math.random()|0),pl={};function ml(e,t,n,r,i){if(r&&r.once)return yl(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ml(e,t[s],n,r,i);return null}return n=Sl(n),e&&e[nl]?e.O(t,n,ko(r)?!!r.capture:!!r,i):gl(e,t,n,!1,r,i)}function gl(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=ko(i)?!!i.capture:!!i,o=kl(e);if(o||(e[fl]=o=new ul(e)),(n=o.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=_l;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Do||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(wl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function yl(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)yl(e,t[s],n,r,i);return null}return n=Sl(n),e&&e[nl]?e.P(t,n,ko(r)?!!r.capture:!!r,i):gl(e,t,n,!0,r,i)}function vl(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)vl(e,t[s],n,r,i);else r=ko(r)?!!r.capture:!!r,n=Sl(n),e&&e[nl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=dl(s=e.g[t],n,r,i))&&(sl(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=kl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=dl(t,n,r,i)),(n=-1<e?t[e]:null)&&bl(n))}function bl(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[nl])hl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(wl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=kl(t))?(hl(n,e),0==n.h&&(n.src=null,t[fl]=null)):sl(e)}}}function wl(e){return e in pl?pl[e]:pl[e]="on"+e}function _l(e,t){if(e.fa)e=!0;else{t=new el(t,this);var n=e.listener,r=e.la||e.src;e.ia&&bl(e),e=n.call(r,t)}return e}function kl(e){return(e=e[fl])instanceof ul?e:null}var El="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sl(e){return"function"===typeof e?e:(e[El]||(e[El]=function(t){return e.handleEvent(t)}),e[El])}function xl(){Po.call(this),this.i=new ul(this),this.S=this,this.J=null}function Tl(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new jo(t,e);else if(t instanceof jo)t.target=t.target||e;else{var i=t;cl(t=new jo(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=Il(a,r,!0,t)&&i}if(i=Il(a=t.g=e,r,!0,t)&&i,i=Il(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Il(a=t.g=n[s],r,!1,t)&&i}function Il(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.fa&&a.capture==n){var o=a.listener,l=a.la||a.src;a.ia&&hl(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}No(xl,Po),xl.prototype[nl]=!0,xl.prototype.removeEventListener=function(e,t,n,r){vl(this,e,t,n,r)},xl.prototype.N=function(){if(xl.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)sl(n[r]);delete t.g[e],t.h--}}this.J=null},xl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},xl.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Cl=wo.JSON.stringify;function Nl(){var e=Ll;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Pl=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Al),(e=>e.reset()));class Al{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ol(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Rl(e){wo.setTimeout((()=>{throw e}),0)}let jl,Dl=!1,Ll=new class{constructor(){this.h=this.g=null}add(e,t){const n=Pl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ml=()=>{const e=wo.Promise.resolve(void 0);jl=()=>{e.then(Ul)}};var Ul=()=>{for(var e;e=Nl();){try{e.h.call(e.g)}catch(f){Rl(f)}var t=Pl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Dl=!1};function Fl(e,t){xl.call(this),this.h=e||1,this.g=t||wo,this.j=Io(this.qb,this),this.l=Date.now()}function Bl(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Vl(e,t,n){if("function"===typeof e)n&&(e=Io(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Io(e.handleEvent,e)}return 2147483647<Number(t)?-1:wo.setTimeout(e,t||0)}function zl(e){e.g=Vl((()=>{e.g=null,e.i&&(e.i=!1,zl(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}No(Fl,xl),(go=Fl.prototype).ga=!1,go.T=null,go.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Tl(this,"tick"),this.ga&&(Bl(this),this.start()))}},go.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},go.N=function(){Fl.$.N.call(this),Bl(this),delete this.g};class Kl extends Po{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zl(this)}N(){super.N(),this.g&&(wo.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ql(e){Po.call(this),this.h=e,this.g={}}No(ql,Po);var Wl=[];function Hl(e,t,n,r){Array.isArray(n)||(n&&(Wl[0]=n.toString()),n=Wl);for(var i=0;i<n.length;i++){var s=ml(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Gl(e){al(e.g,(function(e,t){this.g.hasOwnProperty(t)&&bl(e)}),e),e.g={}}function Jl(){this.g=!0}function Ql(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Cl(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}ql.prototype.N=function(){ql.$.N.call(this),Gl(this)},ql.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jl.prototype.Ea=function(){this.g=!1},Jl.prototype.info=function(){};var Xl={},Yl=null;function $l(){return Yl=Yl||new xl}function Zl(e){jo.call(this,Xl.Ta,e)}function ec(e){const t=$l();Tl(t,new Zl(t))}function tc(e,t){jo.call(this,Xl.STAT_EVENT,e),this.stat=t}function nc(e){const t=$l();Tl(t,new tc(t,e))}function rc(e,t){jo.call(this,Xl.Ua,e),this.size=t}function ic(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return wo.setTimeout((function(){e()}),t)}Xl.Ta="serverreachability",No(Zl,jo),Xl.STAT_EVENT="statevent",No(tc,jo),Xl.Ua="timingevent",No(rc,jo);var sc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ac={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function oc(){}function lc(e){return e.h||(e.h=e.i())}function cc(){}oc.prototype.h=null;var uc,hc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function dc(){jo.call(this,"d")}function fc(){jo.call(this,"c")}function pc(){}function mc(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ql(this),this.P=yc,e=Wo?125:void 0,this.V=new Fl(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new gc}function gc(){this.i=null,this.g="",this.h=!1}No(dc,jo),No(fc,jo),No(pc,oc),pc.prototype.g=function(){return new XMLHttpRequest},pc.prototype.i=function(){return{}},uc=new pc;var yc=45e3,vc={},bc={};function wc(e,t,n){e.L=1,e.A=Fc(jc(t)),e.u=n,e.S=!0,_c(e,null)}function _c(e,t){e.G=Date.now(),xc(e),e.B=jc(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),$c(n.i,"t",r),e.o=0,n=e.l.J,e.h=new gc,e.g=$u(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Kl(Io(e.Pa,e,e.g),e.O)),Hl(e.U,e.g,"readystatechange",e.nb),t=e.I?ol(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),ec(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function kc(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Ec(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Sc(e,n),r==bc){4==t&&(e.s=4,nc(14),i=!1),Ql(e.j,e.m,null,"[Incomplete Response]");break}if(r==vc){e.s=4,nc(15),Ql(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ql(e.j,e.m,r,null),Pc(e,r)}kc(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,nc(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),qu(t),t.M=!0,nc(11))):(Ql(e.j,e.m,n,"[Invalid Chunked Response]"),Nc(e),Cc(e))}function Sc(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?bc:(n=Number(t.substring(n,r)),isNaN(n)?vc:(r+=1)+n>t.length?bc:(t=t.slice(r,r+n),e.o=r+n,t))}function xc(e){e.Y=Date.now()+e.P,Tc(e,e.P)}function Tc(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=ic(Io(e.lb,e),t)}function Ic(e){e.C&&(wo.clearTimeout(e.C),e.C=null)}function Cc(e){0==e.l.H||e.J||Gu(e.l,e)}function Nc(e){Ic(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Bl(e.V),Gl(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Pc(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||su(n.i,e)))if(!e.K&&su(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Hu(n),Lu(n)}Ku(n),nc(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ic(Io(n.ib,n),6e3));if(1>=iu(n.i)&&n.oa){try{n.oa()}catch(b){}n.oa=void 0}}else Qu(n,11)}else if((e.K||n.g==e)&&Hu(n),!Lo(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(au(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Uc(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var a=e;if((r=n).wa=Yu(r,r.J?r.pa:null,r.Y),a.K){ou(r.i,a);var o=a,l=r.L;l&&o.setTimeout(l),o.C&&(Ic(o),xc(o)),r.g=a}else zu(r);0<n.j.length&&Uu(n)}else"stop"!=c[0]&&"close"!=c[0]||Qu(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Qu(n,7):Du(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}ec()}catch(b){}}function Ac(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(_o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(_o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(_o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(go=mc.prototype).setTimeout=function(e){this.P=e},go.nb=function(e){e=e.target;const t=this.M;t&&3==Nu(e)?t.l():this.Pa(e)},go.Pa=function(e){try{if(e==this.g)e:{const u=Nu(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Wo||this.g&&(this.h.h||this.g.ja()||Pu(this.g)))){this.J||4!=u||7==t||ec(),Ic(this);var n=this.g.da();this.ca=n;t:if(kc(this)){var r=Pu(this.g);e="";var i=r.length,s=4==Nu(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Nc(this),Cc(this);var a="";break t}this.h.i=new wo.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,a=this.h.g}else a=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Lo(o)){var c=o;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,nc(12),Nc(this),Cc(this);break e}Ql(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pc(this,n)}this.S?(Ec(this,u,a),Wo&&this.i&&3==u&&(Hl(this.U,this.V,"tick",this.mb),this.V.start())):(Ql(this.j,this.m,a,null),Pc(this,a)),4==u&&Nc(this),this.i&&!this.J&&(4==u?Gu(this.l,this):(this.i=!1,xc(this)))}else(function(e){const t={};e=(e.g&&2<=Nu(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Lo(e[r]))continue;var n=Ol(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,nc(12)):(this.s=0,nc(13)),Nc(this),Cc(this)}}}catch(h){}},go.mb=function(){if(this.g){var e=Nu(this.g),t=this.g.ja();this.o<t.length&&(Ic(this),Ec(this,e,t),this.i&&4!=e&&xc(this))}},go.cancel=function(){this.J=!0,Nc(this)},go.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(ec(),nc(17)),Nc(this),this.s=2,Cc(this)):Tc(this,this.Y-e)};var Oc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rc(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Rc){this.h=e.h,Dc(this,e.j),this.s=e.s,this.g=e.g,Lc(this,e.m),this.l=e.l;var t=e.i,n=new Jc;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Mc(this,n),this.o=e.o}else e&&(t=String(e).match(Oc))?(this.h=!1,Dc(this,t[1]||"",!0),this.s=Bc(t[2]||""),this.g=Bc(t[3]||"",!0),Lc(this,t[4]),this.l=Bc(t[5]||"",!0),Mc(this,t[6]||"",!0),this.o=Bc(t[7]||"")):(this.h=!1,this.i=new Jc(null,this.h))}function jc(e){return new Rc(e)}function Dc(e,t,n){e.j=n?Bc(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Lc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Mc(e,t,n){t instanceof Jc?(e.i=t,function(e,t){t&&!e.j&&(Qc(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Xc(this,t),$c(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Vc(t,Hc)),e.i=new Jc(t,e.h))}function Uc(e,t,n){e.i.set(t,n)}function Fc(e){return Uc(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Bc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Vc(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,zc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function zc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Rc.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Vc(t,Kc,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Vc(t,Kc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Vc(n,"/"==n.charAt(0)?Wc:qc,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Vc(n,Gc)),e.join("")};var Kc=/[#\/\?@]/g,qc=/[#\?:]/g,Wc=/[#\?]/g,Hc=/[#\?@]/g,Gc=/#/g;function Jc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qc(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Xc(e,t){Qc(e),t=Zc(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Yc(e,t){return Qc(e),t=Zc(e,t),e.g.has(t)}function $c(e,t,n){Xc(e,t),0<n.length&&(e.i=null,e.g.set(Zc(e,t),Oo(n)),e.h+=n.length)}function Zc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(go=Jc.prototype).add=function(e,t){Qc(this),this.i=null,e=Zc(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},go.forEach=function(e,t){Qc(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},go.ta=function(){Qc(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},go.Z=function(e){Qc(this);let t=[];if("string"===typeof e)Yc(this,e)&&(t=t.concat(this.g.get(Zc(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},go.set=function(e,t){return Qc(this),this.i=null,Yc(this,e=Zc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},go.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},go.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")};var eu=class{constructor(e,t){this.g=e,this.map=t}};function tu(e){this.l=e||nu,wo.PerformanceNavigationTiming?e=0<(e=wo.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(wo.g&&wo.g.Ka&&wo.g.Ka()&&wo.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var nu=10;function ru(e){return!!e.h||!!e.g&&e.g.size>=e.j}function iu(e){return e.h?1:e.g?e.g.size:0}function su(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function au(e,t){e.g?e.g.add(t):e.h=t}function ou(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lu(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Oo(e.i)}tu.prototype.cancel=function(){if(this.i=lu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var cu=class{stringify(e){return wo.JSON.stringify(e,void 0)}parse(e){return wo.JSON.parse(e,void 0)}};function uu(){this.g=new cu}function hu(e,t,n){const i=n||"";try{Ac(e,(function(e,n){let r=e;ko(e)&&(r=Cl(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function du(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(g){}}function fu(e){this.l=e.ec||null,this.j=e.ob||!1}function pu(e,t){xl.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=mu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}No(fu,oc),fu.prototype.g=function(){return new pu(this.l,this.j)},fu.prototype.i=function(e){return function(){return e}}({}),No(pu,xl);var mu=0;function gu(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function yu(e){e.readyState=4,e.l=null,e.j=null,e.A=null,vu(e)}function vu(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(go=pu.prototype).open=function(e,t){if(this.readyState!=mu)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,vu(this)},go.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||wo).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},go.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yu(this)),this.readyState=mu},go.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,vu(this)),this.g&&(this.readyState=3,vu(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof wo.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gu(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},go.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?yu(this):vu(this),3==this.readyState&&gu(this)}},go.Za=function(e){this.g&&(this.response=this.responseText=e,yu(this))},go.Ya=function(e){this.g&&(this.response=e,yu(this))},go.ka=function(){this.g&&yu(this)},go.setRequestHeader=function(e,t){this.v.append(e,t)},go.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},go.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(pu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var bu=wo.JSON.parse;function wu(e){xl.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=_u,this.L=this.M=!1}No(wu,xl);var _u="",ku=/^https?$/i,Eu=["POST","PUT"];function Su(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,xu(e),Iu(e)}function xu(e){e.F||(e.F=!0,Tl(e,"complete"),Tl(e,"error"))}function Tu(e){if(e.h&&"undefined"!=typeof bo&&(!e.C[1]||4!=Nu(e)||2!=e.da()))if(e.v&&4==Nu(e))Vl(e.La,0,e);else if(Tl(e,"readystatechange"),4==Nu(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(Oc)[1]||null;!i&&wo.self&&wo.self.location&&(i=wo.self.location.protocol.slice(0,-1)),r=!ku.test(i?i.toLowerCase():"")}n=r}if(n)Tl(e,"complete"),Tl(e,"success");else{e.m=6;try{var a=2<Nu(e)?e.g.statusText:""}catch(s){a=""}e.j=a+" ["+e.da()+"]",xu(e)}}finally{Iu(e)}}}function Iu(e,t){if(e.g){Cu(e);const n=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Tl(e,"ready");try{n.onreadystatechange=i}catch(r){}}}function Cu(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(wo.clearTimeout(e.A),e.A=null)}function Nu(e){return e.g?e.g.readyState:0}function Pu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case _u:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(k){return null}}function Au(e){let t="";return al(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ou(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Au(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Uc(e,t,n))}function Ru(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ju(e){this.Ga=0,this.j=[],this.l=new Jl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ru("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ru("baseRetryDelayMs",5e3,e),this.hb=Ru("retryDelaySeedMs",1e4,e),this.eb=Ru("forwardChannelMaxRetries",2,e),this.xa=Ru("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new tu(e&&e.concurrentRequestLimit),this.Ja=new uu,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Du(e){if(Mu(e),3==e.H){var t=e.W++,n=jc(e.I);if(Uc(n,"SID",e.K),Uc(n,"RID",t),Uc(n,"TYPE","terminate"),Bu(e,n),(t=new mc(e,e.l,t)).L=2,t.A=Fc(jc(n)),n=!1,wo.navigator&&wo.navigator.sendBeacon)try{n=wo.navigator.sendBeacon(t.A.toString(),"")}catch(m){}!n&&wo.Image&&((new Image).src=t.A,n=!0),n||(t.g=$u(t.l,null),t.g.ha(t.A)),t.G=Date.now(),xc(t)}Xu(e)}function Lu(e){e.g&&(qu(e),e.g.cancel(),e.g=null)}function Mu(e){Lu(e),e.u&&(wo.clearTimeout(e.u),e.u=null),Hu(e),e.i.cancel(),e.m&&("number"===typeof e.m&&wo.clearTimeout(e.m),e.m=null)}function Uu(e){if(!ru(e.i)&&!e.m){e.m=!0;var t=e.Na;jl||Ml(),Dl||(jl(),Dl=!0),Ll.add(t,e),e.C=0}}function Fu(e,t){var n;n=t?t.m:e.W++;const r=jc(e.I);Uc(r,"SID",e.K),Uc(r,"RID",n),Uc(r,"AID",e.V),Bu(e,r),e.o&&e.s&&Ou(r,e.o,e.s),n=new mc(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Vu(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),au(e.i,n),wc(n,r,t)}function Bu(e,t){e.na&&al(e.na,(function(e,n){Uc(t,n,e)})),e.h&&Ac({},(function(e,n){Uc(t,n,e)}))}function Vu(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Io(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{hu(o,e,"req"+n+"_")}catch(H){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function zu(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;jl||Ml(),Dl||(jl(),Dl=!0),Ll.add(t,e),e.A=0}}function Ku(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ic(Io(e.Ma,e),Ju(e,e.A)),e.A++,!0)}function qu(e){null!=e.B&&(wo.clearTimeout(e.B),e.B=null)}function Wu(e){e.g=new mc(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=jc(e.wa);Uc(t,"RID","rpc"),Uc(t,"SID",e.K),Uc(t,"AID",e.V),Uc(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Uc(t,"TO",e.qa),Uc(t,"TYPE","xmlhttp"),Bu(e,t),e.o&&e.s&&Ou(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Fc(jc(t)),n.u=null,n.S=!0,_c(n,e)}function Hu(e){null!=e.v&&(wo.clearTimeout(e.v),e.v=null)}function Gu(e,t){var n=null;if(e.g==t){Hu(e),qu(e),e.g=null;var r=2}else{if(!su(e.i,t))return;n=t.F,ou(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Tl(r=$l(),new rc(r,n)),Uu(e)}else zu(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(iu(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ic(Io(e.Na,e,t),Ju(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ku(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Qu(e,5);break;case 4:Qu(e,10);break;case 3:Qu(e,6);break;default:Qu(e,2)}}function Ju(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Qu(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Io(e.pb,e);n||(n=new Rc("//www.google.com/images/cleardot.gif"),wo.location&&"http"==wo.location.protocol||Dc(n,"https"),Fc(n)),function(e,t){const n=new Jl;if(wo.Image){const r=new Image;r.onload=Co(du,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Co(du,n,r,"TestLoadImage: error",!1,t),r.onabort=Co(du,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Co(du,n,r,"TestLoadImage: timeout",!1,t),wo.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else nc(2);e.H=0,e.h&&e.h.za(t),Xu(e),Mu(e)}function Xu(e){if(e.H=0,e.ma=[],e.h){const t=lu(e.i);0==t.length&&0==e.j.length||(Ro(e.ma,t),Ro(e.ma,e.j),e.i.i.length=0,Oo(e.j),e.j.length=0),e.h.ya()}}function Yu(e,t,n){var r=n instanceof Rc?jc(n):new Rc(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Lc(r,r.m);else{var i=wo.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Rc(null);r&&Dc(s,r),t&&(s.g=t),i&&Lc(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Uc(r,n,t),Uc(r,"VER",e.ra),Bu(e,r),r}function $u(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new wu(new fu({ob:n})):new wu(e.va)).Oa(e.J),t}function Zu(){}function eh(){if(Ko&&!(10<=Number(Zo)))throw Error("Environmental error: no available transport.")}function th(e,t){xl.call(this),this.g=new ju(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Lo(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Lo(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ih(this)}function nh(e){dc.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function rh(){fc.call(this),this.status=1}function ih(e){this.g=e}function sh(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ah(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function oh(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(go=wu.prototype).Oa=function(e){this.M=e},go.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():uc.g(),this.C=this.u?lc(this.u):lc(uc),this.g.onreadystatechange=Io(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(g){return void Su(this,g)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=wo.FormData&&e instanceof wo.FormData,!(0<=Ao(Eu,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Cu(this),0<this.B&&((this.L=function(e){return Ko&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Io(this.ua,this)):this.A=Vl(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(g){Su(this,g)}},go.ua=function(){"undefined"!=typeof bo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tl(this,"timeout"),this.abort(8))},go.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Tl(this,"complete"),Tl(this,"abort"),Iu(this))},go.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Iu(this,!0)),wu.$.N.call(this)},go.La=function(){this.s||(this.G||this.v||this.l?Tu(this):this.kb())},go.kb=function(){Tu(this)},go.isActive=function(){return!!this.g},go.da=function(){try{return 2<Nu(this)?this.g.status:-1}catch(u){return-1}},go.ja=function(){try{return this.g?this.g.responseText:""}catch(u){return""}},go.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),bu(t)}},go.Ia=function(){return this.m},go.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(go=ju.prototype).ra=8,go.H=1,go.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new mc(this,this.l,e);let s=this.s;if(this.U&&(s?(s=ol(s),cl(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Vu(this,i,t),Uc(n=jc(this.I),"RID",e),Uc(n,"CVER",22),this.F&&Uc(n,"X-HTTP-Session-Id",this.F),Bu(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Au(s)))+"&"+t:this.o&&Ou(n,this.o,s)),au(this.i,i),this.bb&&Uc(n,"TYPE","init"),this.P?(Uc(n,"$req",t),Uc(n,"SID","null"),i.aa=!0,wc(i,n,null)):wc(i,n,t),this.H=2}}else 3==this.H&&(e?Fu(this,e):0==this.j.length||ru(this.i)||Fu(this))},go.Ma=function(){if(this.u=null,Wu(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ic(Io(this.jb,this),e)}},go.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,nc(10),Lu(this),Wu(this))},go.ib=function(){null!=this.v&&(this.v=null,Lu(this),Ku(this),nc(19))},go.pb=function(e){e?(this.l.info("Successfully pinged google.com"),nc(2)):(this.l.info("Failed to ping google.com"),nc(1))},go.isActive=function(){return!!this.h&&this.h.isActive(this)},(go=Zu.prototype).Ba=function(){},go.Aa=function(){},go.za=function(){},go.ya=function(){},go.isActive=function(){return!0},go.Va=function(){},eh.prototype.g=function(e,t){return new th(e,t)},No(th,xl),th.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;nc(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Yu(e,null,e.Y),Uu(e)},th.prototype.close=function(){Du(this.g)},th.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Cl(e),e=n);t.j.push(new eu(t.fb++,e)),3==t.H&&Uu(t)},th.prototype.N=function(){this.g.h=null,delete this.j,Du(this.g),delete this.g,th.$.N.call(this)},No(nh,dc),No(rh,fc),No(ih,Zu),ih.prototype.Ba=function(){Tl(this.g,"a")},ih.prototype.Aa=function(e){Tl(this.g,new nh(e))},ih.prototype.za=function(e){Tl(this.g,new rh)},ih.prototype.ya=function(){Tl(this.g,"b")},No(sh,(function(){this.blockSize=-1})),sh.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},sh.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)ah(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){ah(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){ah(this,r),i=0;break}}this.h=i,this.i+=t},sh.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var lh={};function ch(e){return-128<=e&&128>e?function(e,t){var n=lh;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new oh([0|e],0>e?-1:0)})):new oh([0|e],0>e?-1:0)}function uh(e){if(isNaN(e)||!isFinite(e))return dh;if(0>e)return yh(uh(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=hh;return new oh(t,0)}var hh=4294967296,dh=ch(0),fh=ch(1),ph=ch(16777216);function mh(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function gh(e){return-1==e.h}function yh(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new oh(n,~e.h).add(fh)}function vh(e,t){return e.add(yh(t))}function bh(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function wh(e,t){this.g=e,this.h=t}function _h(e,t){if(mh(t))throw Error("division by zero");if(mh(e))return new wh(dh,dh);if(gh(e))return t=_h(yh(e),t),new wh(yh(t.g),yh(t.h));if(gh(t))return t=_h(e,yh(t)),new wh(yh(t.g),t.h);if(30<e.g.length){if(gh(e)||gh(t))throw Error("slowDivide_ only works with positive integers.");for(var n=fh,r=t;0>=r.X(e);)n=kh(n),r=kh(r);var i=Eh(n,1),s=Eh(r,1);for(r=Eh(r,2),n=Eh(n,2);!mh(r);){var a=s.add(r);0>=a.X(e)&&(i=i.add(n),s=a),r=Eh(r,1),n=Eh(n,1)}return t=vh(e,i.R(t)),new wh(i,t)}for(i=dh;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(s=uh(n)).R(t);gh(a)||0<a.X(e);)a=(s=uh(n-=r)).R(t);mh(s)&&(s=fh),i=i.add(s),e=vh(e,a)}return new wh(i,e)}function kh(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new oh(n,e.h)}function Eh(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new oh(i,e.h)}(go=oh.prototype).ea=function(){if(gh(this))return-yh(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:hh+r)*t,t*=hh}return e},go.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(mh(this))return"0";if(gh(this))return"-"+yh(this).toString(e);for(var t=uh(Math.pow(e,6)),n=this,r="";;){var i=_h(n,t).g,s=((0<(n=vh(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(mh(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},go.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},go.X=function(e){return gh(e=vh(this,e))?-1:mh(e)?0:1},go.abs=function(){return gh(this)?yh(this):this},go.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),a=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=a>>>16,s&=65535,a&=65535,n[i]=a<<16|s}return new oh(n,-2147483648&n[n.length-1]?-1:0)},go.R=function(e){if(mh(this)||mh(e))return dh;if(gh(this))return gh(e)?yh(this).R(yh(e)):yh(yh(this).R(e));if(gh(e))return yh(this.R(yh(e)));if(0>this.X(ph)&&0>e.X(ph))return uh(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,a=65535&this.D(r),o=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=a*l,bh(n,2*r+2*i),n[2*r+2*i+1]+=s*l,bh(n,2*r+2*i+1),n[2*r+2*i+1]+=a*o,bh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*o,bh(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new oh(n,0)},go.gb=function(e){return _h(this,e).h},go.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new oh(n,this.h&e.h)},go.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new oh(n,this.h|e.h)},go.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new oh(n,this.h^e.h)},eh.prototype.createWebChannel=eh.prototype.g,th.prototype.send=th.prototype.u,th.prototype.open=th.prototype.m,th.prototype.close=th.prototype.close,sc.NO_ERROR=0,sc.TIMEOUT=8,sc.HTTP_ERROR=6,ac.COMPLETE="complete",cc.EventType=hc,hc.OPEN="a",hc.CLOSE="b",hc.ERROR="c",hc.MESSAGE="d",xl.prototype.listen=xl.prototype.O,wu.prototype.listenOnce=wu.prototype.P,wu.prototype.getLastError=wu.prototype.Sa,wu.prototype.getLastErrorCode=wu.prototype.Ia,wu.prototype.getStatus=wu.prototype.da,wu.prototype.getResponseJson=wu.prototype.Wa,wu.prototype.getResponseText=wu.prototype.ja,wu.prototype.send=wu.prototype.ha,wu.prototype.setWithCredentials=wu.prototype.Oa,sh.prototype.digest=sh.prototype.l,sh.prototype.reset=sh.prototype.reset,sh.prototype.update=sh.prototype.j,oh.prototype.add=oh.prototype.add,oh.prototype.multiply=oh.prototype.R,oh.prototype.modulo=oh.prototype.gb,oh.prototype.compare=oh.prototype.X,oh.prototype.toNumber=oh.prototype.ea,oh.prototype.toString=oh.prototype.toString,oh.prototype.getBits=oh.prototype.D,oh.fromNumber=uh,oh.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return yh(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=uh(Math.pow(n,8)),i=dh,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+a),n);8>a?(a=uh(Math.pow(n,a)),i=i.R(a).add(uh(o))):i=(i=i.R(r)).add(uh(o))}return i};var Sh=vo.createWebChannelTransport=function(){return new eh},xh=vo.getStatEventTarget=function(){return $l()},Th=vo.ErrorCode=sc,Ih=vo.EventType=ac,Ch=vo.Event=Xl,Nh=vo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ph=(vo.FetchXmlHttpFactory=fu,vo.WebChannel=cc),Ah=vo.XhrIo=wu,Oh=(vo.Md5=sh,vo.Integer=oh);const Rh="@firebase/firestore";class jh{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jh.UNAUTHENTICATED=new jh(null),jh.GOOGLE_CREDENTIALS=new jh("google-credentials-uid"),jh.FIRST_PARTY=new jh("first-party-uid"),jh.MOCK_USER=new jh("mock-user");let Dh="10.8.0";const Lh=new ka("@firebase/firestore");function Mh(){return Lh.logLevel}function Uh(e){if(Lh.logLevel<=ya.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vh);Lh.debug("Firestore (".concat(Dh,"): ").concat(e),...i)}}function Fh(e){if(Lh.logLevel<=ya.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vh);Lh.error("Firestore (".concat(Dh,"): ").concat(e),...i)}}function Bh(e){if(Lh.logLevel<=ya.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vh);Lh.warn("Firestore (".concat(Dh,"): ").concat(e),...i)}}function Vh(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(i){return e}}function zh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Dh,") INTERNAL ASSERTION FAILED: ")+e;throw Fh(t),new Error(t)}function Kh(e,t){e||zh()}function qh(e,t){return e}const Wh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Hh extends ta{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Gh{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Jh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Qh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(jh.UNAUTHENTICATED)))}shutdown(){}}class Xh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Yh{constructor(e){this.t=e,this.currentUser=jh.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Gh;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Gh,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{Uh("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Uh("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Gh)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Uh("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Kh("string"==typeof t.accessToken),new Jh(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Kh(null===e||"string"==typeof e),new jh(e)}}class $h{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=jh.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Zh{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new $h(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(jh.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ed{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class td{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Uh("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Uh("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Uh("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Uh("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Kh("string"==typeof e.token),this.R=e.token,new ed(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nd(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class rd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=nd(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function id(e,t){return e<t?-1:e>t?1:0}function sd(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class ad{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Hh(Wh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Hh(Wh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Hh(Wh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Hh(Wh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ad.fromMillis(Date.now())}static fromDate(e){return ad.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ad(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?id(this.nanoseconds,e.nanoseconds):id(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class od{constructor(e){this.timestamp=e}static fromTimestamp(e){return new od(e)}static min(){return new od(new ad(0,0))}static max(){return new od(new ad(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ld{constructor(e,t,n){void 0===t?t=0:t>e.length&&zh(),void 0===n?n=e.length-t:n>e.length-t&&zh(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ld.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ld?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cd extends ld{construct(e,t,n){return new cd(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Hh(Wh.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new cd(e)}static emptyPath(){return new cd([])}}const ud=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hd extends ld{construct(e,t,n){return new hd(e,t,n)}static isValidIdentifier(e){return ud.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hd.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hd(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Hh(Wh.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Hh(Wh.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Hh(Wh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Hh(Wh.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hd(t)}static emptyPath(){return new hd([])}}class dd{constructor(e){this.path=e}static fromPath(e){return new dd(cd.fromString(e))}static fromName(e){return new dd(cd.fromString(e).popFirst(5))}static empty(){return new dd(cd.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cd.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cd.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dd(new cd(e.slice()))}}class fd{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}fd.UNKNOWN_ID=-1;function pd(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=od.fromTimestamp(1e9===r?new ad(n+1,0):new ad(n,r));return new gd(i,dd.empty(),t)}function md(e){return new gd(e.readTime,e.key,-1)}class gd{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new gd(od.min(),dd.empty(),-1)}static max(){return new gd(od.max(),dd.empty(),-1)}}function yd(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=dd.comparator(e.documentKey,t.documentKey),0!==n?n:id(e.largestBatchId,t.largestBatchId))}const vd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function wd(e){if(e.code!==Wh.FAILED_PRECONDITION||e.message!==vd)throw e;Uh("LocalStore","Unexpectedly lost primary lease")}class _d{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&zh(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _d(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof _d?t:_d.resolve(t)}catch(e){return _d.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):_d.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):_d.reject(t)}static resolve(e){return new _d(((t,n)=>{t(e)}))}static reject(e){return new _d(((t,n)=>{n(e)}))}static waitFor(e){return new _d(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=_d.resolve(!1);for(const n of e)t=t.next((e=>e?_d.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new _d(((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next((e=>{s[l]=e,++a,a===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new _d(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class kd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Gh,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new xd(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Pd(t.target.error);this.V.reject(new xd(e,n))}}static open(e,t,n,r){try{return new kd(t,e.transaction(r,n))}catch(e){throw new xd(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Uh("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Id(t)}}class Ed{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Ed.S($s())&&Fh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Uh("SimpleDb","Removing database:",e),Cd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ea())return!1;if(Ed.C())return!0;const e=$s(),t=Ed.S(e),n=0<t&&t<10,r=Ed.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Uh("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new xd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Hh(Wh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Hh(Wh.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new xd(e,r))},r.onupgradeneeded=e=>{Uh("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Uh("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=kd.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),_d.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Uh("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Sd{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Cd(this.k.delete())}}class xd extends Hh{constructor(e,t){super(Wh.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Td(e){return"IndexedDbTransactionError"===e.name}class Id{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Uh("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Uh("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Cd(n)}add(e){return Uh("SimpleDb","ADD",this.store.name,e,e),Cd(this.store.add(e))}get(e){return Cd(this.store.get(e)).next((t=>(void 0===t&&(t=null),Uh("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Uh("SimpleDb","DELETE",this.store.name,e),Cd(this.store.delete(e))}count(){return Uh("SimpleDb","COUNT",this.store.name),Cd(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new _d(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new _d(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Uh("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new _d(((n,r)=>{t.onerror=e=>{const t=Pd(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new _d(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Sd(i),a=t(i.primaryKey,i.value,s);if(a instanceof _d){const e=a.catch((e=>(s.done(),_d.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>_d.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cd(e){return new _d(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Pd(e.target.error);n(t)}}))}let Nd=!1;function Pd(e){const t=Ed.S($s());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Hh("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Nd||(Nd=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Ad{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Od(e){return null==e}function Rd(e){return 0===e&&1/e==-1/0}function jd(e){return"number"==typeof e&&Number.isInteger(e)&&!Rd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Ad._e=-1;const Dd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ld=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Md=Ld;function Ud(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fd(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Bd(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Vd{constructor(e,t){this.comparator=e,this.root=t||Kd.EMPTY}insert(e,t){return new Vd(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kd.BLACK,null,null))}remove(e){return new Vd(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kd.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zd(this.root,e,this.comparator,!1)}getReverseIterator(){return new zd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zd(this.root,e,this.comparator,!0)}}class zd{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kd{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Kd.RED,this.left=null!=r?r:Kd.EMPTY,this.right=null!=i?i:Kd.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Kd(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Kd.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Kd.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kd.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kd.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zh();if(this.right.isRed())throw zh();const e=this.left.check();if(e!==this.right.check())throw zh();return e+(this.isRed()?0:1)}}Kd.EMPTY=null,Kd.RED=!0,Kd.BLACK=!1,Kd.EMPTY=new class{constructor(){this.size=0}get key(){throw zh()}get value(){throw zh()}get color(){throw zh()}get left(){throw zh()}get right(){throw zh()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Kd(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qd{constructor(e){this.comparator=e,this.data=new Vd(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wd(this.data.getIterator())}getIteratorFrom(e){return new Wd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof qd))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new qd(this.comparator);return t.data=e,t}}class Wd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Hd{constructor(e){this.fields=e,e.sort(hd.comparator)}static empty(){return new Hd([])}unionWith(e){let t=new qd(hd.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Hd(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sd(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Gd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Jd{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Gd("Invalid base64 string: "+e):e}}(e);return new Jd(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Jd(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return id(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jd.EMPTY_BYTE_STRING=new Jd("");const Qd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xd(e){if(Kh(!!e),"string"==typeof e){let t=0;const n=Qd.exec(e);if(Kh(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Yd(e.seconds),nanos:Yd(e.nanos)}}function Yd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function $d(e){return"string"==typeof e?Jd.fromBase64String(e):Jd.fromUint8Array(e)}function Zd(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ef(e){const t=e.mapValue.fields.__previous_value__;return Zd(t)?ef(t):t}function tf(e){const t=Xd(e.mapValue.fields.__local_write_time__.timestampValue);return new ad(t.seconds,t.nanos)}class nf{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class rf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof rf&&e.projectId===this.projectId&&e.database===this.database}}const sf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function af(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zd(e)?4:yf(e)?9007199254740991:10:zh()}function of(e,t){if(e===t)return!0;const n=af(e);if(n!==af(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return tf(e).isEqual(tf(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Xd(e.timestampValue),r=Xd(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return $d(e.bytesValue).isEqual($d(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yd(e.geoPointValue.latitude)===Yd(t.geoPointValue.latitude)&&Yd(e.geoPointValue.longitude)===Yd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yd(e.integerValue)===Yd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Yd(e.doubleValue),r=Yd(t.doubleValue);return n===r?Rd(n)===Rd(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return sd(e.arrayValue.values||[],t.arrayValue.values||[],of);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ud(n)!==Ud(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!of(n[i],r[i])))return!1;return!0}(e,t);default:return zh()}}function lf(e,t){return void 0!==(e.values||[]).find((e=>of(e,t)))}function cf(e,t){if(e===t)return 0;const n=af(e),r=af(t);if(n!==r)return id(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return id(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Yd(e.integerValue||e.doubleValue),r=Yd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return uf(e.timestampValue,t.timestampValue);case 4:return uf(tf(e),tf(t));case 5:return id(e.stringValue,t.stringValue);case 6:return function(e,t){const n=$d(e),r=$d(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=id(n[i],r[i]);if(0!==e)return e}return id(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=id(Yd(e.latitude),Yd(t.latitude));return 0!==n?n:id(Yd(e.longitude),Yd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=cf(n[i],r[i]);if(e)return e}return id(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===sf.mapValue&&t===sf.mapValue)return 0;if(e===sf.mapValue)return 1;if(t===sf.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=id(r[a],s[a]);if(0!==e)return e;const t=cf(n[r[a]],i[s[a]]);if(0!==t)return t}return id(r.length,s.length)}(e.mapValue,t.mapValue);default:throw zh()}}function uf(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return id(e,t);const n=Xd(e),r=Xd(t),i=id(n.seconds,r.seconds);return 0!==i?i:id(n.nanos,r.nanos)}function hf(e){return df(e)}function df(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Xd(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return $d(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return dd.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=df(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(df(e.fields[i]));return n+"}"}(e.mapValue):zh()}function ff(e){return!!e&&"integerValue"in e}function pf(e){return!!e&&"arrayValue"in e}function mf(e){return!!e&&"mapValue"in e}function gf(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Fd(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=gf(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=gf(e.arrayValue.values[n]);return t}return Object.assign({},e)}function yf(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class vf{constructor(e){this.value=e}static empty(){return new vf({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gf(t)}setAll(e){let t=hd.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=gf(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return of(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];mf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Fd(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new vf(gf(this.value))}}function bf(e){const t=[];return Fd(e.fields,((e,n)=>{const r=new hd([e]);if(mf(n)){const e=bf(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Hd(t)}class wf{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new wf(e,0,od.min(),od.min(),od.min(),vf.empty(),0)}static newFoundDocument(e,t,n,r){return new wf(e,1,t,od.min(),n,r,0)}static newNoDocument(e,t){return new wf(e,2,t,od.min(),od.min(),vf.empty(),0)}static newUnknownDocument(e,t){return new wf(e,3,t,od.min(),od.min(),vf.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(od.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vf.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vf.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=od.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wf&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wf(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class _f{constructor(e,t){this.position=e,this.inclusive=t}}function kf(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?dd.comparator(dd.fromName(a.referenceValue),n.key):cf(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Ef(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!of(e.position[n],t.position[n]))return!1;return!0}class Sf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function xf(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Tf{}class If extends Tf{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Df(e,t,n):"array-contains"===t?new Ff(e,n):"in"===t?new Bf(e,n):"not-in"===t?new Vf(e,n):"array-contains-any"===t?new zf(e,n):new If(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Lf(e,n):new Mf(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(cf(t,this.value)):null!==t&&af(this.value)===af(t)&&this.matchesComparison(cf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zh()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cf extends Tf{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Cf(e,t)}matches(e){return Nf(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Nf(e){return"and"===e.op}function Pf(e){return Af(e)&&Nf(e)}function Af(e){for(const t of e.filters)if(t instanceof Cf)return!1;return!0}function Of(e){if(e instanceof If)return e.field.canonicalString()+e.op.toString()+hf(e.value);if(Pf(e))return e.filters.map((e=>Of(e))).join(",");{const t=e.filters.map((e=>Of(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Rf(e,t){return e instanceof If?function(e,t){return t instanceof If&&e.op===t.op&&e.field.isEqual(t.field)&&of(e.value,t.value)}(e,t):e instanceof Cf?function(e,t){return t instanceof Cf&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Rf(n,t.filters[r])),!0)}(e,t):void zh()}function jf(e){return e instanceof If?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(hf(e.value))}(e):e instanceof Cf?function(e){return e.op.toString()+" {"+e.getFilters().map(jf).join(" ,")+"}"}(e):"Filter"}class Df extends If{constructor(e,t,n){super(e,t,n),this.key=dd.fromName(n.referenceValue)}matches(e){const t=dd.comparator(e.key,this.key);return this.matchesComparison(t)}}class Lf extends If{constructor(e,t){super(e,"in",t),this.keys=Uf("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Mf extends If{constructor(e,t){super(e,"not-in",t),this.keys=Uf("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Uf(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>dd.fromName(e.referenceValue)))}class Ff extends If{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pf(t)&&lf(t.arrayValue,this.value)}}class Bf extends If{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&lf(this.value.arrayValue,t)}}class Vf extends If{constructor(e,t){super(e,"not-in",t)}matches(e){if(lf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!lf(this.value.arrayValue,t)}}class zf extends If{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>lf(this.value.arrayValue,e)))}}class Kf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ce=null}}function qf(e){return new Kf(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Wf(e){const t=qh(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Of(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Od(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>hf(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>hf(e))).join(",")),t.ce=e}return t.ce}function Hf(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!xf(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Rf(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ef(e.startAt,t.startAt)&&Ef(e.endAt,t.endAt)}class Gf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Jf(e,t,n,r,i,s,a,o){return new Gf(e,t,n,r,i,s,a,o)}function Qf(e){return new Gf(e)}function Xf(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Yf(e){return null!==e.collectionGroup}function $f(e){const t=qh(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new qd(hd.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Sf(r,n))})),e.has(hd.keyField().canonicalString())||t.le.push(new Sf(hd.keyField(),n))}return t.le}function Zf(e){const t=qh(e);return t.he||(t.he=ep(t,$f(e))),t.he}function ep(e,t){if("F"===e.limitType)return qf(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Sf(e.field,t)}));const n=e.endAt?new _f(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new _f(e.startAt.position,e.startAt.inclusive):null;return qf(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function tp(e,t,n){return new Gf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function np(e,t){return Hf(Zf(e),Zf(t))&&e.limitType===t.limitType}function rp(e){return"".concat(Wf(Zf(e)),"|lt:").concat(e.limitType)}function ip(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>jf(e))).join(", "),"]")),Od(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>hf(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>hf(e))).join(",")),"Target(".concat(t,")")}(Zf(e)),"; limitType=").concat(e.limitType,")")}function sp(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):dd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of $f(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=kf(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,$f(e),t))&&!(e.endAt&&!function(e,t,n){const r=kf(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,$f(e),t))}(e,t)}function ap(e){return(t,n)=>{let r=!1;for(const i of $f(e)){const e=op(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function op(e,t,n){const r=e.field.isKeyField()?dd.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?cf(r,i):zh()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return zh()}}class lp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fd(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Bd(this.inner)}size(){return this.innerSize}}const cp=new Vd(dd.comparator);function up(){return cp}const hp=new Vd(dd.comparator);function dp(){let e=hp;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function fp(e){let t=hp;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function pp(){return gp()}function mp(){return gp()}function gp(){return new lp((e=>e.toString()),((e,t)=>e.isEqual(t)))}const yp=new Vd(dd.comparator),vp=new qd(dd.comparator);function bp(){let e=vp;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const wp=new qd(id);function _p(){return wp}function kp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(t)?"-0":t}}function Ep(e){return{integerValue:""+e}}function Sp(e,t){return jd(t)?Ep(t):kp(e,t)}class xp{constructor(){this._=void 0}}function Tp(e,t,n){return e instanceof Np?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Zd(t)&&(t=ef(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Pp?Ap(e,t):e instanceof Op?Rp(e,t):function(e,t){const n=Cp(e,t),r=Dp(n)+Dp(e.Ie);return ff(n)&&ff(e.Ie)?Ep(r):kp(e.serializer,r)}(e,t)}function Ip(e,t,n){return e instanceof Pp?Ap(e,t):e instanceof Op?Rp(e,t):n}function Cp(e,t){return e instanceof jp?function(e){return ff(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Np extends xp{}class Pp extends xp{constructor(e){super(),this.elements=e}}function Ap(e,t){const n=Lp(t);for(const r of e.elements)n.some((e=>of(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Op extends xp{constructor(e){super(),this.elements=e}}function Rp(e,t){let n=Lp(t);for(const r of e.elements)n=n.filter((e=>!of(e,r)));return{arrayValue:{values:n}}}class jp extends xp{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Dp(e){return Yd(e.integerValue||e.doubleValue)}function Lp(e){return pf(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Mp{constructor(e,t){this.version=e,this.transformResults=t}}class Up{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Up}static exists(e){return new Up(void 0,e)}static updateTime(e){return new Up(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Bp{}function Vp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yp(e.key,Up.none()):new Hp(e.key,e.data,Up.none());{const n=e.data,r=vf.empty();let i=new qd(hd.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Gp(e.key,r,new Hd(i.toArray()),Up.none())}}function zp(e,t,n){e instanceof Hp?function(e,t,n){const r=e.value.clone(),i=Qp(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Gp?function(e,t,n){if(!Fp(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Qp(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Jp(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Kp(e,t,n,r){return e instanceof Hp?function(e,t,n,r){if(!Fp(e.precondition,t))return n;const i=e.value.clone(),s=Xp(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Gp?function(e,t,n,r){if(!Fp(e.precondition,t))return n;const i=Xp(e.fieldTransforms,r,t),s=t.data;return s.setAll(Jp(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Fp(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function qp(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Cp(r.transform,e||null);null!=i&&(null===n&&(n=vf.empty()),n.set(r.field,i))}return n||null}function Wp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&sd(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Pp&&t instanceof Pp||e instanceof Op&&t instanceof Op?sd(e.elements,t.elements,of):e instanceof jp&&t instanceof jp?of(e.Ie,t.Ie):e instanceof Np&&t instanceof Np}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Hp extends Bp{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Gp extends Bp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Jp(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Qp(e,t,n){const r=new Map;Kh(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Ip(a,o,n[i]))}return r}function Xp(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Tp(e,s,t))}return r}class Yp extends Bp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $p extends Bp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Zp{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&zp(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Kp(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Kp(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=mp();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Vp(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(od.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),bp())}isEqual(e){return this.batchId===e.batchId&&sd(this.mutations,e.mutations,((e,t)=>Wp(e,t)))&&sd(this.baseMutations,e.baseMutations,((e,t)=>Wp(e,t)))}}class em{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Kh(e.mutations.length===n.length);let r=yp;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new em(e,t,n,r)}}class tm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}var nm,rm;function im(e){switch(e){default:return zh();case Wh.CANCELLED:case Wh.UNKNOWN:case Wh.DEADLINE_EXCEEDED:case Wh.RESOURCE_EXHAUSTED:case Wh.INTERNAL:case Wh.UNAVAILABLE:case Wh.UNAUTHENTICATED:return!1;case Wh.INVALID_ARGUMENT:case Wh.NOT_FOUND:case Wh.ALREADY_EXISTS:case Wh.PERMISSION_DENIED:case Wh.FAILED_PRECONDITION:case Wh.ABORTED:case Wh.OUT_OF_RANGE:case Wh.UNIMPLEMENTED:case Wh.DATA_LOSS:return!0}}function sm(e){if(void 0===e)return Fh("GRPC error has no .code"),Wh.UNKNOWN;switch(e){case nm.OK:return Wh.OK;case nm.CANCELLED:return Wh.CANCELLED;case nm.UNKNOWN:return Wh.UNKNOWN;case nm.DEADLINE_EXCEEDED:return Wh.DEADLINE_EXCEEDED;case nm.RESOURCE_EXHAUSTED:return Wh.RESOURCE_EXHAUSTED;case nm.INTERNAL:return Wh.INTERNAL;case nm.UNAVAILABLE:return Wh.UNAVAILABLE;case nm.UNAUTHENTICATED:return Wh.UNAUTHENTICATED;case nm.INVALID_ARGUMENT:return Wh.INVALID_ARGUMENT;case nm.NOT_FOUND:return Wh.NOT_FOUND;case nm.ALREADY_EXISTS:return Wh.ALREADY_EXISTS;case nm.PERMISSION_DENIED:return Wh.PERMISSION_DENIED;case nm.FAILED_PRECONDITION:return Wh.FAILED_PRECONDITION;case nm.ABORTED:return Wh.ABORTED;case nm.OUT_OF_RANGE:return Wh.OUT_OF_RANGE;case nm.UNIMPLEMENTED:return Wh.UNIMPLEMENTED;case nm.DATA_LOSS:return Wh.DATA_LOSS;default:return zh()}}(rm=nm||(nm={}))[rm.OK=0]="OK",rm[rm.CANCELLED=1]="CANCELLED",rm[rm.UNKNOWN=2]="UNKNOWN",rm[rm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rm[rm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rm[rm.NOT_FOUND=5]="NOT_FOUND",rm[rm.ALREADY_EXISTS=6]="ALREADY_EXISTS",rm[rm.PERMISSION_DENIED=7]="PERMISSION_DENIED",rm[rm.UNAUTHENTICATED=16]="UNAUTHENTICATED",rm[rm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rm[rm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rm[rm.ABORTED=10]="ABORTED",rm[rm.OUT_OF_RANGE=11]="OUT_OF_RANGE",rm[rm.UNIMPLEMENTED=12]="UNIMPLEMENTED",rm[rm.INTERNAL=13]="INTERNAL",rm[rm.UNAVAILABLE=14]="UNAVAILABLE",rm[rm.DATA_LOSS=15]="DATA_LOSS";new Oh([4294967295,4294967295],0);Error;class am{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function om(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function lm(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function cm(e,t){return om(e,t.toTimestamp())}function um(e){return Kh(!!e),od.fromTimestamp(function(e){const t=Xd(e);return new ad(t.seconds,t.nanos)}(e))}function hm(e,t){return dm(e,t).canonicalString()}function dm(e,t){const n=function(e){return new cd(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function fm(e){const t=cd.fromString(e);return Kh(Sm(t)),t}function pm(e,t){return hm(e.databaseId,t.path)}function mm(e){const t=fm(e);return 4===t.length?cd.emptyPath():ym(t)}function gm(e){return new cd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ym(e){return Kh(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function vm(e,t,n){return{name:pm(e,t),fields:n.value.mapValue.fields}}function bm(e,t){let n;if(t instanceof Hp)n={update:vm(e,t.key,t.value)};else if(t instanceof Yp)n={delete:pm(e,t.key)};else if(t instanceof Gp)n={update:vm(e,t.key,t.data),updateMask:Em(t.fieldMask)};else{if(!(t instanceof $p))return zh();n={verify:pm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Np)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Pp)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Op)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jp)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw zh()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:cm(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:zh()}(e,t.precondition)),n}function wm(e){let t=mm(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Kh(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=_m(e);return t instanceof Cf&&Pf(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new Sf(km(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Od(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new _f(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new _f(n,t)}(n.endAt)),Jf(t,i,a,s,o,"F",l,c)}function _m(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=km(e.unaryFilter.field);return If.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=km(e.unaryFilter.field);return If.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=km(e.unaryFilter.field);return If.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=km(e.unaryFilter.field);return If.create(i,"!=",{nullValue:"NULL_VALUE"});default:return zh()}}(e):void 0!==e.fieldFilter?function(e){return If.create(km(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zh()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Cf.create(e.compositeFilter.filters.map((e=>_m(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return zh()}}(e.compositeFilter.op))}(e):zh()}function km(e){return hd.fromServerFormat(e.fieldPath)}function Em(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Sm(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class xm{constructor(e){this.ct=e}}function Tm(e){const t=wm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?tp(t,t.limit,"L"):t}class Im{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Yd(e.integerValue));else if("doubleValue"in e){const n=Yd(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Rd(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft($d(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?yf(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):zh()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),dd.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}Im.bt=new Im;class Cm{constructor(){this._n=new Nm}addToCollectionParentIndex(e,t){return this._n.add(t),_d.resolve()}getCollectionParents(e,t){return _d.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return _d.resolve()}deleteFieldIndex(e,t){return _d.resolve()}deleteAllFieldIndexes(e){return _d.resolve()}createTargetIndexes(e,t){return _d.resolve()}getDocumentsMatchingTarget(e,t){return _d.resolve(null)}getIndexType(e,t){return _d.resolve(0)}getFieldIndexes(e,t){return _d.resolve([])}getNextCollectionGroupToUpdate(e){return _d.resolve(null)}getMinOffset(e,t){return _d.resolve(gd.min())}getMinOffsetFromCollectionGroup(e,t){return _d.resolve(gd.min())}updateCollectionGroup(e,t,n){return _d.resolve()}updateIndexEntries(e,t){return _d.resolve()}}class Nm{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new qd(cd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new qd(cd.comparator)).toArray()}}new Uint8Array(0);class Pm{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Pm(e,Pm.DEFAULT_COLLECTION_PERCENTILE,Pm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Pm.DEFAULT_COLLECTION_PERCENTILE=10,Pm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pm.DEFAULT=new Pm(41943040,Pm.DEFAULT_COLLECTION_PERCENTILE,Pm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pm.DISABLED=new Pm(-1,0,0);class Am{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Am(0)}static Bn(){return new Am(-1)}}class Om{constructor(){this.changes=new lp((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wf.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?_d.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Rm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class jm{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Kp(n.mutation,e,Hd.empty(),ad.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,bp()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bp();const r=pp();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=dp();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=pp();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,bp())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=up();const s=gp(),a=gp();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Gp)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Kp(a.mutation,t,a.mutation.getFieldMask(),ad.now())):s.set(t.key,Hd.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new Rm(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=gp();let r=new Vd(((e,t)=>e-t)),i=bp();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Hd.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||bp()).add(e);r=r.insert(i.batchId,o)}))})).next((()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=mp();l.forEach((e=>{if(!i.has(e)){const r=Vp(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return _d.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return dd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Yf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):_d.resolve(pp());let a=-1,o=i;return s.next((t=>_d.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?_d.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,bp()))).next((e=>({batchId:a,changes:fp(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new dd(t)).next((e=>{let t=dp();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=dp();return this.indexManager.getCollectionParents(e,i).next((a=>_d.forEach(a,(a=>{const o=function(e,t){return new Gf(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,wf.newInvalidDocument(r)))}));let n=dp();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Kp(s.mutation,r,Hd.empty(),ad.now()),sp(t,r)&&(n=n.insert(e,r))})),n}))}}class Dm{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return _d.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:um(e.createTime)}}(t)),_d.resolve()}getNamedQuery(e,t){return _d.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Tm(e.bundledQuery),readTime:um(e.readTime)}}(t)),_d.resolve()}}class Lm{constructor(){this.overlays=new Vd(dd.comparator),this.hr=new Map}getOverlay(e,t){return _d.resolve(this.overlays.get(t))}getOverlays(e,t){const n=pp();return _d.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),_d.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),_d.resolve()}getOverlaysForCollection(e,t,n){const r=pp(),i=t.length+1,s=new dd(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return _d.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Vd(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=pp(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=pp(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return _d.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new tm(t,n));let i=this.hr.get(t);void 0===i&&(i=bp(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Mm{constructor(){this.Pr=new qd(Um.Ir),this.Tr=new qd(Um.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Um(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Um(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new dd(new cd([])),n=new Um(t,e),r=new Um(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new dd(new cd([])),n=new Um(t,e),r=new Um(t,e+1);let i=bp();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Um(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Um{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return dd.comparator(e.key,t.key)||id(e.pr,t.pr)}static Er(e,t){return id(e.pr,t.pr)||dd.comparator(e.key,t.key)}}class Fm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new qd(Um.Ir)}checkEmpty(e){return _d.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Zp(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.wr=this.wr.add(new Um(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _d.resolve(s)}lookupMutationBatch(e,t){return _d.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return _d.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return _d.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return _d.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Um(t,0),r=new Um(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),_d.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new qd(id);return t.forEach((e=>{const t=new Um(e,0),r=new Um(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),_d.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;dd.isDocumentKey(i)||(i=i.child(""));const s=new Um(new dd(i),0);let a=new qd(id);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.pr)),!0)}),s),_d.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Kh(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return _d.forEach(t.mutations,(r=>{const i=new Um(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Um(t,0),r=this.wr.firstAfterOrEqual(n);return _d.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,_d.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Bm{constructor(e){this.vr=e,this.docs=new Vd(dd.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return _d.resolve(n?n.document.mutableCopy():wf.newInvalidDocument(t))}getEntries(e,t){let n=up();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():wf.newInvalidDocument(e))})),_d.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=up();const s=t.path,a=new dd(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||yd(md(a),n)<=0||(r.has(a.key)||sp(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return _d.resolve(i)}getAllFromCollectionGroup(e,t,n,r){zh()}Fr(e,t){return _d.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Vm(this)}getSize(e){return _d.resolve(this.size)}}class Vm extends Om{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),_d.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class zm{constructor(e){this.persistence=e,this.Mr=new lp((e=>Wf(e)),Hf),this.lastRemoteSnapshotVersion=od.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Mm,this.targetCount=0,this.Br=Am.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),_d.resolve()}getLastRemoteSnapshotVersion(e){return _d.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _d.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),_d.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),_d.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Am(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,_d.resolve()}updateTargetData(e,t){return this.qn(t),_d.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,_d.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),_d.waitFor(i).next((()=>r))}getTargetCount(e){return _d.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return _d.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),_d.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),_d.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),_d.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return _d.resolve(n)}containsKey(e,t){return _d.resolve(this.Nr.containsKey(t))}}class Km{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Ad(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new zm(this),this.indexManager=new Cm,this.remoteDocumentCache=function(e){return new Bm(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new xm(t),this.$r=new Dm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new Fm(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Uh("MemoryPersistence","Starting transaction:",e);const r=new qm(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return _d.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class qm extends bd{constructor(e){super(),this.currentSequenceNumber=e}}class Wm{constructor(e){this.persistence=e,this.zr=new Mm,this.jr=null}static Hr(e){return new Wm(e)}get Jr(){if(this.jr)return this.jr;throw zh()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),_d.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),_d.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),_d.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _d.forEach(this.Jr,(n=>{const r=dd.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,od.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return _d.or([()=>_d.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Hm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=bp(),r=bp();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Hm(e,t.fromCache,n,r)}}class Gm{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Jm{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Zs()?8:Ed.v($s())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Gm;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Mh()<=ya.DEBUG&&Uh("QueryEngine","SDK will not create cache indexes for query:",ip(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),_d.resolve()):(Mh()<=ya.DEBUG&&Uh("QueryEngine","Query:",ip(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Mh()<=ya.DEBUG&&Uh("QueryEngine","The SDK decides to create cache indexes for query:",ip(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zf(t))):_d.resolve())}ji(e,t){if(Xf(t))return _d.resolve(null);let n=Zf(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=tp(t,null,"F"),n=Zf(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=bp(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,tp(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Xf(t)||r.isEqual(od.min())?_d.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?_d.resolve(null):(Mh()<=ya.DEBUG&&Uh("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ip(t)),this.es(e,s,t,pd(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new qd(ap(e));return t.forEach(((t,r)=>{sp(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Mh()<=ya.DEBUG&&Uh("QueryEngine","Using full collection scan to execute query:",ip(t)),this.zi.getDocumentsMatchingQuery(e,t,gd.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Qm{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Vd(id),this.rs=new lp((e=>Wf(e)),Hf),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Xm(e,t,n,r){return new Qm(e,t,n,r)}async function Ym(e,t){const n=qh(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let a=bp();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function $m(e){const t=qh(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Zm(e,t){const n=qh(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}class eg{constructor(){this.activeTargetIds=_p()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tg{constructor(){this.no=new eg,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new eg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ng{io(e){}shutdown(){}}class rg{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Uh("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Uh("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ig=null;function sg(){return null===ig?ig=268435456+Math.round(2147483648*Math.random()):ig++,"0x"+ig.toString(16)}const ag={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class og{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const lg="WebChannelConnection";class cg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=sg(),a=this.bo(e,t.toUriEncodedString());Uh("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(o,r,i),this.Co(e,a,o,n).then((t=>(Uh("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Bh("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Dh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=ag[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=sg();return new Promise(((s,a)=>{const o=new Ah;o.setWithCredentials(!0),o.listenOnce(Ih.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Th.NO_ERROR:const t=o.getResponseJson();Uh(lg,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Th.TIMEOUT:Uh(lg,"RPC '".concat(e,"' ").concat(i," timed out")),a(new Hh(Wh.DEADLINE_EXCEEDED,"Request time out"));break;case Th.HTTP_ERROR:const n=o.getStatus();if(Uh(lg,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Wh).indexOf(t)>=0?t:Wh.UNKNOWN}(t.status);a(new Hh(e,t.message))}else a(new Hh(Wh.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Hh(Wh.UNAVAILABLE,"Connection failed."));break;default:zh()}}finally{Uh(lg,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Uh(lg,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=sg(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Sh(),a=xh(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Do(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");Uh(lg,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);let h=!1,d=!1;const f=new og({lo:t=>{d?Uh(lg,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Uh(lg,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Uh(lg,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Ph.EventType.OPEN,(()=>{d||Uh(lg,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Ph.EventType.CLOSE,(()=>{d||(d=!0,Uh(lg,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,Ph.EventType.ERROR,(t=>{d||(d=!0,Bh(lg,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new Hh(Wh.UNAVAILABLE,"The operation could not be completed")))})),p(u,Ph.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Kh(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){Uh(lg,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=nm[e];if(void 0!==t)return sm(t)}(t),i=a.message;void 0===n&&(n=Wh.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,f.Vo(new Hh(n,i)),u.close()}else Uh(lg,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(a,Ch.STAT_EVENT,(t=>{t.stat===Nh.PROXY?Uh(lg,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Nh.NOPROXY&&Uh(lg,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function ug(){return"undefined"!=typeof document?document:null}function hg(e){return new am(e,!0)}class dg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&Uh("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class fg{constructor(e,t,n,r,i,s,a,o){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new dg(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Wh.RESOURCE_EXHAUSTED?(Fh(t.toString()),Fh("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Wh.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new Hh(Wh.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Uh("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Uh("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pg extends fg{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Kh(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Kh(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?um(e.updateTime):um(t);return n.isEqual(od.min())&&(n=um(t)),new Mp(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=um(e.commitTime);return this.listener.T_(n,t)}return Kh(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=gm(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>bm(this.serializer,e)))};this.t_(t)}}class mg extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Hh(Wh.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,a]=i;return this.connection.So(e,dm(t,n),r,s,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Wh.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Hh(Wh.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[a,o]=s;return this.connection.vo(e,dm(t,n),r,a,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Wh.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Hh(Wh.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class gg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Fh(t),this.g_=!1):Uh("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class yg{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{wg(this)&&(Uh("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=qh(e);t.v_.add(4),await bg(t),t.x_.set("Unknown"),t.v_.delete(4),await vg(t)}(this))}))})),this.x_=new gg(n,r)}}async function vg(e){if(wg(e))for(const t of e.F_)await t(!0)}async function bg(e){for(const t of e.F_)await t(!1)}function wg(e){return 0===qh(e).v_.size}async function _g(e,t,n){if(!Td(t))throw t;e.v_.add(1),await bg(e),e.x_.set("Offline"),n||(n=()=>$m(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Uh("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await vg(e)}))}function kg(e,t){return t().catch((n=>_g(e,n,t)))}async function Eg(e){const t=qh(e),n=jg(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Sg(t);)try{const e=await Zm(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,xg(t,e)}catch(e){await _g(t,e)}Tg(t)&&Ig(t)}function Sg(e){return wg(e)&&e.D_.length<10}function xg(e,t){e.D_.push(t);const n=jg(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Tg(e){return wg(e)&&!jg(e).Ho()&&e.D_.length>0}function Ig(e){jg(e).start()}async function Cg(e){jg(e).d_()}async function Ng(e){const t=jg(e);for(const n of e.D_)t.I_(n.mutations)}async function Pg(e,t,n){const r=e.D_.shift(),i=em.from(r,t,n);await kg(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Eg(e)}async function Ag(e,t){t&&jg(e).P_&&await async function(e,t){if(function(e){return im(e)&&e!==Wh.ABORTED}(t.code)){const n=e.D_.shift();jg(e).Zo(),await kg(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Eg(e)}}(e,t),Tg(e)&&Ig(e)}async function Og(e,t){const n=qh(e);n.asyncQueue.verifyOperationInProgress(),Uh("RemoteStore","RemoteStore received new credentials");const r=wg(n);n.v_.add(3),await bg(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await vg(n)}async function Rg(e,t){const n=qh(e);t?(n.v_.delete(2),await vg(n)):t||(n.v_.add(2),await bg(n),n.x_.set("Unknown"))}function jg(e){return e.B_||(e.B_=function(e,t,n){const r=qh(e);return r.R_(),new pg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Cg.bind(null,e),To:Ag.bind(null,e),E_:Ng.bind(null,e),T_:Pg.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await Eg(e)):(await e.B_.stop(),e.D_.length>0&&(Uh("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class Dg{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Gh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Dg(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Hh(Wh.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lg(e,t){if(Fh("AsyncQueue","".concat(t,": ").concat(e)),Td(e))return new Hh(Wh.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Mg{constructor(){this.queries=new lp((e=>rp(e)),np),this.onlineState="Unknown",this.K_=new Set}}function Ug(e){e.K_.forEach((e=>{e.next()}))}class Fg{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new lp((e=>rp(e)),np),this.pa=new Map,this.ya=new Set,this.wa=new Vd(dd.comparator),this.Sa=new Map,this.ba=new Mm,this.Da={},this.Ca=new Map,this.va=Am.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function Bg(e,t,n){const r=qh(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=qh(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&Ug(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Vg(e,t){const n=qh(e),r=t.batch.batchId;try{const e=await function(e,t){const n=qh(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=_d.resolve();return s.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Kh(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=bp();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);qg(n,r,null),Kg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wg(n,e)}catch(e){await wd(e)}}async function zg(e,t,n){const r=qh(e);try{const e=await function(e,t){const n=qh(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Kh(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);qg(r,t,n),Kg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Wg(r,e)}catch(n){await wd(n)}}function Kg(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function qg(e,t,n){const r=qh(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}async function Wg(e,t,n){const r=qh(e),i=[],s=[],a=[];r.ga.isEmpty()||(r.ga.forEach(((e,o)=>{a.push(r.Ma(o,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(o.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Hm.Ki(o.targetId,e);s.push(t)}})))})),await Promise.all(a),r.fa.u_(i),await async function(e,t){const n=qh(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>_d.forEach(t,(t=>_d.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>_d.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Td(e))throw e;Uh("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function Hg(e,t){const n=qh(e);if(!n.currentUser.isEqual(t)){Uh("SyncEngine","User change. New user:",t.toKey());const e=await Ym(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new Hh(Wh.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Wg(n,e.us)}}function Gg(e){const t=qh(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Vg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zg.bind(null,t),t}class Jg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=hg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Xm(this.persistence,new Jm,e.initialUser,this.serializer)}createPersistence(e){return new Km(Wm.Hr,this.serializer)}createSharedClientState(e){return new tg}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Qg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Bg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hg.bind(null,this.syncEngine),await Rg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Mg}createDatastore(e){const t=hg(e.databaseInfo.databaseId),n=function(e){return new cg(e)}(e.databaseInfo);return function(e,t,n,r){return new mg(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new yg(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Bg(this.syncEngine,e,0)),rg.D()?new rg:new ng)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Fg(e,t,n,r,i,s);return a&&(o.Fa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=qh(e);Uh("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await bg(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class Xg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=jh.UNAUTHENTICATED,this.clientId=rd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Uh("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Uh("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Hh(Wh.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const n=Lg(i,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Yg(e,t){e.asyncQueue.verifyOperationInProgress(),Uh("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Ym(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function $g(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ey(e);Uh("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Og(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Og(t.remoteStore,n))),e._onlineComponents=t}function Zg(e){return"FirebaseError"===e.name?e.code===Wh.FAILED_PRECONDITION||e.code===Wh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function ey(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Uh("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yg(e,e._uninitializedComponentsProvider._offline)}catch(i){const n=i;if(!Zg(n))throw n;Bh("Error using user provided cache. Falling back to memory cache: "+n),await Yg(e,new Jg)}}else Uh("FirestoreClient","Using default OfflineComponentProvider"),await Yg(e,new Jg);return e._offlineComponents}async function ty(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Uh("FirestoreClient","Using user provided OnlineComponentProvider"),await $g(e,e._uninitializedComponentsProvider._online)):(Uh("FirestoreClient","Using default OnlineComponentProvider"),await $g(e,new Qg))),e._onlineComponents}function ny(e){return ty(e).then((e=>e.syncEngine))}function ry(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const iy=new Map;function sy(e,t,n){if(!n)throw new Hh(Wh.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ay(e){if(!dd.isDocumentKey(e))throw new Hh(Wh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function oy(e){if(dd.isDocumentKey(e))throw new Hh(Wh.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ly(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":zh()}function cy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Hh(Wh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ly(e);throw new Hh(Wh.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class uy{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Hh(Wh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Hh(Wh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Hh(Wh.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ry(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Hh(Wh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Hh(Wh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Hh(Wh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Hh(Wh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Hh(Wh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Qh;switch(e.type){case"firstParty":return new Zh(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Hh(Wh.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=iy.get(e);t&&(Uh("ComponentProvider","Removing Datastore"),iy.delete(e),t.terminate())}(this),Promise.resolve()}}function dy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=cy(e,hy))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==a&&Bh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=jh.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[qs(JSON.stringify({alg:"none",type:"JWT"})),qs(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Hh(Wh.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new jh(s)}e._authCredentials=new Xh(new Jh(t,n))}}class fy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new fy(this.firestore,e,this._query)}}class py{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new my(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new py(this.firestore,e,this._key)}}class my extends fy{constructor(e,t,n){super(e,t,Qf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new py(this.firestore,null,new dd(e))}withConverter(e){return new my(this.firestore,e,this._path)}}function gy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ha(e),sy("collection","path",t),e instanceof hy){const n=cd.fromString(t,...r);return oy(n),new my(e,null,n)}{if(!(e instanceof py||e instanceof my))throw new Hh(Wh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(cd.fromString(t,...r));return oy(n),new my(e.firestore,null,n)}}class yy{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new dg(this,"async_queue_retry"),this._u=()=>{const e=ug();e&&Uh("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=ug();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=ug();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new Gh;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(r){if(!Td(r))throw r;Uh("AsyncQueue","Operation failed with retryable error: "+r)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Fh("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=Dg.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&zh()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}class vy extends hy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new yy,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||wy(this),this._firestoreClient.terminate()}}function by(e){return e._firestoreClient||wy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function wy(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new nf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ry(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Xg(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class _y{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _y(Jd.fromBase64String(e))}catch(e){throw new Hh(Wh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new _y(Jd.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ky{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Hh(Wh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hd(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ey{constructor(e){this._methodName=e}}class Sy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Hh(Wh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Hh(Wh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return id(this._lat,e._lat)||id(this._long,e._long)}}const xy=/^__.*__$/;class Ty{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Gp(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hp(e,this.data,t,this.fieldTransforms)}}function Iy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zh()}}class Cy{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Cy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Fy(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(Iy(this.du)&&xy.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Ny{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||hg(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Cy({du:e,methodName:t,wu:n,path:hd.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Py(e){const t=e._freezeSettings(),n=hg(e._databaseId);return new Ny(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ay(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Su(s.merge||s.mergeFields?2:0,t,n,i);Dy("Data must be an object, but it was:",a,r);const o=Ry(r,a);let l,c;if(s.merge)l=new Hd(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Ly(t,r,n);if(!a.contains(i))throw new Hh(Wh.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));By(e,i)||e.push(i)}l=new Hd(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new Ty(new vf(o),l,c)}function Oy(e,t){if(jy(e=ha(e)))return Dy("Unsupported field value:",t,e),Ry(e,t);if(e instanceof Ey)return function(e,t){if(!Iy(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Oy(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ha(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Sp(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ad.fromDate(e);return{timestampValue:om(t.serializer,n)}}if(e instanceof ad){const n=new ad(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:om(t.serializer,n)}}if(e instanceof Sy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _y)return{bytesValue:lm(t.serializer,e._byteString)};if(e instanceof py){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:hm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(ly(e)))}(e,t)}function Ry(e,t){const n={};return Bd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fd(e,((e,r)=>{const i=Oy(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function jy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ad||e instanceof Sy||e instanceof _y||e instanceof py||e instanceof Ey)}function Dy(e,t,n){if(!jy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=ly(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function Ly(e,t,n){if((t=ha(t))instanceof ky)return t._internalPath;if("string"==typeof t)return Uy(e,t);throw Fy("Field path arguments must be of type string or ",e,!1,void 0,n)}const My=new RegExp("[~\\*/\\[\\]]");function Uy(e,t,n){if(t.search(My)>=0)throw Fy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new ky(...t.split("."))._internalPath}catch(a){throw Fy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Fy(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new Hh(Wh.INVALID_ARGUMENT,o+e+l)}function By(e,t){return e.some((e=>e.isEqual(t)))}function Vy(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}function zy(e,t){const n=cy(e.firestore,vy),r=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ha(e),1===arguments.length&&(t=rd.newId()),sy("doc","path",t),e instanceof hy){const n=cd.fromString(t,...r);return ay(n),new py(e,null,new dd(n))}{if(!(e instanceof py||e instanceof my))throw new Hh(Wh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(cd.fromString(t,...r));return ay(n),new py(e.firestore,e instanceof my?e.converter:null,new dd(n))}}(e),i=Vy(e.converter,t);return Ky(n,[Ay(Py(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Up.exists(!1))]).then((()=>r))}function Ky(e,t){return function(e,t){const n=new Gh;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Gg(e);try{const e=await function(e,t){const n=qh(e),r=ad.now(),i=t.reduce(((e,t)=>e.add(t.key)),bp());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=up(),l=bp();return n.os.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((i=>{s=i;const a=[];for(const e of t){const t=qp(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Gp(e.key,t,bf(t.value.mapValue),Up.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:fp(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new Vd(id)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await Wg(r,e.changes),await Eg(r.remoteStore)}catch(e){const t=Lg(e,"Failed to persist write");n.reject(t)}}(await ny(e),t,n))),n.promise}(by(e),t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Dh=e}(Za),Qa(new da("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new vy(new Yh(e.getProvider("auth-internal")),new td(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Hh(Wh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rf(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),no(Rh,"4.4.2",e),no(Rh,"4.4.2","esm2017")}();no("firebase","10.8.0","app");function qy(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Wy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Hy=Wy,Gy=new na("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Jy=new ka("@firebase/auth");function Qy(e){if(Jy.logLevel<=ya.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Jy.error("Auth (".concat(Za,"): ").concat(e),...n)}}function Xy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Zy(e,...n)}function Yy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Zy(e,...n)}function $y(e,t,n){const r=Object.assign(Object.assign({},Hy()),{[t]:n});return new na("auth","Firebase",r).create(t,{appName:e.name})}function Zy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Gy.create(e,...n)}function ev(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Zy(t,...r)}}function tv(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Qy(t),new Error(t)}function nv(e,t){e||tv(t)}function rv(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function iv(){return"http:"===sv()||"https:"===sv()}function sv(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function av(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(iv()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class ov{constructor(e,t){this.shortDelay=e,this.longDelay=t,nv(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($s())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return av()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lv(e,t){nv(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class cv{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void tv("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void tv("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void tv("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const uv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},hv=new ov(3e4,6e4);function dv(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function fv(e,t,n,r){return pv(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=aa(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),cv.fetch()(gv(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},i))}))}async function pv(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},uv),t);try{const t=new vv(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw bv(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw bv(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw bv(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw bv(e,"user-disabled",s);const o=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw $y(e,o,a);Xy(e,o)}}catch(r){if(r instanceof ta)throw r;Xy(e,"network-request-failed",{message:String(r)})}}async function mv(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await fv(e,t,n,r,i);return"mfaPendingCredential"in s&&Xy(e,"multi-factor-auth-required",{_serverResponse:s}),s}function gv(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?lv(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function yv(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vv{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Yy(this.auth,"network-request-failed"))),hv.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function bv(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Yy(e,t,r);return i.customData._tokenResponse=n,i}function wv(e){return void 0!==e&&void 0!==e.enterprise}class _v{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yv(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function kv(e,t){return fv(e,"GET","/v2/recaptchaConfig",dv(e,t))}function Ev(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(r){}}function Sv(e){return 1e3*Number(e)}function xv(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return Qy("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ws(n);return e?JSON.parse(e):(Qy("Failed to decode base64 JWT payload"),null)}catch(r){return Qy("Caught error parsing JWT payload as JSON",null===r||void 0===r?void 0:r.toString()),null}}async function Tv(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(r){throw r instanceof ta&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}class Iv{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(r){return void((null===r||void 0===r?void 0:r.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Cv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ev(this.lastLoginAt),this.creationTime=Ev(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Nv(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Tv(e,async function(e,t){return fv(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));ev(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=qy(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const o=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),u=!!l&&c,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Cv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,h)}class Pv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ev(e.idToken,"internal-error"),ev("undefined"!==typeof e.idToken,"internal-error"),ev("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=xv(e);return ev(t,"internal-error"),ev("undefined"!==typeof t.exp,"internal-error"),ev("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ev(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await pv(e,{},(async()=>{const n=aa({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=gv(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",cv.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Pv;return n&&(ev("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ev("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ev("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pv,this.toJSON())}_performRefresh(){return tv("not implemented")}}function Av(e,t){ev("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ov{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=qy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Iv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Cv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Tv(this,this.stsTokenManager.getToken(this.auth,e));return ev(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ha(e),r=await n.getIdToken(t),i=xv(r);ev(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ev(Sv(i.auth_time)),issuedAtTime:Ev(Sv(i.iat)),expirationTime:Ev(Sv(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ha(e);await Nv(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ev(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ov(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ev(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Nv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Tv(this,async function(e,t){return fv(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:k}=t;ev(v&&k,e,"internal-error");const E=Pv.fromJSON(this.name,k);ev("string"===typeof v,e,"internal-error"),Av(u,e.name),Av(h,e.name),ev("boolean"===typeof b,e,"internal-error"),ev("boolean"===typeof w,e,"internal-error"),Av(d,e.name),Av(f,e.name),Av(p,e.name),Av(m,e.name),Av(g,e.name),Av(y,e.name);const S=new Ov({uid:v,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Pv;r.updateFromServerResponse(t);const i=new Ov({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Nv(i),i}}const Rv=new Map;function jv(e){nv(e instanceof Function,"Expected a class definition");let t=Rv.get(e);return t?(nv(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Rv.set(e,t),t)}class Dv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Dv.type="NONE";const Lv=Dv;function Mv(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Uv{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Mv(this.userKey,r.apiKey,i),this.fullPersistenceKey=Mv("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ov._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Uv(jv(Lv),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||jv(Lv);const s=Mv(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Ov._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Uv(i,e,n)):new Uv(i,e,n)}}function Fv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Kv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Bv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Wv(t))return"Blackberry";if(Hv(t))return"Webos";if(Vv(t))return"Safari";if((t.includes("chrome/")||zv(t))&&!t.includes("edge/"))return"Chrome";if(qv(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Bv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$s();return/firefox\//i.test(e)}function Vv(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$s()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$s();return/crios\//i.test(e)}function Kv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$s();return/iemobile/i.test(e)}function qv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$s();return/android/i.test(e)}function Wv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$s();return/blackberry/i.test(e)}function Hv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$s();return/webos/i.test(e)}function Gv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$s();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Jv(){return function(){const e=$s();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Qv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$s();return Gv(e)||qv(e)||Hv(e)||Wv(e)||/windows phone/i.test(e)||Kv(e)}function Xv(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Fv($s());break;case"Worker":t="".concat(Fv($s()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Za,"/").concat(r)}class Yv{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(r){i(r)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(r){t.reverse();for(const n of t)try{n()}catch(E){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===r||void 0===r?void 0:r.message})}}}class $v{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Zv{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tb(this),this.idTokenSubscription=new tb(this),this.beforeStateQueue=new Yv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jv(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Uv.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null===i||void 0===i?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==r||!(null===a||void 0===a?void 0:a.user)||(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(r){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(r)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ev(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nv(e)}catch(r){if((null===r||void 0===r?void 0:r.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?ha(e):null;return t&&ev(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ev(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(jv(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return fv(e,"GET","/v2/passwordPolicy",dv(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new $v(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new na("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return fv(e,"POST","/v2/accounts:revokeToken",dv(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&jv(e)||this._popupRedirectResolver;ev(t,this,"argument-error"),this.redirectPersistenceManager=await Uv.create(this,[jv(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ev(a,this,"internal-error"),a.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ev(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Jy.logLevel<=ya.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Jy.warn("Auth (".concat(Za,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function eb(e){return ha(e)}class tb{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new ca(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return ev(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let nb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rb(e){return nb.loadJS(e)}function ib(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class sb{constructor(e){this.type="recaptcha-enterprise",this.auth=eb(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;wv(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{kv(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new _v(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&wv(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=nb.recaptchaEnterpriseScript;0!==t.length&&(t+=i),rb(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ab(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new sb(e);let s;try{s=await i.verify(n)}catch(o){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ob(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ab(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await ab(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function lb(e,t,n){const r=eb(e);ev(r._canInitEmulator,r,"emulator-config-failed"),ev(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=cb(t),{host:a,port:o}=function(e){const t=cb(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ub(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ub(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(s,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function cb(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ub(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class hb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return tv("not implemented")}_getIdTokenResponse(e){return tv("not implemented")}_linkToIdToken(e,t){return tv("not implemented")}_getReauthenticationResolver(e){return tv("not implemented")}}async function db(e,t){return fv(e,"POST","/v1/accounts:signUp",t)}async function fb(e,t){return mv(e,"POST","/v1/accounts:signInWithPassword",dv(e,t))}class pb extends hb{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new pb(e,t,"password")}static _fromEmailAndCode(e,t){return new pb(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ob(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",fb);case"emailLink":return async function(e,t){return mv(e,"POST","/v1/accounts:signInWithEmailLink",dv(e,t))}(e,{email:this._email,oobCode:this._password});default:Xy(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ob(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",db);case"emailLink":return async function(e,t){return mv(e,"POST","/v1/accounts:signInWithEmailLink",dv(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Xy(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function mb(e,t){return mv(e,"POST","/v1/accounts:signInWithIdp",dv(e,t))}class gb extends hb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gb(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xy("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=qy(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new gb(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return mb(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,mb(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,mb(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=aa(t)}return e}}const yb={USER_NOT_FOUND:"user-not-found"};class vb extends hb{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new vb({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new vb({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return mv(e,"POST","/v1/accounts:signInWithPhoneNumber",dv(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await mv(e,"POST","/v1/accounts:signInWithPhoneNumber",dv(e,t));if(n.temporaryProof)throw bv(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return mv(e,"POST","/v1/accounts:signInWithPhoneNumber",dv(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),yb)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new vb({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class bb{constructor(e){var t,n,r,i,s,a;const o=oa(la(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);ev(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=oa(la(e)).link,n=t?oa(la(t)).deep_link_id:null,r=oa(la(e)).deep_link_id;return(r?oa(la(r)).link:null)||r||n||t||e}(e);try{return new bb(t)}catch(n){return null}}}class wb{constructor(){this.providerId=wb.PROVIDER_ID}static credential(e,t){return pb._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=bb.parseLink(t);return ev(n,"argument-error"),pb._fromEmailAndCode(e,n.code,n.tenantId)}}wb.PROVIDER_ID="password",wb.EMAIL_PASSWORD_SIGN_IN_METHOD="password",wb.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _b{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class kb extends _b{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Eb extends kb{constructor(){super("facebook.com")}static credential(e){return gb._fromParams({providerId:Eb.PROVIDER_ID,signInMethod:Eb.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eb.credentialFromTaggedObject(e)}static credentialFromError(e){return Eb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Eb.credential(t.oauthAccessToken)}catch(n){return null}}}Eb.FACEBOOK_SIGN_IN_METHOD="facebook.com",Eb.PROVIDER_ID="facebook.com";class Sb extends kb{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gb._fromParams({providerId:Sb.PROVIDER_ID,signInMethod:Sb.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Sb.credentialFromTaggedObject(e)}static credentialFromError(e){return Sb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Sb.credential(n,r)}catch(i){return null}}}Sb.GOOGLE_SIGN_IN_METHOD="google.com",Sb.PROVIDER_ID="google.com";class xb extends kb{constructor(){super("github.com")}static credential(e){return gb._fromParams({providerId:xb.PROVIDER_ID,signInMethod:xb.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xb.credentialFromTaggedObject(e)}static credentialFromError(e){return xb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return xb.credential(t.oauthAccessToken)}catch(n){return null}}}xb.GITHUB_SIGN_IN_METHOD="github.com",xb.PROVIDER_ID="github.com";class Tb extends kb{constructor(){super("twitter.com")}static credential(e,t){return gb._fromParams({providerId:Tb.PROVIDER_ID,signInMethod:Tb.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Tb.credentialFromTaggedObject(e)}static credentialFromError(e){return Tb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Tb.credential(n,r)}catch(i){return null}}}Tb.TWITTER_SIGN_IN_METHOD="twitter.com",Tb.PROVIDER_ID="twitter.com";class Ib{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ov._fromIdTokenResponse(e,n,r),s=Cb(n);return new Ib({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Cb(n);return new Ib({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Cb(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Nb extends ta{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Nb.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Nb(e,t,n,r)}}function Pb(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Nb._fromErrorAndOperation(e,n,t,r);throw n}))}async function Ab(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Tv(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ib._forOperation(e,"link",r)}async function Ob(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e,s="reauthenticate";try{const r=await Tv(e,Pb(i,s,t,e),n);ev(r.idToken,i,"internal-error");const a=xv(r.idToken);ev(a,i,"internal-error");const{sub:o}=a;return ev(e.uid===o,i,"user-mismatch"),Ib._forOperation(e,s,r)}catch(r){throw(null===r||void 0===r?void 0:r.code)==="auth/".concat("user-not-found")&&Xy(i,"user-mismatch"),r}}async function Rb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Pb(e,r,t),s=await Ib._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}new WeakMap;const jb="__sak";class Db{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jb,"1"),this.storage.removeItem(jb),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Lb extends Db{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=$s();return Vv(e)||Gv(e)}()&&function(){try{return!(!window||window===window.top)}catch(r){return!1}}(),this.fallbackToPolling=Qv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Jv()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Lb.type="LOCAL";const Mb=Lb;class Ub extends Db{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ub.type="SESSION";const Fb=Ub;class Bb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Bb(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Vb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Bb.receivers=[];class zb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const l=Vb("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Kb(){return window}function qb(){return"undefined"!==typeof Kb().WorkerGlobalScope&&"function"===typeof Kb().importScripts}const Wb="firebaseLocalStorageDb",Hb="firebaseLocalStorage",Gb="fbase_key";class Jb{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Qb(e,t){return e.transaction([Hb],t?"readwrite":"readonly").objectStore(Hb)}function Xb(){const e=indexedDB.open(Wb,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Hb,{keyPath:Gb})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Hb)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Wb);return new Jb(e).toPromise()}(),t(await Xb()))}))}))}async function Yb(e,t,n){const r=Qb(e,!0).put({[Gb]:t,value:n});return new Jb(r).toPromise()}function $b(e,t){const n=Qb(e,!0).delete(t);return new Jb(n).toPromise()}class Zb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Xb()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(r){if(t++>3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bb._getInstance(qb()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new zb(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xb();return await Yb(e,jb,"1"),await $b(e,jb),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Yb(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Qb(e,!1).get(t),r=await new Jb(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>$b(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Qb(e,!1).getAll();return new Jb(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Zb.type="LOCAL";const ew=Zb;ib("rcb"),new ov(3e4,6e4);const tw="recaptcha";async function nw(e,t,n){var r;const i=await n.verify();try{let s;if(ev("string"===typeof i,e,"argument-error"),ev(n.type===tw,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ev("enroll"===t.type,e,"internal-error");const n=await function(e,t){return fv(e,"POST","/v2/accounts/mfaEnrollment:start",dv(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ev("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ev(n,e,"missing-multi-factor-info");const a=await function(e,t){return fv(e,"POST","/v2/accounts/mfaSignIn:start",dv(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return fv(e,"POST","/v1/accounts:sendVerificationCode",dv(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class rw{constructor(e){this.providerId=rw.PROVIDER_ID,this.auth=eb(e)}verifyPhoneNumber(e,t){return nw(this.auth,e,ha(t))}static credential(e,t){return vb._fromVerification(e,t)}static credentialFromResult(e){const t=e;return rw.credentialFromTaggedObject(t)}static credentialFromError(e){return rw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?vb._fromTokenResponse(n,r):null}}function iw(e,t){return t?jv(t):(ev(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}rw.PROVIDER_ID="phone",rw.PHONE_SIGN_IN_METHOD="phone";class sw extends hb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mb(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mb(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mb(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function aw(e){return Rb(e.auth,new sw(e),e.bypassAuthState)}function ow(e){const{auth:t,user:n}=e;return ev(n,t,"internal-error"),Ob(n,new sw(e),e.bypassAuthState)}async function lw(e){const{auth:t,user:n}=e;return ev(n,t,"internal-error"),Ab(n,new sw(e),e.bypassAuthState)}class cw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a)return void this.reject(a);const l={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(r){this.reject(r)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aw;case"linkViaPopup":case"linkViaRedirect":return lw;case"reauthViaPopup":case"reauthViaRedirect":return ow;default:Xy(this.auth,"internal-error")}}resolve(e){nv(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nv(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const uw=new ov(2e3,1e4);class hw extends cw{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,hw.currentPopupAction&&hw.currentPopupAction.cancel(),hw.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ev(e,this.auth,"internal-error"),e}async onExecution(){nv(1===this.filter.length,"Popup operations only handle one event");const e=Vb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Yy(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Yy(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hw.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Yy(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,uw.get())};e()}}hw.currentPopupAction=null;const dw="pendingRedirect",fw=new Map;class pw extends cw{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=fw.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=yw(t),r=gw(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}fw.set(this.auth._key(),e)}return this.bypassAuthState||fw.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function mw(e,t){fw.set(e._key(),t)}function gw(e){return jv(e._redirectPersistence)}function yw(e){return Mv(dw,e.config.apiKey,e.name)}async function vw(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=eb(e),i=iw(r,t),s=new pw(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class bw{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _w(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!_w(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Yy(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ww(e))}saveEventToCache(e){this.cachedEventUids.add(ww(e)),this.lastProcessedEventTime=Date.now()}}function ww(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function _w(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const kw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ew=/^https?/;async function Sw(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return fv(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(xw(r))return}catch(n){}Xy(e,"unauthorized-domain")}function xw(e){const t=rv(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ew.test(n))return!1;if(kw.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Tw=new ov(3e4,6e4);function Iw(){const e=Kb().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Cw(e){return new Promise(((t,n)=>{var r,i,s;function a(){Iw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Iw(),n(Yy(e,"network-request-failed"))},timeout:Tw.get()})}if(null===(i=null===(r=Kb().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Kb().gapi)||void 0===s?void 0:s.load)){const t=ib("iframefcb");return Kb()[t]=()=>{gapi.load?a():n(Yy(e,"network-request-failed"))},rb("".concat(nb.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}a()}})).catch((e=>{throw Nw=null,e}))}let Nw=null;const Pw=new ov(5e3,15e3),Aw="__/auth/iframe",Ow="emulator/auth/iframe",Rw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dw(e){const t=e.config;ev(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?lv(t,Ow):"https://".concat(e.config.authDomain,"/").concat(Aw),r={apiKey:t.apiKey,appName:e.name,v:Za},i=jw.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(aa(r).slice(1))}async function Lw(e){const t=await function(e){return Nw=Nw||Cw(e),Nw}(e),n=Kb().gapi;return ev(n,e,"internal-error"),t.open({where:document.body,url:Dw(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rw,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Yy(e,"network-request-failed"),s=Kb().setTimeout((()=>{r(i)}),Pw.get());function a(){Kb().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const Mw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Uw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(r){}}}function Fw(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Mw),{width:i.toString(),height:s.toString(),top:a,left:o}),u=$s().toLowerCase();n&&(l=zv(u)?"_blank":n),Bv(u)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Gv(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$s())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new Uw(null);const d=window.open(t||"",l,h);ev(d,e,"popup-blocked");try{d.focus()}catch(r){}return new Uw(d)}const Bw="__/auth/handler",Vw="emulator/auth/handler",zw=encodeURIComponent("fac");async function Kw(e,t,n,r,i,s){ev(e.config.authDomain,e,"auth-domain-config-required"),ev(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Za,eventId:i};if(t instanceof _b){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof kb){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(zw,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Bw);return lv(t,Vw)}(e),"?").concat(aa(o).slice(1)).concat(c)}const qw="webStorageSupport";const Ww=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fb,this._completeRedirectFn=vw,this._overrideRedirectResult=mw}async _openPopup(e,t,n,r){var i;nv(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Fw(e,await Kw(e,t,n,rv(),r),Vb())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Kb().location.href=e}(await Kw(e,t,n,rv(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(nv(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Lw(e),n=new bw(e);return t.register("authEvent",(t=>{ev(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qw,{type:qw},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[qw];void 0!==i&&t(!!i),Xy(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Sw(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Qv()||Vv()||Gv()}};var Hw="@firebase/auth",Gw="1.6.0";class Jw{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ev(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Qw=Xs("authIdTokenMaxAge")||300;let Xw=null;var Yw;!function(e){nb=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Yy("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Yw="Browser",Qa(new da("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;ev(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Yw,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xv(Yw)},c=new Zv(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jv);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Qa(new da("auth-internal",(e=>(e=>new Jw(e))(eb(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),no(Hw,Gw,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Yw)),no(Hw,Gw,"esm2017");const $w=eo({apiKey:"AIzaSyBqa16GX8lW9Ec72Foo4G5c-sGBioUAJ6A",authDomain:"mseals.firebaseapp.com",projectId:"mseals",storageBucket:"mseals.appspot.com",messagingSenderId:"175109089338",appId:"1:175109089338:web:afe25696397aca59baed03",measurementId:"G-DKC26RKFWS"}),Zw=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:to();const t=Xa(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Xa(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(ia(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Xy(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ww,persistence:[ew,Mb,Fb]}),r=Xs("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Qw)return;const r=null===t||void 0===t?void 0:t.token;Xw!==r&&(Xw=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){ha(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){ha(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const s=Js("auth");s&&lb(n,"http://".concat(s))}($w),function(e,t){const n="string"==typeof e?e:t||"(default)",r=Xa("object"==typeof e?e:to(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=Js(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&dy(r,...e)}return r}($w)),e_=()=>{const[t,n]=(0,e.useState)(),[r,i]=(0,e.useState)([]),[s,a]=(0,e.useState)([]),[o,l]=(0,e.useState)(null),[c,u]=(0,e.useState)(null),[h,d]=(0,e.useState)([]),[f,p]=(0,e.useState)(""),[m,g]=(0,e.useState)(""),[y,v]=(0,e.useState)(""),[b,w]=(0,e.useState)([]),[_,k]=(0,e.useState)(-1),[E,S]=(0,e.useState)({}),[x,T]=(0,e.useState)(""),[I,C]=(0,e.useState)(""),[N,P]=(0,e.useState)([]),[A,O]=(0,e.useState)(""),[R,j]=(0,e.useState)(!1),[D,L]=(0,e.useState)(10),[M,U]=(0,e.useState)(!1),[F,B]=(0,e.useState)(0),[V,z]=(0,e.useState)(0),[K,q]=(0,e.useState)(0),[W,H]=(0,e.useState)(!1);(0,e.useEffect)((()=>{const e=e=>{const t="Are you sure you want to leave? Your unsaved changes may be lost.";return e.returnValue=t,t};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[]);let G=1;(0,e.useEffect)((()=>{Z(),Q(),Y(),X()}),[]),(0,e.useEffect)((()=>{const e=setTimeout((()=>{p(""),g("")}),5e3);return()=>{clearTimeout(e)}}),[f,m]),(0,e.useEffect)((()=>{(()=>{const e=Object.keys(localStorage).filter((e=>e.startsWith("Draw_"))).sort(((e,t)=>{const n=new Date(e.replace("Draw_",""));return new Date(t.replace("Draw_",""))-n}));P(e)})()}),[]);const J=async e=>{try{const n=(new Date).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),r=A||"Draw_".concat(n),i=JSON.stringify(e);localStorage.setItem(r,i),O(r),console.log("Bracket data saved locally as ".concat(r,"."));try{const{data:e,error:t}=await Ms.from("tournament").select("created_at").eq("name",r);if(t)throw t;if(e.length>0){const{data:e,error:t}=await Ms.from("tournament").update({draw:i}).eq("name",r);if(t)throw t;console.log("Bracket data updated online for ".concat(r,"."))}else{const{data:e,error:t}=await Ms.from("tournament").insert([{created_at:n,draw:i,name:r}]);if(t)throw t;console.log("Bracket data synced online successfully for ".concat(r,"."))}}catch(t){console.error("Error syncing bracket data online:",t.message)}}catch(t){console.error("Error saving bracket data locally:",t.message)}},Q=async()=>{try{const e=(await or.players.toArray()).filter((e=>e.availability));console.log("Available Players:",e)}catch(e){console.error("Error fetching players from the database:",e)}},X=async()=>{try{const e=(await or.players.toArray()).filter((e=>!e.availability));a(e),console.log("Unavailable Players:",e)}catch(e){console.error("Error fetching players from the database:",e)}},Y=()=>{try{var e;const t=((null===(e=r[0])||void 0===e?void 0:e.matches)||[]).reduce(((e,t)=>(t.subBoxes.forEach((t=>{t.playerName&&e.push({id:t.playerId,fullName:t.playerName,handicap:t.handicap})})),e)),[]);d(t)}catch(t){console.error("Error fetching buy-back players from the database:",t)}},$=(e,t,n,r,i)=>{ne((s=>{const a=[...s],o=a[e].matches[t].subBoxes[n];if("isWinner"===r&&void 0!==i){const r=a[e].matches[t].subBoxes[0===n?1:0].playerName,s=a[e].matches[t].subBoxes[1-n].isWinner;if(console.log("checking ".concat(s)),s&&S((e=>{const t={...e};return t[r]=Math.max(0,(t[r]||0)-1),console.log("Player ".concat(r," wins reverted to: ").concat(t[r])),t})),a[e].matches[t].subBoxes.forEach(((e,t)=>{t!==n&&(e.isWinner=!1,e.hasWon=!1)})),i&&e<a.length-1){const n=e+1,r=Math.floor(t/2),i=t%2,s=o.playerName;a[n].matches[r].subBoxes[i]={playerName:s,handicap:o.handicap,result:null,isWinner:!1,hasWon:!1},console.log("Moving ".concat(s," to the next round"))}}"isWinner"===r&&!i&&o.isWinner&&(o.hasWon=!1),o[r]=void 0!==i?i:"";const l=""!==a[e].matches[t].subBoxes[1-n].playerName;if("isWinner"===r&&i&&!o.hasWon&&l){const r=a[e].matches[t].subBoxes[1-n].isWinner;S((e=>{const t={...e};return r?(t[o.playerName]=Math.max(0,(t[o.playerName]||0)-1),console.log("Player ".concat(o.playerName," wins decremented to: ").concat(t[o.playerName]))):(t[o.playerName]=(t[o.playerName]||0)+1,console.log("Player ".concat(o.playerName," wins: ").concat(t[o.playerName]))),t})),o.hasWon=!0}else!i&&o.hasWon&&(o.hasWon=!1);return J(a),a}))},Z=async()=>{let e=(await or.players.toArray()).filter((e=>e.availability)).length,t=e;e>2&&e<=11?t=16:e>11&&e<=32&&(t=32);const n=Math.ceil(Math.log2(t)),r=[];for(let i=1;i<=n;i++){const e=Math.pow(2,n-i),t=[];for(let n=1;n<=e;n++){const e=Array.from({length:2},((e,t)=>({playerName:"",handicap:"",result:null,isWinner:!1})));t.push({subBoxes:e})}r.push({round:i,matches:t})}i(r)},ee=async()=>{const e=await te();if(e.length>0){var t;const n=e.filter((e=>e.availability));e.filter((e=>!e.availability));if(null===(t=r[0])||void 0===t||!t.matches.some((e=>e.subBoxes.some((e=>e.playerName))))){const e=(e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t})(n);i((t=>{var n;const r=[...t],i=(null===(n=r[0])||void 0===n?void 0:n.matches)||[];for(let s=0;s<Math.min(e.length,2*i.length);s++){const t=s%2;i[Math.floor(s/2)].subBoxes[t]={playerName:e[s].fullName,handicap:e[s].handicap,result:null,isWinner:!1}}for(let s=Math.min(e.length,2*i.length);s<2*i.length;s++){const e=s%2;i[Math.floor(s/2)].subBoxes[e]={playerName:"",handicap:"",result:null,isWinner:!1}}return ne(r),J(r),r}))}l(null),u(null)}},te=async()=>{try{return(await or.players.toArray()).slice(0,t)}catch(e){return console.error("Error fetching players from the database:",e),[]}};(0,e.useEffect)((()=>{console.log("Updated Bracket:",r)}),[r]);const ne=e=>{w((t=>[...t.slice(0,_+1),e])),k(_+1),i(e)};return(0,lr.jsxs)("div",{className:"TournamentH",children:[(0,lr.jsx)("h2",{children:"Tournament Bracket"}),(0,lr.jsxs)("div",{className:"TournamentButtons",children:[(0,lr.jsx)("button",{onClick:async()=>{await ee(),await J(),await Y()},children:"Start"}),(0,lr.jsx)("button",{onClick:Y,children:"Refresh"}),(0,lr.jsx)("button",{onClick:()=>{o&&ne((e=>{var t;const n=[...e],r=(null===(t=n[0])||void 0===t?void 0:t.matches)||[];if(!r.some((e=>e.subBoxes.some((e=>e.playerName===o.fullName))))){let e=!1;const t=r.map((t=>{if(!e){const n=t.subBoxes.findIndex((e=>""===e.playerName));if(-1!==n)return e=!0,console.log("Inserting Player:",o.fullName,"into Match:",t,"Sub-Box Index:",n),{...t,subBoxes:[...t.subBoxes.slice(0,n),{playerName:o.fullName,handicap:o.handicap,result:null,isWinner:!1},...t.subBoxes.slice(n+1)]}}return t}));return console.log("Updated Bracket after Insertion:",n),p("Added "),v(""),[{round:1,matches:t},...n.slice(1)]}return v("Player already added once"),J(n),n}))},children:"Late"}),(0,lr.jsxs)("select",{className:"late-player-select",value:o?JSON.stringify(o):"",onChange:e=>l(JSON.parse(e.target.value)),children:[(0,lr.jsx)("option",{value:"",disabled:!0,children:"Add Late Players"}),s.map((e=>(0,lr.jsx)("option",{value:JSON.stringify(e),children:e.fullName},e.id)))]}),o&&(0,lr.jsxs)("div",{className:"LateSelect",children:[(0,lr.jsx)("div",{style:{backgroundColor:"lightgreen"},children:f}),"Selected: ",o.fullName]}),y&&(0,lr.jsx)("div",{children:y}),(0,lr.jsx)("button",{onClick:()=>{c&&ne((e=>{var t;const n=[...e],r=(null===(t=n[0])||void 0===t?void 0:t.matches)||[],i=M,s=r.reduce(((e,t)=>e+t.subBoxes.reduce(((e,t)=>e+(t.playerName===c.fullName?1:0)),0)),0);if(s<2){const e=r.reduce(((e,t)=>[...e,...t.subBoxes]),[]).filter((e=>!e.playerName));if(e.length>0){if(i){const t=e[0],i=r.map((e=>{const n=e.subBoxes.map((e=>e===t?{playerName:c.fullName,handicap:c.handicap,result:null,isWinner:!1}:e));return{...e,subBoxes:n}}));return g("Added "),v(""),console.log("Updated Bracket after Insertion:",n),[{round:1,matches:i},...n.slice(1)]}{const t=e[Math.floor(Math.random()*e.length)],i=r.map((e=>{const n=e.subBoxes.map((e=>e===t?{playerName:c.fullName,handicap:c.handicap,result:null,isWinner:!1}:e));return{...e,subBoxes:n}}));return g("Added "),v(""),console.log("Updated Bracket after Insertion:",n),[{round:1,matches:i},...n.slice(1)]}}v("No available sub-boxes to insert player")}else v("Player already added the allowed number of times");return J(n),n}))},children:"Buy Back"}),(0,lr.jsxs)("select",{className:"buyback-player-select",onChange:e=>u(JSON.parse(e.target.value)),defaultValue:"",children:[(0,lr.jsx)("option",{value:"",disabled:!0,children:"Add Buy Back"}),h.map(((e,t)=>(0,lr.jsx)("option",{value:JSON.stringify(e),children:e.fullName},t)))]}),c&&(0,lr.jsxs)("div",{className:"BuyBackPlayerSelect",children:[(0,lr.jsx)("div",{style:{backgroundColor:"lightgreen"},children:m}),"Selected: ",c.fullName]})]}),(0,lr.jsx)("div",{className:"TournamentBracket",children:r.map(((e,t)=>(0,lr.jsxs)("div",{className:"round-".concat(t+1),children:[(0,lr.jsxs)("h2",{children:["Round ",e.round]}),e.matches.map(((e,n)=>(0,lr.jsx)("div",{className:"mainBox",children:e.subBoxes.map(((i,s)=>(0,lr.jsxs)("div",{className:"subBox player ".concat(s%2===0?"even":"odd"),children:[0===t&&(0,lr.jsx)("div",{className:"player-number-label",children:G++}),(0,lr.jsx)("input",{className:"name-input ".concat(i.playerName?"occupied":""),type:"text",value:i.playerName,readOnly:!!i.playerName,onChange:e=>$(t,n,s,"playerName",e.target.value),onClick:e=>{"lightgreen"===e.target.style.backgroundColor?e.target.style.backgroundColor="lightcoral":e.target.style.backgroundColor="lightgreen"},onDoubleClick:e=>{e.target.style.backgroundColor=""}}),(0,lr.jsx)("input",{className:"handicap-input ".concat(i.playerName?"occupied":""),type:"text",placeholder:"",value:i.handicap,readOnly:!!i.playerName,onChange:e=>$(t,n,s,"handicap",parseInt(e.target.value,10))}),(0,lr.jsx)("input",{className:"checkbox-input",type:"checkbox",checked:i.isWinner,onChange:e=>{e.target.checked?$(t,n,s,"isWinner",!0):e.preventDefault()}}),i.handicap&&t<r.length-1&&i.handicap>e.subBoxes[1-s].handicap&&(0,lr.jsxs)("span",{className:"calculated-handicap ".concat(i.playerName?"occupied":""),children:["[",Math.min(50,Math.round(2*((i.handicap||0)-(e.subBoxes[1-s].handicap||0))/3)),"]"]})]},s)))},n)))]},t)))}),(0,lr.jsxs)("div",{className:"TournamentButtons",children:[(0,lr.jsx)("button",{onClick:()=>j(!R),children:"Options"}),R&&N.length>0&&(0,lr.jsxs)("div",{children:[(0,lr.jsx)("button",{onClick:()=>{window.confirm("Take a picture and expand the bracket?")?i((e=>{var t;const n=[...e];let r=2*((null===(t=n[0])||void 0===t?void 0:t.matches)||[]).length<32?32:64;const s=Math.ceil(Math.log2(r)),a=[];for(let i=1;i<=s;i++){const e=Math.pow(2,s-i),t=[];for(let n=1;n<=e;n++){const e=Array.from({length:2},((e,t)=>({playerName:"",handicap:"",result:null,isWinner:!1})));t.push({subBoxes:e})}a.push({round:i,matches:t})}n[0].matches.forEach(((e,t)=>{e.subBoxes.forEach(((e,n)=>{e.playerName&&(a[0].matches[t].subBoxes[n]={playerName:e.playerName,handicap:e.handicap,result:e.result,isWinner:e.isWinner})}))}));for(let i=1;i<a.length;i++)a[i].matches.forEach(((e,t)=>{e.subBoxes.forEach(((e,r)=>{var s;const o=null===(s=n[i])||void 0===s?void 0:s.matches[t];if(o){const e=o.subBoxes[r];e&&e.playerName&&(a[i].matches[t].subBoxes[r]={playerName:e.playerName,handicap:e.handicap,result:e.result,isWinner:e.isWinner})}}))}));return i(a),J(a),console.log("Bracket expanded successfully!"),a})):console.log("Expansion canceled")},children:"Expand Bracket"}),(0,lr.jsxs)("label",{children:[(0,lr.jsx)("input",{type:"checkbox",checked:M,onChange:()=>U(!M)}),"Click on above box to Insert BuyBack player into first available spot."]}),(0,lr.jsxs)("select",{onChange:e=>(e=>{try{const t=localStorage.getItem(e);if(t){const n=JSON.parse(t);ne(n),console.log("Bracket data from ".concat(e," retrieved and updated."))}else console.log("No saved bracket data found for ".concat(e,"."))}catch(t){console.error("Error retrieving and updating bracket data:",t.message)}})(e.target.value),children:[(0,lr.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Select Saved Bracket"}),N.slice(0,D).map((e=>(0,lr.jsx)("option",{value:e,children:e},e)))]}),N.length>D&&(0,lr.jsx)("button",{onClick:()=>{L((e=>e+10))},children:"Show More"})]}),x&&(0,lr.jsx)("div",{className:"success-message",children:x}),I&&(0,lr.jsx)("div",{className:"error-message",children:I}),(0,lr.jsx)("button",{onClick:async()=>{await(async()=>{try{const e=await or.players.toArray(),t={...E};await Promise.all(e.map((async e=>{const n=e.fullName;if(t.hasOwnProperty(n)){const r=parseFloat(e.totalwins)+parseFloat(t[n]);await or.players.where("id").equals(e.id).modify({wins:t[n],totalwins:isNaN(r)?0:r})}}))),console.log("Wins and Total Wins data submitted to the database"),T("Uploading Result....."),C("")}catch(e){C("Error updating Wins and Total Wins data in the database.",e.message),T(""),console.error("Error updating Wins and Total Wins data in the database:",e.message)}})(),await(async()=>{try{var e;const t=await te();await Promise.all(t.map((async e=>{await or.players.where("id").equals(e.id).modify({wins:0})}))),console.log("Wins Count:");const n={...E},i=new Set,s=Math.max(...Object.values(n)),a=Object.keys(n).filter((e=>n[e]===s)),o=await Promise.all(a.map((async e=>{const r=t.find((t=>t.fullName===e));let a=r.handicap;return 4===s?a=r.handicap-3:3===s&&(a=r.handicap-2),a=Math.max(-35,Math.min(50,a)),await or.players.where("id").equals(r.id).modify({handicap:a,wins:n[r.fullName]}),i.add(r.id),{id:r.id,fullName:e,wins:s,handicap:a}})));console.log("Players with the most wins (".concat(s,"):"),o);const l=Object.keys(n).filter((e=>n[e]===s-1)),c=await Promise.all(l.map((async e=>{const r=t.find((t=>t.fullName===e));let a=r.handicap;return 4===s?a=r.handicap-2:3===s&&(a=r.handicap-1),a=Math.max(-35,Math.min(50,a)),await or.players.where("id").equals(r.id).modify({handicap:a,wins:n[r.fullName]}),i.add(r.id),{id:r.id,fullName:e,wins:s-1,handicap:a}})));console.log("Players with ".concat(s-1," wins:"),c);const u=Object.keys(n).filter((e=>n[e]===s-2)),h=await Promise.all(u.map((async e=>{const r=t.find((t=>t.fullName===e));let a=r.handicap;return 4===s?a=r.handicap-1:3===s&&(a=r.handicap),a=Math.max(-35,Math.min(50,a)),await or.players.where("id").equals(r.id).modify({handicap:a,wins:n[r.fullName]}),i.add(r.id),{id:r.id,fullName:e,wins:s-2,handicap:a}})));console.log("Players with ".concat(s-2," wins:"),h);const d=null===(e=r[0])||void 0===e?void 0:e.matches.flatMap((e=>e.subBoxes)).map((e=>e.playerName)),f=await Promise.all(t.filter((e=>!n.hasOwnProperty(e.fullName)||0===n[e.fullName])).filter((e=>d.includes(e.fullName))).map((async e=>{if(i.has(e.id))return{id:e.id,fullName:e.fullName,wins:0,handicap:parseFloat(e.handicap)};{let t=parseFloat(e.handicap);return t=parseFloat(t)+2,t=Math.max(-35,Math.min(50,t)),await or.players.where("id").equals(e.id).modify({handicap:t,wins:n[e.fullName]}),i.add(e.id),{id:e.id,fullName:e.fullName,wins:0,handicap:t}}})));console.log("Players with no wins from round 1:",f);const p=Object.keys(n).filter((e=>n[e]>0&&n[e]<s-1)),m=await Promise.all(p.map((async e=>{const r=t.find((t=>t.fullName===e));let s=r.handicap;return s=r.handicap,s=Math.max(-35,Math.min(50,s)),await or.players.where("id").equals(r.id).modify({handicap:s,wins:n[r.fullName]}),i.add(r.id),{id:r.id,fullName:e,wins:n[r.fullName],handicap:s}})));console.log("Players between ".concat(s-2," and no wins:"),m)}catch(t){console.error("Error updating Wins and Losses data in the database:",t.message)}})(),await(async()=>{try{var e;const t=await or.players.toArray(),n=(new Date).toISOString().split("T")[0],i=gy(Zw,"players"),s=null===(e=r[0])||void 0===e?void 0:e.matches.flatMap((e=>e.subBoxes)).map((e=>e.playerName)),a=t.filter((e=>s.includes(e.fullName)));await Promise.all(a.map((async e=>{console.log("".concat(e.fullName," has ").concat(e.wins||0," wins.")),await zy(i,{fullName:e.fullName,handicap:e.handicap,wins:e.wins||0,totalWins:e.totalwins||0,date:n})}))),T("Result Successfully Uploaded!"),C("")}catch(t){console.error("Error uploading data to Firebase:",t.message),C("Error uploading data to Firebase. Please try again."),T("")}})(),await(async()=>{try{const{data:e,error:t}=await Ms.from("players").select("id, name, total_wins, total_played");if(t)throw t;const n=await or.players.toArray();for(const i of e){const e=i.name,t=(parseInt(i.total_wins)||0)+(E[e]||0),s=parseInt(i.total_played)||0;let a=0;r.forEach((t=>{t.matches.forEach((t=>{const n=t.subBoxes.some((t=>t.playerName===e)),r=t.subBoxes.some((t=>t.playerName!==e&&""!==t.playerName&&""!==t.handicap)),i=t.subBoxes.some((e=>!0===e.isWinner)),s=t.subBoxes.some((e=>"BYE"===e.playerName||"BYE"===e.playerName));n&&r&&i&&!s&&a++}))})),console.log("Total played for player ".concat(e,": played ").concat(a," (existing: ").concat(s,")"));const o=a+s,l=n.find((t=>t.fullName===e)),c=l?l.handicap:null;await Ms.from("players").update({total_wins:t,total_played:o}).eq("name",e);const u=(new Date).toISOString().split("T")[0];a>0&&await Ms.from("result").insert([{created_at:u,player_id:i.id,total_win:t,wins:E[e]||0,new_handicap:c,played:a}])}console.log("Player wins and total played updated successfully!")}catch(e){console.error("Error updating player wins and total played:",e)}})(),console.log("Results submitted. Check console for player win counts.")},children:"Submit Results"}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("button",{onClick:()=>H(!W),children:W?"Hide Buttons":"Dont Use"}),W&&(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"roundIndex",children:"Round Index:"}),(0,lr.jsx)("input",{type:"number",id:"roundIndex",name:"roundIndex",value:F,onChange:e=>B(parseInt(e.target.value))})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"matchIndex",children:"Match Index:"}),(0,lr.jsx)("input",{type:"number",id:"matchIndex",name:"matchIndex",value:V,onChange:e=>z(parseInt(e.target.value))})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"subBoxIndex",children:"Sub Box Index:"}),(0,lr.jsx)("input",{type:"number",id:"subBoxIndex",name:"subBoxIndex",value:K,onChange:e=>q(parseInt(e.target.value))})]}),(0,lr.jsx)("button",{onClick:()=>((e,t,n)=>{i((r=>{const i=[...r];return i[e]&&i[e].matches[t]&&(i[e].matches[t].subBoxes[n]={playerName:"",handicap:"",result:null,isWinner:!1}),i}))})(F,V,K),children:"Clear Sub Box"})]})]})]}),(0,lr.jsx)("div",{})]})},t_=()=>{const[t,n]=(0,e.useState)([]);(0,e.useEffect)((()=>{r()}),[]);const r=async()=>{try{const e=(await or.players.toArray()).filter((e=>e.availability));e.sort(((e,t)=>(t.totalwins||0)-(e.totalwins||0)));const t=e.map(((e,t)=>({rank:t+1,name:e.fullName,handicap:e.handicap,wins:e.wins||0,totalWins:e.totalwins||0})));n(t)}catch(e){console.error("Error fetching player wins data:",e.message)}};return(0,lr.jsxs)("div",{className:"container",children:[(0,lr.jsx)("h2",{className:"heading",children:"Result"}),(0,lr.jsxs)("table",{className:"player-table",children:[(0,lr.jsx)("thead",{children:(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("th",{className:"rank"}),(0,lr.jsx)("th",{children:"Player Name"}),(0,lr.jsx)("th",{children:"Handicap"}),(0,lr.jsx)("th",{children:"Wins"}),(0,lr.jsx)("th",{children:"Total Wins"})]})}),(0,lr.jsx)("tbody",{children:t.map((e=>(0,lr.jsxs)("tr",{className:"row",children:[(0,lr.jsx)("td",{className:"cell rank",children:e.rank}),(0,lr.jsx)("td",{className:"cell name",children:e.name}),(0,lr.jsx)("td",{className:"cell handicap",children:e.handicap}),(0,lr.jsx)("td",{className:"cell win",children:e.wins}),(0,lr.jsx)("td",{className:"cell total-wins",children:e.totalWins})]},e.rank)))})]})]})},n_=()=>(0,lr.jsxs)("div",{children:[(0,lr.jsx)("style",{children:"\n    .info-container {\n        width: 93%;\n        margin: 0;\n        margin-left:5px;\n    }\n\n    .section {\n        margin-bottom: 30px;\n    }\n\n    h3 {\n        margin-bottom: 0;\n        color: rgb(6, 49, 49);\n        padding: 10px;\n        background-color: #274f41;\n        color: white;\n        border-left: 5px solid #4CAF50; /* Add a left border with a different color */\n        border-bottom: 1px solid #ccc; /* Add a bottom border */\n        margin-bottom: -10px;\n        text-align: left;\n    }\n\n    .table-container {\n        overflow-x: auto;\n    }\n\n    table {\n        width: 100%;\n        border-collapse: collapse;\n    }\n\n    td {\n        padding: 10px;\n        border: 1px solid #ddd;\n        background-color: lightgrey; /* Set default background color */\n    }\n\n    tr:nth-child(even) td {\n        background-color: #b1b1b1; /* Apply background color to even rows */\n    }\n\n    td:first-child {\n        width: 30px;\n        text-align: center;\n        background-color: #fff;\n    }\n    tr:hover td {\n        background-color: white; /* Change background color on hover */\n    }\n"}),(0,lr.jsxs)("div",{className:"info-container",children:[(0,lr.jsxs)("section",{className:"section",children:[(0,lr.jsx)("h3",{children:"Development Information for Snooker Draw Web App"}),(0,lr.jsx)("div",{className:"table-container",children:(0,lr.jsx)("table",{children:(0,lr.jsxs)("tbody",{children:[(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"Developer:"}),(0,lr.jsx)("td",{children:"Anil Karki"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"Collaborators:"}),(0,lr.jsx)("td",{children:(0,lr.jsxs)("ul",{children:[(0,lr.jsx)("li",{children:"Paul Dutra "}),(0,lr.jsx)("li",{children:"Carl Simon "}),(0,lr.jsx)("li",{children:"Fabio Rosa "})]})})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"Project Description:"}),(0,lr.jsx)("td",{children:"The snooker draw web app simplifies monday night competition organization and management online."})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"Development Stack:"}),(0,lr.jsx)("td",{children:(0,lr.jsxs)("ul",{children:[(0,lr.jsx)("li",{children:"Frontend: CSS, ReactJS"}),(0,lr.jsx)("li",{children:"Database: IndexedDB, Supabase"}),(0,lr.jsx)("li",{children:"Deployment: Github"}),(0,lr.jsx)("li",{children:"Backup: Firebase"})]})})]})]})})})]}),(0,lr.jsx)("section",{className:"section",children:(0,lr.jsx)("h2",{children:"Instructions:"})}),(0,lr.jsxs)("section",{className:"section",children:[(0,lr.jsx)("h3",{children:"Add New Player"}),(0,lr.jsx)("div",{className:"table-container",children:(0,lr.jsx)("table",{children:(0,lr.jsxs)("tbody",{children:[(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"1."}),(0,lr.jsx)("td",{children:"Click on \u201cAdd player\u201d"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"2."}),(0,lr.jsx)("td",{children:"Type Full name"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"3."}),(0,lr.jsx)("td",{children:"Type Handicap"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"4."}),(0,lr.jsx)("td",{children:"Click on \u201cSubmit\u201d"})]})]})})})]}),(0,lr.jsxs)("section",{className:"section",children:[(0,lr.jsx)("h3",{children:"To Do Draw"}),(0,lr.jsx)("div",{className:"table-container",children:(0,lr.jsx)("table",{children:(0,lr.jsxs)("tbody",{children:[(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"1."}),(0,lr.jsx)("td",{children:"Click \u201cOnsite\u201d"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"2."}),(0,lr.jsx)("td",{children:"Click Select All box and click Reset and press OK"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"3."}),(0,lr.jsx)("td",{children:"For those playing click their box on the right"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"4."}),(0,lr.jsx)("td",{children:"Click \u201cSubmit Attendance\u201d"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"5."}),(0,lr.jsx)("td",{children:"Click on \u201cAvailable\u201d top of screen between Onsite and Draw"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"6."}),(0,lr.jsx)("td",{children:"Click on \u201cDraw\u201d at top of screen between Available and Result"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"7."}),(0,lr.jsx)("td",{children:"Click on \u201cStart\u201d (You\u2019ll see a random draw at Round 1)"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"8."}),(0,lr.jsx)("td",{children:"Click on each player\u2019s name to mark game in progress it will light Green."})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"9."}),(0,lr.jsx)("td",{children:"Tick to select winner after the game is completed"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"10."}),(0,lr.jsx)("td",{children:"Click on each player\u2019s name again to mark game complete it will light Red."})]})]})})})]}),(0,lr.jsxs)("section",{className:"section",children:[(0,lr.jsx)("h3",{children:"Add Late Player after the Draw"}),(0,lr.jsx)("div",{className:"table-container",children:(0,lr.jsx)("table",{children:(0,lr.jsxs)("tbody",{children:[(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"1."}),(0,lr.jsx)("td",{children:"Click on \u201cAdd Late Players\u201d at top of screen between Late and Buy Back"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"2."}),(0,lr.jsx)("td",{children:"On drop down list below \u201cAdd Late Player\u201d Click the name of that late player and it\u2019ll show the name of that selected late player"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"3."}),(0,lr.jsx)("td",{children:"Press the \u201cLate\u201d box"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"4."}),(0,lr.jsx)("td",{children:"That late player\u2019s name will then be shown in Round 1 list"})]})]})})})]}),(0,lr.jsxs)("section",{className:"section",children:[(0,lr.jsx)("h3",{children:"To Do Computer Buy Back (Recommended)"}),(0,lr.jsx)("div",{className:"table-container",children:(0,lr.jsx)("table",{children:(0,lr.jsxs)("tbody",{children:[(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"1."}),(0,lr.jsx)("td",{children:"Click \u201cRefresh\u201d between Start and Late"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"2."}),(0,lr.jsx)("td",{children:"Click Buy Back white box on the right with drop down list"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"3."}),(0,lr.jsx)("td",{children:"Click the name of that buy back player and it\u2019ll show the name of that selected buy back player"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"4."}),(0,lr.jsx)("td",{children:"Then click Buy Back Green Box on the left"})]})]})})})]}),(0,lr.jsxs)("section",{className:"section",children:[(0,lr.jsx)("h3",{children:"To Do Manual Buy Back"}),(0,lr.jsx)("div",{className:"table-container",children:(0,lr.jsx)("table",{children:(0,lr.jsxs)("tbody",{children:[(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"1."}),(0,lr.jsx)("td",{children:"Record on paper players who wish to buy back"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"2."}),(0,lr.jsx)("td",{children:"Draw names to be entered in Round 1"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"3."}),(0,lr.jsx)("td",{children:"Scroll down to the bottom and click on \u201cOptions\u201d"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"4."}),(0,lr.jsx)("td",{children:"Click on the small square box, you should see blue tick"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"5."}),(0,lr.jsx)("td",{children:"Scroll to top"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"6."}),(0,lr.jsx)("td",{children:"Click \u201cRefresh\u201d between Start and Late"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"7."}),(0,lr.jsx)("td",{children:"Click Buy Back white box on the right with drop down list"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"8."}),(0,lr.jsx)("td",{children:"Click the name of that buy back player and it\u2019ll show the name of that selected buy back player"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"9."}),(0,lr.jsx)("td",{children:"Then click Buy Back Green Box on the left"})]})]})})})]}),(0,lr.jsxs)("section",{className:"section",children:[(0,lr.jsx)("h3",{children:"Submit Result Online"}),(0,lr.jsx)("div",{className:"table-container",children:(0,lr.jsx)("table",{children:(0,lr.jsx)("tbody",{children:(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"1."}),(0,lr.jsx)("td",{children:"Scroll down click on \u201cSubmit Results\u201d green box (it should say result successfully uploaded)"})]})})})})]}),(0,lr.jsxs)("section",{className:"section",children:[(0,lr.jsx)("h3",{children:"History"}),(0,lr.jsx)("div",{className:"table-container",children:(0,lr.jsx)("table",{children:(0,lr.jsxs)("tbody",{children:[(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"1."}),(0,lr.jsx)("td",{children:"Scroll down click \u201cOptions\u201d green box"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"2."}),(0,lr.jsx)("td",{children:"Click the white box which says \u201cSelect Saved Bracket\u201d"})]}),(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:"3."}),(0,lr.jsx)("td",{children:"Choose latest date to view the history by clicking that date"})]})]})})})]})]})]}),r_=()=>{const[t,n]=(0,e.useState)(),[r,i]=(0,e.useState)([]),[s,a]=(0,e.useState)([]),[o,l]=(0,e.useState)(null),[c,u]=(0,e.useState)(null),[h,d]=(0,e.useState)([]),[f,p]=(0,e.useState)(""),[m,g]=(0,e.useState)(""),[y,v]=(0,e.useState)(""),[b,w]=(0,e.useState)([]),[_,k]=(0,e.useState)(-1),[E,S]=(0,e.useState)({}),[x,T]=(0,e.useState)(""),[I,C]=(0,e.useState)(""),[N,P]=(0,e.useState)([]),[A,O]=(0,e.useState)(""),[R,j]=(0,e.useState)(!1),[D,L]=(0,e.useState)(10),[M,U]=(0,e.useState)(!1),[F,B]=(0,e.useState)(0),[V,z]=(0,e.useState)(0),[K,q]=(0,e.useState)(0),[W,H]=(0,e.useState)(!1),[G,J]=(0,e.useState)(!1),[Q,X]=(0,e.useState)([""]);(0,e.useEffect)((()=>{const e=e=>{const t="Are you sure you want to leave? Your unsaved changes may be lost.";return e.returnValue=t,t};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[]);let Y=1;(0,e.useEffect)((()=>{ie(),Z(),te(),ee()}),[]),(0,e.useEffect)((()=>{const e=setTimeout((()=>{p(""),g("")}),5e3);return()=>{clearTimeout(e)}}),[f,m]),(0,e.useEffect)((()=>{(()=>{const e=Object.keys(localStorage).filter((e=>e.startsWith("Draw_"))).sort(((e,t)=>{const n=new Date(e.replace("Draw_",""));return new Date(t.replace("Draw_",""))-n}));P(e)})()}),[]);const $=async e=>{try{const n=(new Date).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),r=A||"Draw_".concat(n),i=JSON.stringify(e);localStorage.setItem(r,i),O(r),console.log("Bracket data saved locally as ".concat(r,"."));try{const{data:e,error:t}=await Ms.from("tournament").select("created_at").eq("name",r);if(t)throw t;if(e.length>0){const{data:e,error:t}=await Ms.from("tournament").update({draw:i}).eq("name",r);if(t)throw t;console.log("Bracket data updated online for ".concat(r,"."))}else{const{data:e,error:t}=await Ms.from("tournament").insert([{created_at:n,draw:i,name:r}]);if(t)throw t;console.log("Bracket data synced online successfully for ".concat(r,"."))}}catch(t){console.error("Error syncing bracket data online:",t.message)}}catch(t){console.error("Error saving bracket data locally:",t.message)}},Z=async()=>{try{const e=(await or.players.toArray()).filter((e=>e.availability));console.log("Available Players:",e)}catch(e){console.error("Error fetching players from the database:",e)}},ee=async()=>{try{const e=(await or.players.toArray()).filter((e=>!e.availability));a(e),console.log("Unavailable Players:",e)}catch(e){console.error("Error fetching players from the database:",e)}},te=()=>{try{var e;const t=((null===(e=r[0])||void 0===e?void 0:e.matches)||[]).reduce(((e,t)=>(t.subBoxes.forEach((t=>{t.playerName&&"BYE"!==t.playerName&&e.push({id:t.playerId,fullName:t.playerName,handicap:t.handicap})})),e)),[]);d(t)}catch(t){console.error("Error fetching buy-back players from the database:",t)}},ne=e=>{var t;const n=((null===(t=r[0])||void 0===t?void 0:t.matches)||[]).flatMap(((e,t)=>e.subBoxes.map(((e,n)=>({subBox:e,matchIndex:t,subBoxIndex:n})))));return n.filter((t=>{let{subBox:n}=t;return n.playerName===e.fullName}))},re=(e,t,n,r,i)=>{oe((s=>{const a=[...s],o=a[e].matches[t].subBoxes[n];if("isWinner"===r&&void 0!==i){const r=a[e].matches[t].subBoxes[0===n?1:0].playerName,s=a[e].matches[t].subBoxes[1-n].isWinner;if(console.log("checking ".concat(s)),s&&S((e=>{const t={...e};return t[r]=Math.max(0,(t[r]||0)-1),console.log("Player ".concat(r," wins reverted to: ").concat(t[r])),t})),a[e].matches[t].subBoxes.forEach(((e,t)=>{t!==n&&(e.isWinner=!1,e.hasWon=!1)})),i&&e<a.length-1){const n=e+1,r=Math.floor(t/2),i=t%2,s=o.playerName;a[n].matches[r].subBoxes[i]={playerName:s,handicap:o.handicap,result:null,isWinner:!1,hasWon:!1},console.log("Moving ".concat(s," to the next round"))}}"isWinner"===r&&!i&&o.isWinner&&(o.hasWon=!1),o[r]=void 0!==i?i:"";const l=""!==a[e].matches[t].subBoxes[1-n].playerName,c="BYE"===a[e].matches[t].subBoxes[1-n].playerName;if("isWinner"===r&&i&&!o.hasWon&&l&&!c){const r=a[e].matches[t].subBoxes[1-n].isWinner;S((e=>{const t={...e};return r?(t[o.playerName]=Math.max(0,(t[o.playerName]||0)-1),console.log("Player ".concat(o.playerName," wins decremented to: ").concat(t[o.playerName]))):(t[o.playerName]=(t[o.playerName]||0)+1,console.log("Player ".concat(o.playerName," wins: ").concat(t[o.playerName]))),t})),o.hasWon=!0}else!i&&o.hasWon&&(o.hasWon=!1);return $(a),a}))},ie=async()=>{let e=(await or.players.toArray()).filter((e=>e.availability)).length,t=e;(e>2&&e<=11||e>11&&e<=32)&&(t=32);const n=Math.ceil(Math.log2(t)),r=[];for(let i=1;i<=n;i++){const e=Math.pow(2,n-i),t=[];for(let n=1;n<=e;n++){const e=Array.from({length:2},((e,t)=>({playerName:"",handicap:"",result:null,isWinner:!1})));t.push({subBoxes:e})}r.push({round:i,matches:t})}i(r)},se=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t},ae=async()=>{try{return(await or.players.toArray()).slice(0,t)}catch(e){return console.error("Error fetching players from the database:",e),[]}};(0,e.useEffect)((()=>{console.log("Updated Bracket:",r)}),[r]);const oe=e=>{w((t=>[...t.slice(0,_+1),e])),k(_+1),i(e)};return(0,lr.jsxs)("div",{className:"TournamentH",children:[(0,lr.jsx)("h2",{children:"Tournament Bracket"}),(0,lr.jsxs)("div",{className:"TournamentButtons",children:[(0,lr.jsx)("button",{onClick:async()=>{G?window.alert("Please wait. The action is already in progress."):(J(!0),await(async()=>{const e=await ae();if(e.length>0){var t;const n=e.filter((e=>e.availability)),s=Math.floor(n.length/2),a=Array(s).fill({playerName:"",handicap:"",result:null,isWinner:!1}),o=se(n),c=se(a);null!==(t=r[0])&&void 0!==t&&t.matches.some((e=>e.subBoxes.some((e=>e.playerName))))||(i((e=>{var t;const n=[...e],r=(null===(t=n[0])||void 0===t?void 0:t.matches)||[],i=2*r.length;for(let s=0;s<i;s++){const e=Math.floor(s/2),t=s%2;s<o.length?r[e].subBoxes[t]={playerName:o[s].fullName,handicap:o[s].handicap,result:null,isWinner:!1}:s-o.length<c.length?r[e].subBoxes[t]={playerName:"",handicap:"",result:null,isWinner:!1}:r[e].subBoxes[t]={playerName:"BYE",handicap:"",result:null,isWinner:!1}}return oe(n),$(n),n})),i((e=>{var t;const n=[...e];return((null===(t=n[0])||void 0===t?void 0:t.matches)||[]).forEach((e=>{e.subBoxes=se(e.subBoxes)})),oe(n),$(n),n}))),l(null),u(null)}})(),i((e=>{var t;const n=[...e],r=(null===(t=n[0])||void 0===t?void 0:t.matches)||[],i=r.reduce(((e,t)=>e.concat(t.subBoxes.map((e=>({playerName:e.playerName,handicap:e.handicap}))))),[]),s=i.slice(0,8),a=i.slice(8),o=se(s);r.slice(0,4).forEach(((e,t)=>{e.subBoxes.forEach((e=>{e.playerName=o[2*t].playerName,e.handicap=o[2*t].handicap})),e.subBoxes[1].playerName=o[2*t+1].playerName,e.subBoxes[1].handicap=o[2*t+1].handicap}));const l=se(a);let c=0;return r.slice(4).forEach((e=>{e.subBoxes.forEach((e=>{e.playerName=l[c].playerName,e.handicap=l[c].handicap,c++}))})),r.forEach((e=>{e.subBoxes.forEach((e=>{e.result=null,e.isWinner=!1}))})),oe(n),$(n),n})),await $())},disabled:G,children:"Start"}),(0,lr.jsx)("button",{onClick:te,children:"Refresh"}),(0,lr.jsx)("button",{onClick:()=>{console.log("Inserting late player into round 1..."),o?oe((e=>{var t;console.log("Updating bracket and history for late player...");const n=[...e],r=(null===(t=n[0])||void 0===t?void 0:t.matches)||[],i=M;if(r.some((e=>e.subBoxes.some((e=>e.playerName===o.fullName)))))return v("Player already added once"),n;let s=!1;if(!i){console.log("Inserting into specific sub-box based on conditions...");const e=(e=>{let t;console.log("Determining sub-box to insert into...");const n=e.reduce(((e,t,n)=>{const r=t.subBoxes.map(((e,t)=>({subBox:e,matchIndex:n,subBoxIndex:t})));return[...e,...r.filter((e=>{let{subBox:t}=e;return!t.playerName}))]}),[]);n.length>0&&(t=n[Math.floor(Math.random()*n.length)]);return t?(console.log("Sub-box determined:",t),t):(v("No available sub-boxes in the selected match to insert player"),null)})(r);if(!e)return console.log("No suitable sub-box found."),v("No available sub-boxes to insert player"),n;const{matchIndex:t,subBoxIndex:i}=e,s=r.map(((e,n)=>{if(n===t){const t=e.subBoxes.map(((e,t)=>t===i?{playerName:o.fullName,handicap:o.handicap,result:null,isWinner:!1}:e));return{...e,subBoxes:t}}return e}));return p("Added"),v(""),console.log("Player inserted into specific sub-box based on conditions."),$(n),[{round:1,matches:s},...n.slice(1)]}{console.log("Inserting into first available sub-box...");const e=r.map((e=>{if(!s){const t=e.subBoxes.findIndex((e=>!e.playerName));if(-1!==t)return s=!0,console.log("Inserting Player:",o.fullName,"into Match:",e,"Sub-Box Index:",t),{...e,subBoxes:[...e.subBoxes.slice(0,t),{playerName:o.fullName,handicap:o.handicap,result:null,isWinner:!1},...e.subBoxes.slice(t+1)]}}return e}));if(s)return console.log("Player inserted into first available sub-box."),p("Added"),v(""),$(n),[{round:1,matches:e},...n.slice(1)]}return console.log("No available sub-boxes to insert player."),v("No available sub-boxes to insert player"),n})):console.log("No late player to add.")},children:"Late"}),(0,lr.jsxs)("select",{className:"late-player-select",value:o?JSON.stringify(o):"",onChange:e=>l(JSON.parse(e.target.value)),children:[(0,lr.jsx)("option",{value:"",disabled:!0,children:"Add Late Players"}),s.map((e=>(0,lr.jsx)("option",{value:JSON.stringify(e),children:e.fullName},e.id)))]}),o&&(0,lr.jsxs)("div",{className:"LateSelect",children:[(0,lr.jsx)("div",{style:{backgroundColor:"lightgreen"},children:f}),"Selected: ",o.fullName]}),y&&(0,lr.jsx)("div",{children:y}),(0,lr.jsx)("button",{onClick:()=>{if(console.log("Inserting buyback player into round 1..."),!c)return void console.log("No buyback player to add.");oe((e=>{var t;console.log("Updating bracket and history...");const n=[...e],r=(null===(t=n[0])||void 0===t?void 0:t.matches)||[],i=M;if(r.some((e=>e.subBoxes.some((e=>e.isWinner&&e.playerName===c.fullName)))))return v("Winner in Round 1 cannot buy back"),n;let s=r.reduce(((e,t)=>e+t.subBoxes.reduce(((e,t)=>e+(t.playerName===c.fullName?1:0)),0)),0);if(console.log("Current Count:",s),console.log("Number of Repetitions Allowed:",2),s<2){const e=r.reduce(((e,t)=>[...e,...t.subBoxes]),[]).filter((e=>!e.playerName));if(e.length>0){if(i){console.log("Inserting into first available sub-box...");const t=e[0],i=r.map((e=>{const n=e.subBoxes.map((e=>e===t?{playerName:c.fullName,handicap:c.handicap,result:null,isWinner:!1}:e));return{...e,subBoxes:n}}));return g("Added "),v(""),console.log("Player inserted into first available sub-box."),[{round:1,matches:i},...n.slice(1)]}{console.log("Inserting into specific sub-box based on conditions...");const e=(e=>{let t;console.log("Determining sub-box to insert into...");const n=e.reduce(((e,t,n)=>{const r=t.subBoxes.map(((e,t)=>({subBox:e,matchIndex:n,subBoxIndex:t})));return[...e,...r.filter((e=>{let{subBox:t}=e;return!t.playerName}))]}),[]);let r;r=Q.matchIndex<=7?n.filter((t=>t.matchIndex>7&&!e[t.matchIndex].subBoxes[t.subBoxIndex].playerName)):n.filter((t=>t.matchIndex<=7&&!e[t.matchIndex].subBoxes[t.subBoxIndex].playerName));let i=r.filter((t=>{let{matchIndex:n,subBoxIndex:r}=t;const i=0===r?1:0;return"BYE"!==e[n].subBoxes[i].playerName}));t=i.length>0?i[Math.floor(Math.random()*i.length)]:r.length>0?r[Math.floor(Math.random()*r.length)]:n[Math.floor(Math.random()*n.length)];return console.log("nonbymatch",i),t?(console.log("Sub-box determined:",t),t):(v("No available sub-boxes in the selected match to insert player"),null)})(r);if(!e)return console.log("No suitable sub-box found."),v("No available sub-boxes to insert player"),n;const{matchIndex:t,subBoxIndex:i}=e,a=r.map(((e,n)=>{if(n===t){const t=e.subBoxes.map(((e,t)=>t===i?{playerName:c.fullName,handicap:c.handicap,result:null,isWinner:!1}:e));return{...e,subBoxes:t}}return e}));return g("Added "),v(""),console.log("Player inserted into specific sub-box based on conditions."),console.log(" current count after",s),console.log("random added buyback"),[{round:1,matches:a},...n.slice(1)]}}console.log("No available sub-boxes to insert player."),v("No available sub-boxes to insert player")}else console.log("Player insertion not allowed due to repetition limit."),v("Not Allowed Buyback twice");return $(n),console.log("Bracket and history updated."),n}))},children:"Buy Back"}),(0,lr.jsxs)("select",{className:"buyback-player-select",onChange:e=>{const t=JSON.parse(e.target.value);u(t),ne(t).forEach((e=>{let{subBox:t,matchIndex:n,subBoxIndex:r}=e;X({subBox:t,matchIndex:n,subBoxIndex:r})}))},defaultValue:"",children:[(0,lr.jsx)("option",{value:"",disabled:!0,children:"Add Buy Back"}),h.map(((e,t)=>(0,lr.jsx)("option",{value:JSON.stringify(e),children:e.fullName},t)))]}),c&&(0,lr.jsxs)("div",{className:"BuyBackPlayerSelect",children:[(0,lr.jsx)("div",{style:{backgroundColor:"lightgreen"},children:m}),"Selected: ",c.fullName]})]}),(0,lr.jsx)("div",{className:"TournamentBracket",children:r.map(((e,t)=>(0,lr.jsxs)("div",{className:"round-".concat(t+1),children:[(0,lr.jsxs)("h2",{children:["Round ",e.round]}),e.matches.map(((e,n)=>(0,lr.jsx)("div",{className:"mainBox",children:e.subBoxes.map(((i,s)=>(0,lr.jsxs)("div",{className:"subBox player ".concat(s%2===0?"even":"odd"),children:[0===t&&(0,lr.jsx)("div",{className:"player-number-label",children:Y++}),(0,lr.jsx)("input",{className:"name-input ".concat(i.playerName?"occupied":""),type:"text",value:i.playerName,readOnly:!!i.playerName,onChange:e=>re(t,n,s,"playerName",e.target.value),onClick:e=>{"lightgreen"===e.target.style.backgroundColor?e.target.style.backgroundColor="lightcoral":e.target.style.backgroundColor="lightgreen"},onDoubleClick:e=>{e.target.style.backgroundColor=""}}),(0,lr.jsx)("input",{className:"handicap-input ".concat(i.playerName?"occupied":""),type:"text",placeholder:"",value:i.handicap,readOnly:!!i.playerName,onChange:e=>re(t,n,s,"handicap",parseInt(e.target.value,10))}),(0,lr.jsx)("input",{className:"checkbox-input",type:"checkbox",checked:i.isWinner,onChange:e=>{e.target.checked?re(t,n,s,"isWinner",!0):e.preventDefault()}}),(0,lr.jsx)("span",{children:i.handicap&&t<r.length-1&&i.handicap>e.subBoxes[1-s].handicap&&(0,lr.jsxs)("span",{className:"calculated-handicap ".concat(i.playerName?"occupied":""),children:["[",Math.min(50,Math.round(2*((i.handicap||0)-(e.subBoxes[1-s].handicap||0))/3)),"]"]})})]},s)))},n)))]},t)))}),(0,lr.jsxs)("div",{className:"TournamentButtons",children:[(0,lr.jsx)("button",{onClick:()=>j(!R),children:"Options"}),R&&N.length>0&&(0,lr.jsxs)("div",{children:[(0,lr.jsx)("button",{onClick:()=>{i((e=>{var t;const n=[...e],r=(null===(t=n[0])||void 0===t?void 0:t.matches)||[],i=r.reduce(((e,t)=>e.concat(t.subBoxes.map((e=>({playerName:e.playerName,handicap:e.handicap}))))),[]),s=se(i);let a=0;return r.forEach((e=>{e.subBoxes.forEach((e=>{e.playerName=s[a].playerName,e.handicap=s[a].handicap,a++}))})),r.forEach((e=>{e.subBoxes.forEach((e=>{e.result=null,e.isWinner=!1}))})),oe(n),$(n),n}))},children:"Reshuffle Round 1 Players"}),(0,lr.jsxs)("label",{children:[(0,lr.jsx)("input",{type:"checkbox",checked:M,onChange:()=>U(!M)}),"Click on above box to Insert BuyBack player into first available sub-box"]}),(0,lr.jsxs)("select",{onChange:e=>(e=>{try{const t=localStorage.getItem(e);if(t){const n=JSON.parse(t);oe(n),console.log("Bracket data from ".concat(e," retrieved and updated."))}else console.log("No saved bracket data found for ".concat(e,"."))}catch(t){console.error("Error retrieving and updating bracket data:",t.message)}})(e.target.value),children:[(0,lr.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Select Saved Bracket"}),N.slice(0,D).map((e=>(0,lr.jsx)("option",{value:e,children:e},e)))]}),N.length>D&&(0,lr.jsx)("button",{onClick:()=>{L((e=>e+10))},children:"Show More"})]}),x&&(0,lr.jsx)("div",{className:"success-message",children:x}),I&&(0,lr.jsx)("div",{className:"error-message",children:I}),(0,lr.jsx)("button",{onClick:async()=>{await(async()=>{try{const e=await or.players.toArray(),t={...E};await Promise.all(e.map((async e=>{const n=e.fullName;if(t.hasOwnProperty(n)){const r=parseFloat(e.totalwins)+parseFloat(t[n]);await or.players.where("id").equals(e.id).modify({wins:t[n],totalwins:isNaN(r)?0:r})}}))),console.log("Wins and Total Wins data submitted to the database"),T("Uploading Result....."),C("")}catch(e){C("Error updating Wins and Total Wins data in the database.",e.message),T(""),console.error("Error updating Wins and Total Wins data in the database:",e.message)}})(),await(async()=>{try{var e;const t=await ae();await Promise.all(t.map((async e=>{await or.players.where("id").equals(e.id).modify({wins:0})}))),console.log("Wins Count:");const n={...E},i=new Set,s=Math.max(...Object.values(n)),a=Object.keys(n).filter((e=>n[e]===s)),o=await Promise.all(a.map((async e=>{const r=t.find((t=>t.fullName===e));let a=r.handicap;return 4===s?a=r.handicap-3:3===s&&(a=r.handicap-2),a=Math.max(-35,Math.min(50,a)),await or.players.where("id").equals(r.id).modify({handicap:a,wins:n[r.fullName]}),i.add(r.id),{id:r.id,fullName:e,wins:s,handicap:a}})));console.log("Players with the most wins (".concat(s,"):"),o);const l=Object.keys(n).filter((e=>n[e]===s-1)),c=await Promise.all(l.map((async e=>{const r=t.find((t=>t.fullName===e));let a=r.handicap;return 4===s?a=r.handicap-2:3===s&&(a=r.handicap-1),a=Math.max(-35,Math.min(50,a)),await or.players.where("id").equals(r.id).modify({handicap:a,wins:n[r.fullName]}),i.add(r.id),{id:r.id,fullName:e,wins:s-1,handicap:a}})));console.log("Players with ".concat(s-1," wins:"),c);const u=Object.keys(n).filter((e=>n[e]===s-2)),h=await Promise.all(u.map((async e=>{const r=t.find((t=>t.fullName===e));let a=r.handicap;return 4===s?a=r.handicap-1:3===s&&(a=r.handicap),a=Math.max(-35,Math.min(50,a)),await or.players.where("id").equals(r.id).modify({handicap:a,wins:n[r.fullName]}),i.add(r.id),{id:r.id,fullName:e,wins:s-2,handicap:a}})));console.log("Players with ".concat(s-2," wins:"),h);const d=null===(e=r[0])||void 0===e?void 0:e.matches.flatMap((e=>e.subBoxes)).map((e=>e.playerName)),f=await Promise.all(t.filter((e=>!n.hasOwnProperty(e.fullName)||0===n[e.fullName])).filter((e=>d.includes(e.fullName))).map((async e=>{if(i.has(e.id))return{id:e.id,fullName:e.fullName,wins:0,handicap:parseFloat(e.handicap)};{let t=parseFloat(e.handicap);return t=parseFloat(t)+2,t=Math.max(-35,Math.min(50,t)),await or.players.where("id").equals(e.id).modify({handicap:t,wins:n[e.fullName]}),i.add(e.id),{id:e.id,fullName:e.fullName,wins:0,handicap:t}}})));console.log("Players with no wins from round 1:",f);const p=Object.keys(n).filter((e=>n[e]>0&&n[e]<s-1)),m=await Promise.all(p.map((async e=>{const r=t.find((t=>t.fullName===e));let s=r.handicap;return s=r.handicap,s=Math.max(-35,Math.min(50,s)),await or.players.where("id").equals(r.id).modify({handicap:s,wins:n[r.fullName]}),i.add(r.id),{id:r.id,fullName:e,wins:n[r.fullName],handicap:s}})));console.log("Players between ".concat(s-2," and no wins:"),m)}catch(t){console.error("Error updating Wins and Losses data in the database:",t.message)}})(),await(async()=>{try{const{data:e,error:t}=await Ms.from("players").select("id, name, total_wins, total_played");if(t)throw t;const n=await or.players.toArray();for(const i of e){const e=i.name,t=(parseInt(i.total_wins)||0)+(E[e]||0),s=parseInt(i.total_played)||0;let a=0;r.forEach((t=>{t.matches.forEach((t=>{const n=t.subBoxes.some((t=>t.playerName===e)),r=t.subBoxes.some((t=>t.playerName!==e&&""!==t.playerName&&""!==t.handicap)),i=t.subBoxes.some((e=>!0===e.isWinner)),s=t.subBoxes.some((e=>"BYE"===e.playerName||"BYE"===e.playerName));n&&r&&i&&!s&&a++}))})),console.log("Total played for player ".concat(e,": played ").concat(a," (existing: ").concat(s,")"));const o=a+s,l=n.find((t=>t.fullName===e)),c=l?l.handicap:null;await Ms.from("players").update({total_wins:t,total_played:o}).eq("name",e);const u=(new Date).toISOString().split("T")[0];a>0&&await Ms.from("result").insert([{created_at:u,player_id:i.id,total_win:t,wins:E[e]||0,new_handicap:c,played:a}])}console.log("Player wins and total played updated successfully!")}catch(e){console.error("Error updating player wins and total played:",e)}})(),await(async()=>{try{var e;const t=await or.players.toArray(),n=(new Date).toISOString().split("T")[0],i=gy(Zw,"players"),s=null===(e=r[0])||void 0===e?void 0:e.matches.flatMap((e=>e.subBoxes)).map((e=>e.playerName)),a=t.filter((e=>s.includes(e.fullName)));await Promise.all(a.map((async e=>{console.log("".concat(e.fullName," has ").concat(e.wins||0," wins.")),await zy(i,{fullName:e.fullName,handicap:e.handicap,wins:e.wins||0,totalWins:e.totalwins||0,date:n})}))),T("Result Successfully Uploaded!"),C("")}catch(t){console.error("Error uploading data to Firebase:",t.message),C("Error uploading data to Firebase. Please try again."),T("")}})(),console.log("Results submitted. Check console for player win counts.")},children:"Submit Results"}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("button",{onClick:()=>H(!W),children:W?"Hide Buttons":"Dont Use"}),W&&(0,lr.jsxs)("div",{children:[(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"roundIndex",children:"Round Index:"}),(0,lr.jsx)("input",{type:"number",id:"roundIndex",name:"roundIndex",value:F,onChange:e=>B(parseInt(e.target.value))})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"matchIndex",children:"Match Index:"}),(0,lr.jsx)("input",{type:"number",id:"matchIndex",name:"matchIndex",value:V,onChange:e=>z(parseInt(e.target.value))})]}),(0,lr.jsxs)("div",{children:[(0,lr.jsx)("label",{htmlFor:"subBoxIndex",children:"Sub Box Index:"}),(0,lr.jsx)("input",{type:"number",id:"subBoxIndex",name:"subBoxIndex",value:K,onChange:e=>q(parseInt(e.target.value))})]}),(0,lr.jsx)("button",{onClick:()=>((e,t,n)=>{i((r=>{const i=[...r];return i[e]&&i[e].matches[t]&&(i[e].matches[t].subBoxes[n]={playerName:"",handicap:"",result:null,isWinner:!1}),i}))})(F,V,K),children:"Clear Sub Box"})]})]})]}),(0,lr.jsx)("div",{})]})},i_=()=>{const[t,n]=(0,e.useState)("onsite"),[r,i]=(0,e.useState)(""),[s,a]=(0,e.useState)(!1);(0,e.useEffect)((()=>{"true"===localStorage.getItem("pinEntered")&&a(!0)}),[]);const o=e=>{if(("drawTest"===t||"newDraw"===t)&&e!==t){if(!window.confirm("Is the competition complete? You'll lose the generated Draw if you leave this page."))return}n(e)};return(0,lr.jsx)("div",{className:"app-container",children:s?(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)("h2",{children:"Maroubra Seals Monday Draw"}),(0,lr.jsxs)("nav",{className:"navbar",children:[(0,lr.jsx)("button",{onClick:()=>o("onsite"),children:"Onsite"}),(0,lr.jsx)("button",{onClick:()=>o("available"),children:"Available"}),(0,lr.jsx)("button",{onClick:()=>o("drawTest"),children:"Draw"}),(0,lr.jsx)("button",{onClick:()=>o("newDraw"),children:"New Draw"}),(0,lr.jsx)("button",{onClick:()=>o("resultPage"),children:"Result"}),(0,lr.jsx)("button",{onClick:()=>o("info"),children:"Information"}),(0,lr.jsx)("button",{onClick:()=>o("listPlayer"),children:"List Player"}),(0,lr.jsx)("button",{onClick:()=>o("addPlayer"),children:"Add Player"})]}),"onsite"===t&&(0,lr.jsx)(Bs,{}),"available"===t&&(0,lr.jsx)(cr,{}),"drawTest"===t&&(0,lr.jsx)(e_,{}),"newDraw"===t&&(0,lr.jsx)(r_,{}),"resultPage"===t&&(0,lr.jsx)(t_,{}),"info"===t&&(0,lr.jsx)(n_,{}),"listPlayer"===t&&(0,lr.jsx)(Fs,{}),"addPlayer"===t&&(0,lr.jsx)(Us,{})]}):(0,lr.jsxs)("div",{className:"pin-input-container",children:[(0,lr.jsx)("input",{type:"password",placeholder:"Enter PIN",value:r,onChange:e=>i(e.target.value)}),(0,lr.jsx)("button",{onClick:()=>{const e="pebkod-9sucqU-pukhyq";a(r===e),r===e?localStorage.setItem("pinEntered","true"):alert("Please enter the correct PIN first.")},children:"Submit"})]})})},s_=e=>{e&&e instanceof Function&&n.e(206).then(n.bind(n,206)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:a}=t;n(e),r(e),i(e),s(e),a(e)}))};t.createRoot(document.getElementById("root")).render((0,lr.jsx)(e.StrictMode,{children:(0,lr.jsx)(i_,{})})),s_()})()})();